"use strict";(self.webpackChunkAngularBlogApp=self.webpackChunkAngularBlogApp||[]).push([[179],{2011:(_t,Ae,F)=>{F.d(Ae,{Dh:()=>Ie,GT:()=>oe,cc:()=>Te,hO:()=>je,on:()=>G,pX:()=>ie,xv:()=>he});var m=F(2223),Q=F(9260),L=F(4976);_t=F.hmd(_t);const se=["ngOnDestroy"],ie=(Ue,Oe,ze,ke={})=>new Proxy(Ue,{get:(we,fe)=>ze.runOutsideAngular(()=>{var Ne;if(Ue[fe])return!(null===(Ne=ke?.spy)||void 0===Ne)&&Ne.get&&ke.spy.get(fe,Ue[fe]),Ue[fe];if(se.indexOf(fe)>-1)return()=>{};const Ee=Oe.toPromise().then($e=>{const re=$e&&$e[fe];return"function"==typeof re?re.bind($e):re&&re.then?re.then(Ke=>ze.run(()=>Ke)):ze.run(()=>re)});return new Proxy(()=>{},{get:($e,re)=>Ee[re],apply:($e,re,Ke)=>Ee.then(Yt=>{var br;const mi=Yt&&Yt(...Ke);return!(null===(br=ke?.spy)||void 0===br)&&br.apply&&ke.spy.apply(fe,Ke,mi),mi})})})}),oe=(Ue,Oe)=>{Oe.forEach(ze=>{Object.getOwnPropertyNames(ze.prototype||ze).forEach(ke=>{Object.defineProperty(Ue.prototype,ke,Object.getOwnPropertyDescriptor(ze.prototype||ze,ke))})})};class me{constructor(Oe){return Oe}}const Ie=new m.OlP("angularfire2.app.options"),he=new m.OlP("angularfire2.app.name");function G(Ue,Oe,ze){const we="object"==typeof ze&&ze||{};we.name=we.name||"string"==typeof ze&&ze||"[DEFAULT]";const Ne=Q.Z.apps.filter(Ee=>Ee&&Ee.name===we.name)[0]||Oe.runOutsideAngular(()=>Q.Z.initializeApp(Ue,we));try{JSON.stringify(Ue)!==JSON.stringify(Ne.options)&&z("error",`${Ne.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(Ne)}const z=(Ue,...Oe)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Ue](...Oe)},Z={provide:me,useFactory:G,deps:[Ie,m.R0b,[new m.FiY,he]]};let je=(()=>{class Ue{constructor(ze){Q.Z.registerVersion("angularfire",L.q4.full,"core"),Q.Z.registerVersion("angularfire",L.q4.full,"app-compat"),Q.Z.registerVersion("angular",m.q4F.full,ze.toString())}static initializeApp(ze,ke){return{ngModule:Ue,providers:[{provide:Ie,useValue:ze},{provide:he,useValue:ke}]}}}return Ue.\u0275fac=function(ze){return new(ze||Ue)(m.LFG(m.Lbi))},Ue.\u0275mod=m.oAB({type:Ue}),Ue.\u0275inj=m.cJS({providers:[Z]}),Ue})();function Te(Ue,Oe,ze,ke,we){const[,fe,Ne]=globalThis.\u0275AngularfireInstanceCache.find(Ee=>Ee[0]===Ue)||[];if(fe)return function nt(Ue,Oe){try{return Ue.toString()===Oe.toString()}catch{return Ue===Oe}}(we,Ne)||(ce("error",`${Oe} was already initialized on the ${ze} Firebase App with different settings.${vt?" You may need to reload as Firebase is not HMR aware.":""}`),ce("warn",{is:we,was:Ne})),fe;{const Ee=ke();return globalThis.\u0275AngularfireInstanceCache.push([Ue,Ee,we]),Ee}}const vt=!!_t.hot,ce=(Ue,...Oe)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Ue](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(_t,Ae,F)=>{F.d(Ae,{q4:()=>Aa,iC:()=>ci,HU:()=>Na,vb:()=>xa,JM:()=>Uu});var m=F(2223),Q=F(259),L=F(5861),se=F(6881),ie=F(2090),oe=F(4859),me=F(1877);const Ie=(C,T)=>T.some(R=>C instanceof R);let he,G;const je=new WeakMap,Te=new WeakMap,nt=new WeakMap,vt=new WeakMap,ce=new WeakMap;let ze={get(C,T,R){if(C instanceof IDBTransaction){if("done"===T)return Te.get(C);if("objectStoreNames"===T)return C.objectStoreNames||nt.get(C);if("store"===T)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Ne(C[T])},set:(C,T,R)=>(C[T]=R,!0),has:(C,T)=>C instanceof IDBTransaction&&("done"===T||"store"===T)||T in C};function fe(C){return"function"==typeof C?function we(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Z(){return G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...T){return C.apply(Ee(this),T),Ne(je.get(this))}:function(...T){return Ne(C.apply(Ee(this),T))}:function(T,...R){const O=C.call(Ee(this),T,...R);return nt.set(O,T.sort?T.sort():[T]),Ne(O)}}(C):(C instanceof IDBTransaction&&function Oe(C){if(Te.has(C))return;const T=new Promise((R,O)=>{const H=()=>{C.removeEventListener("complete",K),C.removeEventListener("error",ae),C.removeEventListener("abort",ae)},K=()=>{R(),H()},ae=()=>{O(C.error||new DOMException("AbortError","AbortError")),H()};C.addEventListener("complete",K),C.addEventListener("error",ae),C.addEventListener("abort",ae)});Te.set(C,T)}(C),Ie(C,function z(){return he||(he=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,ze):C)}function Ne(C){if(C instanceof IDBRequest)return function Ue(C){const T=new Promise((R,O)=>{const H=()=>{C.removeEventListener("success",K),C.removeEventListener("error",ae)},K=()=>{R(Ne(C.result)),H()},ae=()=>{O(C.error),H()};C.addEventListener("success",K),C.addEventListener("error",ae)});return T.then(R=>{R instanceof IDBCursor&&je.set(R,C)}).catch(()=>{}),ce.set(T,C),T}(C);if(vt.has(C))return vt.get(C);const T=fe(C);return T!==C&&(vt.set(C,T),ce.set(T,C)),T}const Ee=C=>ce.get(C),Ke=["get","getKey","getAll","getAllKeys","count"],Yt=["put","add","delete","clear"],br=new Map;function mi(C,T){if(!(C instanceof IDBDatabase)||T in C||"string"!=typeof T)return;if(br.get(T))return br.get(T);const R=T.replace(/FromIndex$/,""),O=T!==R,H=Yt.includes(R);if(!(R in(O?IDBIndex:IDBObjectStore).prototype)||!H&&!Ke.includes(R))return;const K=function(){var ae=(0,L.Z)(function*(Ze,...Be){const ct=this.transaction(Ze,H?"readwrite":"readonly");let St=ct.store;return O&&(St=St.index(Be.shift())),(yield Promise.all([St[R](...Be),H&&ct.done]))[0]});return function(Be){return ae.apply(this,arguments)}}();return br.set(T,K),K}!function ke(C){ze=C(ze)}(C=>({...C,get:(T,R,O)=>mi(T,R)||C.get(T,R,O),has:(T,R)=>!!mi(T,R)||C.has(T,R)}));const io="@firebase/installations",le="0.6.4",_e=1e4,Ce=`w:${le}`,Me="FIS_v2",We="https://firebaseinstallations.googleapis.com/v1",Le=36e5,wt=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Nt(C){return C instanceof ie.ZR&&C.code.includes("request-failed")}function pn({projectId:C}){return`${We}/projects/${C}/installations`}function Gt(C){return{token:C.token,requestStatus:2,expiresIn:Fs(C.expiresIn),creationTime:Date.now()}}function gn(C,T){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,L.Z)(function*(C,T){const O=(yield T.json()).error;return wt.create("request-failed",{requestName:C,serverCode:O.code,serverMessage:O.message,serverStatus:O.status})})).apply(this,arguments)}function Zr({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function yi(C){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,L.Z)(function*(C){const T=yield C();return T.status>=500&&T.status<600?C():T})).apply(this,arguments)}function Fs(C){return Number(C.replace("s","000"))}function gt(){return(gt=(0,L.Z)(function*({appConfig:C,heartbeatServiceProvider:T},{fid:R}){const O=pn(C),H=Zr(C),K=T.getImmediate({optional:!0});if(K){const ct=yield K.getHeartbeatsHeader();ct&&H.append("x-firebase-client",ct)}const Ze={method:"POST",headers:H,body:JSON.stringify({fid:R,authVersion:Me,appId:C.appId,sdkVersion:Ce})},Be=yield yi(()=>fetch(O,Ze));if(Be.ok){const ct=yield Be.json();return{fid:ct.fid||R,registrationStatus:2,refreshToken:ct.refreshToken,authToken:Gt(ct.authToken)}}throw yield gn("Create Installation",Be)})).apply(this,arguments)}function _i(C){return new Promise(T=>{setTimeout(T,C)})}const yr=/^[cdef][\w-]{21}$/,en="";function Ct(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function Xe(C){return function oo(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return yr.test(R)?R:en}catch{return en}}function vi(C){return`${C.appName}!${C.appId}`}const Pn=new Map;function ri(C,T){const R=vi(C);vs(R,T),function sn(C,T){const R=function $t(){return!Fi&&"BroadcastChannel"in self&&(Fi=new BroadcastChannel("[Firebase] FID Change"),Fi.onmessage=C=>{vs(C.data.key,C.data.fid)}),Fi}();R&&R.postMessage({key:C,fid:T}),function Us(){0===Pn.size&&Fi&&(Fi.close(),Fi=null)}()}(R,T)}function vs(C,T){const R=Pn.get(C);if(R)for(const O of R)O(T)}let Fi=null;const wi="firebase-installations-database",aa=1,$n="firebase-installations-store";let Vs=null;function ln(){return Vs||(Vs=function $e(C,T,{blocked:R,upgrade:O,blocking:H,terminated:K}={}){const ae=indexedDB.open(C,T),Ze=Ne(ae);return O&&ae.addEventListener("upgradeneeded",Be=>{O(Ne(ae.result),Be.oldVersion,Be.newVersion,Ne(ae.transaction))}),R&&ae.addEventListener("blocked",()=>R()),Ze.then(Be=>{K&&Be.addEventListener("close",()=>K()),H&&Be.addEventListener("versionchange",()=>H())}).catch(()=>{}),Ze}(wi,aa,{upgrade:(C,T)=>{0===T&&C.createObjectStore($n)}})),Vs}function Hn(C,T){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,L.Z)(function*(C,T){const R=vi(C),H=(yield ln()).transaction($n,"readwrite"),K=H.objectStore($n),ae=yield K.get(R);return yield K.put(T,R),yield H.done,(!ae||ae.fid!==T.fid)&&ri(C,T.fid),T})).apply(this,arguments)}function Ei(C){return zn.apply(this,arguments)}function zn(){return(zn=(0,L.Z)(function*(C){const T=vi(C),O=(yield ln()).transaction($n,"readwrite");yield O.objectStore($n).delete(T),yield O.done})).apply(this,arguments)}function Ii(C,T){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,L.Z)(function*(C,T){const R=vi(C),H=(yield ln()).transaction($n,"readwrite"),K=H.objectStore($n),ae=yield K.get(R),Ze=T(ae);return void 0===Ze?yield K.delete(R):yield K.put(Ze,R),yield H.done,Ze&&(!ae||ae.fid!==Ze.fid)&&ri(C,Ze.fid),Ze})).apply(this,arguments)}function j(C){return V.apply(this,arguments)}function V(){return V=(0,L.Z)(function*(C){let T;const R=yield Ii(C.appConfig,O=>{const H=function q(C){return On(C||{fid:Ct(),registrationStatus:0})}(O),K=function ge(C,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(wt.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},O=function ee(C,T){return Je.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:O}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Ye(C)}:{installationEntry:T}}(C,H);return T=K.registrationPromise,K.installationEntry});return R.fid===en?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}}),V.apply(this,arguments)}function Je(){return Je=(0,L.Z)(function*(C,T){try{const R=yield function au(C,T){return gt.apply(this,arguments)}(C,T);return Hn(C.appConfig,R)}catch(R){throw Nt(R)&&409===R.customData.serverCode?yield Ei(C.appConfig):yield Hn(C.appConfig,{fid:T.fid,registrationStatus:0}),R}}),Je.apply(this,arguments)}function Ye(C){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,L.Z)(function*(C){let T=yield tr(C.appConfig);for(;1===T.registrationStatus;)yield _i(100),T=yield tr(C.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:O}=yield j(C);return O||R}return T})).apply(this,arguments)}function tr(C){return Ii(C,T=>{if(!T)throw wt.create("installation-not-found");return On(T)})}function On(C){return function Gn(C){return 1===C.registrationStatus&&C.registrationTime+_e<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function nr(){return(nr=(0,L.Z)(function*({appConfig:C,heartbeatServiceProvider:T},R){const O=function ts(C,{fid:T}){return`${pn(C)}/${T}/authTokens:generate`}(C,R),H=function mr(C,{refreshToken:T}){const R=Zr(C);return R.append("Authorization",function so(C){return`${Me} ${C}`}(T)),R}(C,R),K=T.getImmediate({optional:!0});if(K){const ct=yield K.getHeartbeatsHeader();ct&&H.append("x-firebase-client",ct)}const Ze={method:"POST",headers:H,body:JSON.stringify({installation:{sdkVersion:Ce,appId:C.appId}})},Be=yield yi(()=>fetch(O,Ze));if(Be.ok)return Gt(yield Be.json());throw yield gn("Generate Auth Token",Be)})).apply(this,arguments)}function ws(C){return Po.apply(this,arguments)}function Po(){return Po=(0,L.Z)(function*(C,T=!1){let R;const O=yield Ii(C.appConfig,K=>{if(!Ut(K))throw wt.create("not-registered");const ae=K.authToken;if(!T&&function tn(C){return 2===C.requestStatus&&!function _r(C){const T=Date.now();return T<C.creationTime||C.creationTime+C.expiresIn<T+Le}(C)}(ae))return K;if(1===ae.requestStatus)return R=function de(C,T){return te.apply(this,arguments)}(C,T),K;{if(!navigator.onLine)throw wt.create("app-offline");const Ze=function rr(C){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:T})}(K);return R=function ht(C,T){return Tt.apply(this,arguments)}(C,Ze),Ze}});return R?yield R:O.authToken}),Po.apply(this,arguments)}function te(){return(te=(0,L.Z)(function*(C,T){let R=yield Pe(C.appConfig);for(;1===R.authToken.requestStatus;)yield _i(100),R=yield Pe(C.appConfig);const O=R.authToken;return 0===O.requestStatus?ws(C,T):O})).apply(this,arguments)}function Pe(C){return Ii(C,T=>{if(!Ut(T))throw wt.create("not-registered");return function ir(C){return 1===C.requestStatus&&C.requestTime+_e<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Tt(){return Tt=(0,L.Z)(function*(C,T){try{const R=yield function Lt(C,T){return nr.apply(this,arguments)}(C,T),O=Object.assign(Object.assign({},T),{authToken:R});return yield Hn(C.appConfig,O),R}catch(R){if(!Nt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const O=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Hn(C.appConfig,O)}else yield Ei(C.appConfig);throw R}}),Tt.apply(this,arguments)}function Ut(C){return void 0!==C&&2===C.registrationStatus}function ca(){return(ca=(0,L.Z)(function*(C){const T=C,{installationEntry:R,registrationPromise:O}=yield j(T);return O?O.catch(console.error):ws(T).catch(console.error),R.fid})).apply(this,arguments)}function Vl(){return Vl=(0,L.Z)(function*(C,T=!1){const R=C;return yield function Eh(C){return ns.apply(this,arguments)}(R),(yield ws(R,T)).token}),Vl.apply(this,arguments)}function ns(){return(ns=(0,L.Z)(function*(C){const{registrationPromise:T}=yield j(C);T&&(yield T)})).apply(this,arguments)}function ao(C){return wt.create("missing-app-config-values",{valueName:C})}const Ch="installations",Sp=C=>{const T=C.getProvider("app").getImmediate(),R=function pc(C){if(!C||!C.options)throw ao("App Configuration");if(!C.name)throw ao("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!C.options[R])throw ao(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,se._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},uo=C=>{const T=C.getProvider("app").getImmediate(),R=(0,se._getProvider)(T,Ch).getImmediate();return{getId:()=>function ua(C){return ca.apply(this,arguments)}(R),getToken:H=>function wh(C){return Vl.apply(this,arguments)}(R,H)}};(function on(){(0,se._registerComponent)(new oe.wA(Ch,Sp,"PUBLIC")),(0,se._registerComponent)(new oe.wA("installations-internal",uo,"PRIVATE"))})(),(0,se.registerVersion)(io,le),(0,se.registerVersion)(io,le,"esm2017");const sr="@firebase/remote-config",Ar=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ii{constructor(T,R,O,H){this.client=T,this.storage=R,this.storageCache=O,this.logger=H}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const O=Date.now()-R,H=O<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${O}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${H}.`),H}fetch(T){var R=this;return(0,L.Z)(function*(){const[O,H]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(H&&R.isCachedDataFresh(T.cacheMaxAgeMillis,O))return H;T.eTag=H&&H.eTag;const K=yield R.client.fetch(T),ae=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===K.status&&ae.push(R.storage.setLastSuccessfulFetchResponse(K)),yield Promise.all(ae),K})()}}function ha(C=navigator){return C.languages&&C.languages[0]||C.language}class si{constructor(T,R,O,H,K,ae){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=O,this.projectId=H,this.apiKey=K,this.appId=ae}fetch(T){var R=this;return(0,L.Z)(function*(){const[O,H]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Be={sdk_version:R.sdkVersion,app_instance_id:O,app_instance_id_token:H,app_id:R.appId,language_code:ha()},ct={method:"POST",headers:Ze,body:JSON.stringify(Be)},St=fetch(ae,ct),At=new Promise((Xr,xs)=>{T.signal.addEventListener(()=>{const wd=new Error("The operation was aborted.");wd.name="AbortError",xs(wd)})});let lr;try{yield Promise.race([St,At]),lr=yield St}catch(Xr){let xs="fetch-client-network";throw"AbortError"===Xr?.name&&(xs="fetch-timeout"),Ar.create(xs,{originalErrorMessage:Xr?.message})}let Yn=lr.status;const As=lr.headers.get("ETag")||void 0;let Vu,qi;if(200===lr.status){let Xr;try{Xr=yield lr.json()}catch(xs){throw Ar.create("fetch-client-parse",{originalErrorMessage:xs?.message})}Vu=Xr.entries,qi=Xr.state}if("INSTANCE_STATE_UNSPECIFIED"===qi?Yn=500:"NO_CHANGE"===qi?Yn=304:("NO_TEMPLATE"===qi||"EMPTY_CONFIG"===qi)&&(Vu={}),304!==Yn&&200!==Yn)throw Ar.create("fetch-status",{httpStatus:Yn});return{status:Yn,eTag:As,config:Vu}})()}}class Uo{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,L.Z)(function*(){const O=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,O)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:O}){var H=this;return(0,L.Z)(function*(){yield function Fo(C,T){return new Promise((R,O)=>{const H=Math.max(T-Date.now(),0),K=setTimeout(R,H);C.addEventListener(()=>{clearTimeout(K),O(Ar.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const K=yield H.client.fetch(T);return yield H.storage.deleteThrottleMetadata(),K}catch(K){if(!function $l(C){if(!(C instanceof ie.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(K))throw K;const ae={throttleEndTimeMillis:Date.now()+(0,ie.$s)(O),backoffCount:O+1};return yield H.storage.setThrottleMetadata(ae),H.attemptFetch(T,ae)}})()}}class yc{constructor(T,R,O,H,K){this.app=T,this._client=R,this._storageCache=O,this._storage=H,this._logger=K,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Vt(C,T){const R=C.target.error||void 0;return Ar.create(T,{originalErrorMessage:R&&R?.message})}const Vi="app_namespace_store";class Th{constructor(T,R,O,H=function Ti(){return new Promise((C,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=O=>{T(Vt(O,"storage-open"))},R.onsuccess=O=>{C(O.target.result)},R.onupgradeneeded=O=>{0===O.oldVersion&&O.target.result.createObjectStore(Vi,{keyPath:"compositeKey"})}}catch(R){T(Ar.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=T,this.appName=R,this.namespace=O,this.openDbPromise=H}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,L.Z)(function*(){const O=yield R.openDbPromise;return new Promise((H,K)=>{const Ze=O.transaction([Vi],"readonly").objectStore(Vi),Be=R.createCompositeKey(T);try{const ct=Ze.get(Be);ct.onerror=St=>{K(Vt(St,"storage-get"))},ct.onsuccess=St=>{const At=St.target.result;H(At?At.value:void 0)}}catch(ct){K(Ar.create("storage-get",{originalErrorMessage:ct?.message}))}})})()}set(T,R){var O=this;return(0,L.Z)(function*(){const H=yield O.openDbPromise;return new Promise((K,ae)=>{const Be=H.transaction([Vi],"readwrite").objectStore(Vi),ct=O.createCompositeKey(T);try{const St=Be.put({compositeKey:ct,value:R});St.onerror=At=>{ae(Vt(At,"storage-set"))},St.onsuccess=()=>{K()}}catch(St){ae(Ar.create("storage-set",{originalErrorMessage:St?.message}))}})})()}delete(T){var R=this;return(0,L.Z)(function*(){const O=yield R.openDbPromise;return new Promise((H,K)=>{const Ze=O.transaction([Vi],"readwrite").objectStore(Vi),Be=R.createCompositeKey(T);try{const ct=Ze.delete(Be);ct.onerror=St=>{K(Vt(St,"storage-delete"))},ct.onsuccess=()=>{H()}}catch(ct){K(Ar.create("storage-delete",{originalErrorMessage:ct?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Vo{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,L.Z)(function*(){const R=T.storage.getLastFetchStatus(),O=T.storage.getLastSuccessfulFetchTimestampMillis(),H=T.storage.getActiveConfig(),K=yield R;K&&(T.lastFetchStatus=K);const ae=yield O;ae&&(T.lastSuccessfulFetchTimestampMillis=ae);const Ze=yield H;Ze&&(T.activeConfig=Ze)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function oi(){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,L.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function bi(){(0,se._registerComponent)(new oe.wA("remote-config",function C(T,{instanceIdentifier:R}){const O=T.getProvider("app").getImmediate(),H=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ar.create("registration-window");if(!(0,ie.hl)())throw Ar.create("indexed-db-unavailable");const{projectId:K,apiKey:ae,appId:Ze}=O.options;if(!K)throw Ar.create("registration-project-id");if(!ae)throw Ar.create("registration-api-key");if(!Ze)throw Ar.create("registration-app-id");const Be=new Th(Ze,O.name,R=R||"firebase"),ct=new Vo(Be),St=new me.Yd(sr);St.logLevel=me.in.ERROR;const At=new si(H,se.SDK_VERSION,R,K,ae,Ze),lr=new Uo(At,Be),Yn=new ii(lr,Be,ct,St),As=new yc(O,Yn,ct,Be,St);return function Fr(C){const T=(0,ie.m9)(C);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(As),As},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(sr,"0.4.4"),(0,se.registerVersion)(sr,"0.4.4","esm2017")}();const _c=(C,T)=>T.some(R=>C instanceof R);let Bo,Bi;const Hl=new WeakMap,lu=new WeakMap,jo=new WeakMap,ai=new WeakMap,pa=new WeakMap;let vc={get(C,T,R){if(C instanceof IDBTransaction){if("done"===T)return lu.get(C);if("objectStoreNames"===T)return C.objectStoreNames||jo.get(C);if("store"===T)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Is(C[T])},set:(C,T,R)=>(C[T]=R,!0),has:(C,T)=>C instanceof IDBTransaction&&("done"===T||"store"===T)||T in C};function oy(C){return"function"==typeof C?function xp(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fa(){return Bi||(Bi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...T){return C.apply(zl(this),T),Is(Hl.get(this))}:function(...T){return Is(C.apply(zl(this),T))}:function(T,...R){const O=C.call(zl(this),T,...R);return jo.set(O,T.sort?T.sort():[T]),Is(O)}}(C):(C instanceof IDBTransaction&&function bh(C){if(lu.has(C))return;const T=new Promise((R,O)=>{const H=()=>{C.removeEventListener("complete",K),C.removeEventListener("error",ae),C.removeEventListener("abort",ae)},K=()=>{R(),H()},ae=()=>{O(C.error||new DOMException("AbortError","AbortError")),H()};C.addEventListener("complete",K),C.addEventListener("error",ae),C.addEventListener("abort",ae)});lu.set(C,T)}(C),_c(C,function Es(){return Bo||(Bo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,vc):C)}function Is(C){if(C instanceof IDBRequest)return function sy(C){const T=new Promise((R,O)=>{const H=()=>{C.removeEventListener("success",K),C.removeEventListener("error",ae)},K=()=>{R(Is(C.result)),H()},ae=()=>{O(C.error),H()};C.addEventListener("success",K),C.addEventListener("error",ae)});return T.then(R=>{R instanceof IDBCursor&&Hl.set(R,C)}).catch(()=>{}),pa.set(T,C),T}(C);if(ai.has(C))return ai.get(C);const T=oy(C);return T!==C&&(ai.set(C,T),pa.set(T,C)),T}const zl=C=>pa.get(C);function Gl(C,T,{blocked:R,upgrade:O,blocking:H,terminated:K}={}){const ae=indexedDB.open(C,T),Ze=Is(ae);return O&&ae.addEventListener("upgradeneeded",Be=>{O(Is(ae.result),Be.oldVersion,Be.newVersion,Is(ae.transaction))}),R&&ae.addEventListener("blocked",()=>R()),Ze.then(Be=>{K&&Be.addEventListener("close",()=>K()),H&&Be.addEventListener("versionchange",()=>H())}).catch(()=>{}),Ze}function du(C,{blocked:T}={}){const R=indexedDB.deleteDatabase(C);return T&&R.addEventListener("blocked",()=>T()),Is(R).then(()=>{})}const Sh=["get","getKey","getAll","getAllKeys","count"],Wl=["put","add","delete","clear"],hu=new Map;function Ah(C,T){if(!(C instanceof IDBDatabase)||T in C||"string"!=typeof T)return;if(hu.get(T))return hu.get(T);const R=T.replace(/FromIndex$/,""),O=T!==R,H=Wl.includes(R);if(!(R in(O?IDBIndex:IDBObjectStore).prototype)||!H&&!Sh.includes(R))return;const K=function(){var ae=(0,L.Z)(function*(Ze,...Be){const ct=this.transaction(Ze,H?"readwrite":"readonly");let St=ct.store;return O&&(St=St.index(Be.shift())),(yield Promise.all([St[R](...Be),H&&ct.done]))[0]});return function(Be){return ae.apply(this,arguments)}}();return hu.set(T,K),K}!function Ap(C){vc=C(vc)}(C=>({...C,get:(T,R,O)=>Ah(T,R)||C.get(T,R,O),has:(T,R)=>!!Ah(T,R)||C.has(T,R)}));const xh="/firebase-messaging-sw.js",ql="/firebase-cloud-messaging-push-scope",Cs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Rh="https://fcmregistrations.googleapis.com/v1",Zl="google.c.a.c_id",Cn="google.c.a.c_l",Kl="google.c.a.ts";var $o=(()=>(($o=$o||{}).PUSH_RECEIVED="push-received",$o.NOTIFICATION_CLICKED="notification-clicked",$o))();function js(C){const T=new Uint8Array(C);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function wc(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),O=atob(R),H=new Uint8Array(O.length);for(let K=0;K<O.length;++K)H[K]=O.charCodeAt(K);return H}const ui="fcm_token_details_db",fu=5,An="fcm_token_object_Store";function pu(){return pu=(0,L.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(K=>K.name).includes(ui))return null;let T=null;return(yield Gl(ui,fu,{upgrade:(O=(0,L.Z)(function*(H,K,ae,Ze){var Be;if(K<2||!H.objectStoreNames.contains(An))return;const ct=Ze.objectStore(An),St=yield ct.index("fcmSenderId").get(C);if(yield ct.clear(),St)if(2===K){const At=St;if(!At.auth||!At.p256dh||!At.endpoint)return;T={token:At.fcmToken,createTime:null!==(Be=At.createTime)&&void 0!==Be?Be:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:js(At.vapidKey)}}}else if(3===K){const At=St;T={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:js(At.auth),p256dh:js(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:js(At.vapidKey)}}}else if(4===K){const At=St;T={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:js(At.auth),p256dh:js(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:js(At.vapidKey)}}}}),function(K,ae,Ze,Be){return O.apply(this,arguments)})})).close(),yield du(ui),yield du("fcm_vapid_details_db"),yield du("undefined"),function Yl(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:T}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var O}),pu.apply(this,arguments)}const gu="firebase-messaging-database",ga=1,Si="firebase-messaging-store";let Nh=null;function mu(){return Nh||(Nh=Gl(gu,ga,{upgrade:(C,T)=>{0===T&&C.createObjectStore(Si)}})),Nh}function yu(C){return ma.apply(this,arguments)}function ma(){return ma=(0,L.Z)(function*(C){const T=Jl(C),O=yield(yield mu()).transaction(Si).objectStore(Si).get(T);if(O)return O;{const H=yield function Np(C){return pu.apply(this,arguments)}(C.appConfig.senderId);if(H)return yield _u(C,H),H}}),ma.apply(this,arguments)}function _u(C,T){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,L.Z)(function*(C,T){const R=Jl(C),H=(yield mu()).transaction(Si,"readwrite");return yield H.objectStore(Si).put(T,R),yield H.done,T})).apply(this,arguments)}function Ql(){return(Ql=(0,L.Z)(function*(C){const T=Jl(C),O=(yield mu()).transaction(Si,"readwrite");yield O.objectStore(Si).delete(T),yield O.done})).apply(this,arguments)}function Jl({appConfig:C}){return C.appId}const Vr=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Mh(C,T){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,L.Z)(function*(C,T){const R=yield nd(C),O=Oh(T),H={method:"POST",headers:R,body:JSON.stringify(O)};let K;try{K=yield(yield fetch(vu(C.appConfig),H)).json()}catch(ae){throw Vr.create("token-subscribe-failed",{errorInfo:ae?.toString()})}if(K.error)throw Vr.create("token-subscribe-failed",{errorInfo:K.error.message});if(!K.token)throw Vr.create("token-subscribe-no-token");return K.token})).apply(this,arguments)}function Ph(){return(Ph=(0,L.Z)(function*(C,T){const R=yield nd(C),O=Oh(T.subscriptionOptions),H={method:"PATCH",headers:R,body:JSON.stringify(O)};let K;try{K=yield(yield fetch(`${vu(C.appConfig)}/${T.token}`,H)).json()}catch(ae){throw Vr.create("token-update-failed",{errorInfo:ae?.toString()})}if(K.error)throw Vr.create("token-update-failed",{errorInfo:K.error.message});if(!K.token)throw Vr.create("token-update-no-token");return K.token})).apply(this,arguments)}function ed(C,T){return td.apply(this,arguments)}function td(){return(td=(0,L.Z)(function*(C,T){const O={method:"DELETE",headers:yield nd(C)};try{const K=yield(yield fetch(`${vu(C.appConfig)}/${T}`,O)).json();if(K.error)throw Vr.create("token-unsubscribe-failed",{errorInfo:K.error.message})}catch(H){throw Vr.create("token-unsubscribe-failed",{errorInfo:H?.toString()})}})).apply(this,arguments)}function vu({projectId:C}){return`${Rh}/projects/${C}/registrations`}function nd(C){return ya.apply(this,arguments)}function ya(){return(ya=(0,L.Z)(function*({appConfig:C,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Oh({p256dh:C,auth:T,endpoint:R,vapidKey:O}){const H={web:{endpoint:R,auth:T,p256dh:C}};return O!==Cs&&(H.web.applicationPubKey=O),H}const ji=6048e5;function wu(){return wu=(0,L.Z)(function*(C){const T=yield function _a(C,T){return Qr.apply(this,arguments)}(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:T.endpoint,auth:js(T.getKey("auth")),p256dh:js(T.getKey("p256dh"))},O=yield yu(C.firebaseDependencies);if(O){if(function Dc(C,T){return T.vapidKey===C.vapidKey&&T.endpoint===C.endpoint&&T.auth===C.auth&&T.p256dh===C.p256dh}(O.subscriptionOptions,R))return Date.now()>=O.createTime+ji?function Cc(C,T){return xr.apply(this,arguments)}(C,{token:O.token,createTime:Date.now(),subscriptionOptions:R}):O.token;try{yield ed(C.firebaseDependencies,O.token)}catch(H){console.warn(H)}return Op(C.firebaseDependencies,R)}return Op(C.firebaseDependencies,R)}),wu.apply(this,arguments)}function kh(){return kh=(0,L.Z)(function*(C){const T=yield yu(C.firebaseDependencies);T&&(yield ed(C.firebaseDependencies,T.token),yield function uy(C){return Ql.apply(this,arguments)}(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()}),kh.apply(this,arguments)}function xr(){return xr=(0,L.Z)(function*(C,T){try{const R=yield function Xl(C,T){return Ph.apply(this,arguments)}(C.firebaseDependencies,T),O=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield _u(C.firebaseDependencies,O),R}catch(R){throw yield function yn(C){return kh.apply(this,arguments)}(C),R}}),xr.apply(this,arguments)}function Op(C,T){return po.apply(this,arguments)}function po(){return(po=(0,L.Z)(function*(C,T){const O={token:yield Mh(C,T),createTime:Date.now(),subscriptionOptions:T};return yield _u(C,O),O.token})).apply(this,arguments)}function Qr(){return(Qr=(0,L.Z)(function*(C,T){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:wc(T)})})).apply(this,arguments)}function Eu(C){const T={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function rd(C,T){if(!T.notification)return;C.notification={};const R=T.notification.title;R&&(C.notification.title=R);const O=T.notification.body;O&&(C.notification.body=O);const H=T.notification.image;H&&(C.notification.image=H);const K=T.notification.icon;K&&(C.notification.icon=K)}(T,C),function $i(C,T){T.data&&(C.data=T.data)}(T,C),function kp(C,T){var R,O,H,K,ae;if(!(T.fcmOptions||null!==(R=T.notification)&&void 0!==R&&R.click_action))return;C.fcmOptions={};const Ze=null!==(H=null===(O=T.fcmOptions)||void 0===O?void 0:O.link)&&void 0!==H?H:null===(K=T.notification)||void 0===K?void 0:K.click_action;Ze&&(C.fcmOptions.link=Ze);const Be=null===(ae=T.fcmOptions)||void 0===ae?void 0:ae.analytics_label;Be&&(C.fcmOptions.analyticsLabel=Be)}(T,C),T}function sd(C,T){const R=[];for(let O=0;O<C.length;O++)R.push(C.charAt(O)),O<T.length&&R.push(T.charAt(O));return R.join("")}function od(C){return Vr.create("missing-app-config-values",{valueName:C})}sd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),sd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Fh{constructor(T,R,O){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const H=function Lh(C){if(!C||!C.options)throw od("App Configuration Object");if(!C.name)throw od("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const O of T)if(!R[O])throw od(O);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:H,installations:R,analyticsProvider:O}}_delete(){return Promise.resolve()}}function Tc(){return(Tc=(0,L.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(xh,{scope:ql}),C.swRegistration.update().catch(()=>{})}catch(T){throw Vr.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function va(){return(va=(0,L.Z)(function*(C,T){if(!T&&!C.swRegistration&&(yield function bt(C){return Tc.apply(this,arguments)}(C)),T||!C.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Vr.create("invalid-sw-registration");C.swRegistration=T}})).apply(this,arguments)}function Ho(){return(Ho=(0,L.Z)(function*(C,T){T?C.vapidKey=T:C.vapidKey||(C.vapidKey=Cs)})).apply(this,arguments)}function go(){return go=(0,L.Z)(function*(C,T){if(!navigator)throw Vr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vr.create("permission-blocked");return yield function $s(C,T){return Ho.apply(this,arguments)}(C,T?.vapidKey),yield function Lp(C,T){return va.apply(this,arguments)}(C,T?.serviceWorkerRegistration),function Pp(C){return wu.apply(this,arguments)}(C)}),go.apply(this,arguments)}function Uh(){return(Uh=(0,L.Z)(function*(C,T,R){const O=function Up(C){switch(C){case $o.NOTIFICATION_CLICKED:return"notification_open";case $o.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(O,{message_id:R[Zl],message_name:R[Cn],message_time:R[Kl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Iu(){return Iu=(0,L.Z)(function*(C,T){const R=T.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===$o.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Eu(R)):C.onMessageHandler.next(Eu(R)));const O=R.data;(function id(C){return"object"==typeof C&&!!C&&Zl in C})(O)&&"1"===O["google.c.a.e"]&&(yield function Fp(C,T,R){return Uh.apply(this,arguments)}(C,R.messageType,O))}),Iu.apply(this,arguments)}const De="@firebase/messaging",wa=C=>{const T=new Fh(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Vp(C,T){return Iu.apply(this,arguments)}(T,R)),T},Vh=C=>{const T=C.getProvider("messaging").getImmediate();return{getToken:O=>function bc(C,T){return go.apply(this,arguments)}(T,O)}};function Sc(){return zo.apply(this,arguments)}function zo(){return(zo=(0,L.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Br(){(0,se._registerComponent)(new oe.wA("messaging",wa,"PUBLIC")),(0,se._registerComponent)(new oe.wA("messaging-internal",Vh,"PRIVATE")),(0,se.registerVersion)(De,"0.12.4"),(0,se.registerVersion)(De,"0.12.4","esm2017")}();const xn="analytics",Wo="firebase_id",Ds="origin",Bp=6e4,xc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ad="https://www.googletagmanager.com/gtag/js",or=new me.Yd("@firebase/analytics"),Rr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ea(C){if(!C.startsWith(ad)){const T=Rr.create("invalid-gtag-resource",{gtagURL:C});return or.warn(T.message),""}return C}function Ia(C){return Promise.all(C.map(T=>T.catch(R=>R)))}function Du(){return(Du=(0,L.Z)(function*(C,T,R,O,H,K){const ae=O[H];try{if(ae)yield T[ae];else{const Be=(yield Ia(R)).find(ct=>ct.measurementId===H);Be&&(yield T[Be.appId])}}catch(Ze){or.error(Ze)}C("config",H,K)})).apply(this,arguments)}function bu(){return(bu=(0,L.Z)(function*(C,T,R,O,H){try{let K=[];if(H&&H.send_to){let ae=H.send_to;Array.isArray(ae)||(ae=[ae]);const Ze=yield Ia(R);for(const Be of ae){const ct=Ze.find(At=>At.measurementId===Be),St=ct&&T[ct.appId];if(!St){K=[];break}K.push(St)}}0===K.length&&(K=Object.values(T)),yield Promise.all(K),C("event",O,H||{})}catch(K){or.error(K)}})).apply(this,arguments)}const Nr=30,$p=new class dn{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function cy(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function $h(){return($h=(0,L.Z)(function*(C){var T;const{appId:R,apiKey:O}=C,H={method:"GET",headers:cy(O)},K=xc.replace("{app-id}",R),ae=yield fetch(K,H);if(200!==ae.status&&304!==ae.status){let Ze="";try{const Be=yield ae.json();null!==(T=Be.error)&&void 0!==T&&T.message&&(Ze=Be.error.message)}catch{}throw Rr.create("config-fetch-failed",{httpStatus:ae.status,responseMessage:Ze})}return ae.json()})).apply(this,arguments)}function Ca(){return(Ca=(0,L.Z)(function*(C,T=$p,R){const{appId:O,apiKey:H,measurementId:K}=C.options;if(!O)throw Rr.create("no-app-id");if(!H){if(K)return{measurementId:K,appId:O};throw Rr.create("no-api-key")}const ae=T.getThrottleMetadata(O)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new ld;return setTimeout((0,L.Z)(function*(){Ze.abort()}),void 0!==R?R:Bp),Mc({appId:O,apiKey:H,measurementId:K},ae,Ze,T)})).apply(this,arguments)}function Mc(C,T,R){return zs.apply(this,arguments)}function zs(){return zs=(0,L.Z)(function*(C,{throttleEndTimeMillis:T,backoffCount:R},O,H=$p){var K;const{appId:ae,measurementId:Ze}=C;try{yield function ly(C,T){return new Promise((R,O)=>{const H=Math.max(T-Date.now(),0),K=setTimeout(R,H);C.addEventListener(()=>{clearTimeout(K),O(Rr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(O,T)}catch(Be){if(Ze)return or.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${Be?.message}]`),{appId:ae,measurementId:Ze};throw Be}try{const Be=yield function Hp(C){return $h.apply(this,arguments)}(C);return H.deleteThrottleMetadata(ae),Be}catch(Be){const ct=Be;if(!function Su(C){if(!(C instanceof ie.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ct)){if(H.deleteThrottleMetadata(ae),Ze)return or.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${ct?.message}]`),{appId:ae,measurementId:Ze};throw Be}const St=503===Number(null===(K=ct?.customData)||void 0===K?void 0:K.httpStatus)?(0,ie.$s)(R,H.intervalMillis,Nr):(0,ie.$s)(R,H.intervalMillis),At={throttleEndTimeMillis:Date.now()+St,backoffCount:R+1};return H.setThrottleMetadata(ae,At),or.debug(`Calling attemptFetch again in ${St} millis`),Mc(C,At,O,H)}}),zs.apply(this,arguments)}class ld{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Da,Rn;function dd(){return(dd=(0,L.Z)(function*(C,T,R,O,H){if(H&&H.global)C("event",R,O);else{const K=yield T;C("event",R,Object.assign(Object.assign({},O),{send_to:K}))}})).apply(this,arguments)}function xi(){return(xi=(0,L.Z)(function*(){if(!(0,ie.hl)())return or.warn(Rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(C){return or.warn(Rr.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function Gs(){return Gs=(0,L.Z)(function*(C,T,R,O,H,K,ae){var Ze;const Be=function zp(C){return Ca.apply(this,arguments)}(C);Be.then(Yn=>{R[Yn.measurementId]=Yn.appId,C.options.measurementId&&Yn.measurementId!==C.options.measurementId&&or.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Yn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Yn=>or.error(Yn)),T.push(Be);const ct=function Ai(){return xi.apply(this,arguments)}().then(Yn=>{if(Yn)return O.getId()}),[St,At]=yield Promise.all([Be,ct]);(function jp(C){const T=window.document.getElementsByTagName("script");for(const R of Object.values(T))if(R.src&&R.src.includes(ad)&&R.src.includes(C))return R;return null})(K)||function Nc(C,T){const R=function Cu(C,T){let R;return window.trustedTypes&&(R=window.trustedTypes.createPolicy(C,T)),R}("firebase-js-sdk-policy",{createScriptURL:Ea}),O=document.createElement("script"),H=`${ad}?l=${C}&id=${T}`;O.src=R?R?.createScriptURL(H):H,O.async=!0,document.head.appendChild(O)}(K,St.measurementId),Rn&&(H("consent","default",Rn),function yo(C){Rn=C}(void 0)),H("js",new Date);const lr=null!==(Ze=ae?.config)&&void 0!==Ze?Ze:{};return lr[Ds]="firebase",lr.update=!0,null!=At&&(lr[Wo]=At),H("config",St.measurementId,lr),Da&&(H("set",Da),function mt(C){Da=C}(void 0)),St.measurementId}),Gs.apply(this,arguments)}class Ts{constructor(T){this.app=T}_delete(){return delete os[this.app.options.appId],Promise.resolve()}}let os={},gd=[];const md={};let yd,Ri,Ws="dataLayer",Nu=!1;function Mu(C,T,R){!function ar(){const C=[];if((0,ie.ru)()&&C.push("This is a browser extension environment."),(0,ie.zI)()||C.push("Cookies are not available."),C.length>0){const T=C.map((O,H)=>`(${H+1}) ${O}`).join(" "),R=Rr.create("invalid-analytics-context",{errorInfo:T});or.warn(R.message)}}();const O=C.options.appId;if(!O)throw Rr.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Rr.create("no-api-key");or.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=os[O])throw Rr.create("already-exists",{id:O});if(!Nu){!function ud(C){let T=[];Array.isArray(window[C])?T=window[C]:window[C]=T}(Ws);const{wrappedGtag:K,gtagCore:ae}=function jh(C,T,R,O,H){let K=function(...ae){window[O].push(arguments)};return window[H]&&"function"==typeof window[H]&&(K=window[H]),window[H]=function Hi(C,T,R,O){function K(){return K=(0,L.Z)(function*(ae,...Ze){try{if("event"===ae){const[Be,ct]=Ze;yield function Tu(C,T,R,O,H){return bu.apply(this,arguments)}(C,T,R,Be,ct)}else if("config"===ae){const[Be,ct]=Ze;yield function cd(C,T,R,O,H,K){return Du.apply(this,arguments)}(C,T,R,O,Be,ct)}else if("consent"===ae){const[Be]=Ze;C("consent","update",Be)}else if("get"===ae){const[Be,ct,St]=Ze;C("get",Be,ct,St)}else if("set"===ae){const[Be]=Ze;C("set",Be)}else C(ae,...Ze)}catch(Be){or.error(Be)}}),K.apply(this,arguments)}return function H(ae){return K.apply(this,arguments)}}(K,C,T,R),{gtagCore:K,wrappedGtag:window[H]}}(os,gd,md,Ws,"gtag");Ri=K,yd=ae,Nu=!0}return os[O]=function ba(C,T,R,O,H,K,ae){return Gs.apply(this,arguments)}(C,gd,md,T,yd,Ws,R),new Ts(C)}function Pu(){return kc.apply(this,arguments)}function kc(){return(kc=(0,L.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const ku="@firebase/analytics";!function vd(){(0,se._registerComponent)(new oe.wA(xn,(T,{options:R})=>Mu(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,se._registerComponent)(new oe.wA("analytics-internal",function C(T){try{const R=T.getProvider(xn).getImmediate();return{logEvent:(O,H,K)=>function Gi(C,T,R,O){C=(0,ie.m9)(C),function Pc(C,T,R,O,H){return dd.apply(this,arguments)}(Ri,os[C.app.options.appId],T,R,O).catch(H=>or.error(H))}(R,O,H,K)}}catch(R){throw Rr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,se.registerVersion)(ku,"0.10.0"),(0,se.registerVersion)(ku,"0.10.0","esm2017")}();var Lu=F(4408),as=F(7565);const jr=new class us extends as.v{}(class Kn extends Lu.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,O=0){return null!=O&&O>0||null==O&&this.delay>0?super.requestAsyncId(T,R,O):(T.flush(this),0)}});var wo=F(4986),Zo=F(8505),zh=F(9468),cs=F(5363);const Aa=new m.GfV("7.6.1"),Mr="__angularfire_symbol__analyticsIsSupportedValue",Ss="__angularfire_symbol__analyticsIsSupported",Gh="__angularfire_symbol__remoteConfigIsSupportedValue",Eo="__angularfire_symbol__remoteConfigIsSupported",Fu="__angularfire_symbol__messagingIsSupportedValue",Io="__angularfire_symbol__messagingIsSupported";function Uu(C,T,R){if(T){if(1===T.length)return T[0];const K=T.filter(ae=>ae.app===R);if(1===K.length)return K[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[Ss]||(globalThis[Ss]=Pu().then(C=>globalThis[Mr]=C).catch(()=>globalThis[Mr]=!1)),globalThis[Io]||(globalThis[Io]=Sc().then(C=>globalThis[Fu]=C).catch(()=>globalThis[Fu]=!1)),globalThis[Eo]||(globalThis[Eo]=oi().then(C=>globalThis[Gh]=C).catch(()=>globalThis[Gh]=!1));const xa=(C,T)=>{const R=T?[T]:(0,Q.C6)(),O=[];return R.forEach(H=>{H.container.getProvider(C).instances.forEach(ae=>{O.includes(ae)||O.push(ae)})}),O};function cr(){}class Ra{constructor(T,R=jr){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,O){const H=this.zone;return this.delegate.schedule(function(ae){H.runGuarded(()=>{T.apply(this,[ae])})},R,O)}}class ls{constructor(T){this.zone=T,this.task=null}call(T,R){const O=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",cr,{},cr,cr)),R.pipe((0,Zo.b)({next:O,complete:O,error:O})).subscribe(T).add(O)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Na=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Ra(Zone.current)),this.insideAngular=R.run(()=>new Ra(Zone.current,wo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(m.LFG(m.R0b))},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Wi(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function ci(C){return Wi(),function Vc(C){return function(R){return(R=R.lift(new ls(C.ngZone))).pipe((0,zh.R)(C.outsideAngular),(0,cs.Q)(C.insideAngular))}}(Wi())(C)}},2090:(_t,Ae,F)=>{F.d(Ae,{$s:()=>Ei,BH:()=>fe,DV:()=>Fs,Dv:()=>vs,G6:()=>Ce,GJ:()=>yi,L:()=>he,LL:()=>Ft,Pz:()=>we,Sg:()=>Ne,UG:()=>re,UI:()=>au,US:()=>oe,Wj:()=>$t,Wl:()=>Gt,Yr:()=>_e,ZB:()=>Z,ZR:()=>it,aH:()=>ke,b$:()=>br,cI:()=>pn,dS:()=>wi,eu:()=>We,g5:()=>L,gK:()=>sn,gQ:()=>Xe,h$:()=>Ie,hl:()=>Me,hu:()=>Q,jU:()=>Ke,lb:()=>Us,m9:()=>Ui,ne:()=>vi,p$:()=>z,pd:()=>Ct,r3:()=>Sn,ru:()=>Yt,tV:()=>G,uI:()=>$e,ug:()=>aa,vZ:()=>gt,w1:()=>io,w9:()=>mr,xO:()=>yr,xb:()=>so,z$:()=>Ee,zI:()=>Le,zd:()=>en});const m={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Q=function(j,V){if(!j)throw L(V)},L=function(j){return new Error("Firebase Database ("+m.SDK_VERSION+") INTERNAL ASSERT FAILED: "+j)},se=function(j){const V=[];let q=0;for(let ge=0;ge<j.length;ge++){let ee=j.charCodeAt(ge);ee<128?V[q++]=ee:ee<2048?(V[q++]=ee>>6|192,V[q++]=63&ee|128):55296==(64512&ee)&&ge+1<j.length&&56320==(64512&j.charCodeAt(ge+1))?(ee=65536+((1023&ee)<<10)+(1023&j.charCodeAt(++ge)),V[q++]=ee>>18|240,V[q++]=ee>>12&63|128,V[q++]=ee>>6&63|128,V[q++]=63&ee|128):(V[q++]=ee>>12|224,V[q++]=ee>>6&63|128,V[q++]=63&ee|128)}return V},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,ge=[];for(let ee=0;ee<j.length;ee+=3){const Je=j[ee],Ye=ee+1<j.length,Ht=Ye?j[ee+1]:0,tr=ee+2<j.length,On=tr?j[ee+2]:0;let nr=(15&Ht)<<2|On>>6,ts=63&On;tr||(ts=64,Ye||(nr=64)),ge.push(q[Je>>2],q[(3&Je)<<4|Ht>>4],q[nr],q[ts])}return ge.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(se(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let q=0,ge=0;for(;q<j.length;){const ee=j[q++];if(ee<128)V[ge++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const Je=j[q++];V[ge++]=String.fromCharCode((31&ee)<<6|63&Je)}else if(ee>239&&ee<365){const tr=((7&ee)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;V[ge++]=String.fromCharCode(55296+(tr>>10)),V[ge++]=String.fromCharCode(56320+(1023&tr))}else{const Je=j[q++],Ye=j[q++];V[ge++]=String.fromCharCode((15&ee)<<12|(63&Je)<<6|63&Ye)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const q=V?this.charToByteMapWebSafe_:this.charToByteMap_,ge=[];for(let ee=0;ee<j.length;){const Je=q[j.charAt(ee++)],Ht=ee<j.length?q[j.charAt(ee)]:0;++ee;const On=ee<j.length?q[j.charAt(ee)]:64;++ee;const Lt=ee<j.length?q[j.charAt(ee)]:64;if(++ee,null==Je||null==Ht||null==On||null==Lt)throw new me;ge.push(Je<<2|Ht>>4),64!==On&&(ge.push(Ht<<4&240|On>>2),64!==Lt&&ge.push(On<<6&192|Lt))}return ge},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}};class me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ie=function(j){const V=se(j);return oe.encodeByteArray(V,!0)},he=function(j){return Ie(j).replace(/\./g,"")},G=function(j){try{return oe.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function z(j){return Z(void 0,j)}function Z(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const q in V)!V.hasOwnProperty(q)||!je(q)||(j[q]=Z(j[q],V[q]));return j}function je(j){return"__proto__"!==j}const Ue=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=j&&G(j[1]);return V&&JSON.parse(V)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},ke=()=>{var j;return null===(j=Ue())||void 0===j?void 0:j.config},we=j=>{var V;return null===(V=Ue())||void 0===V?void 0:V[`_${j}`]};class fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,q)=>{this.resolve=V,this.reject=q})}wrapCallback(V){return(q,ge)=>{q?this.reject(q):this.resolve(ge),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(q):V(q,ge))}}}function Ne(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ge=V||"demo-project",ee=j.iat||0,Je=j.sub||j.user_id;if(!Je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ye=Object.assign({iss:`https://securetoken.google.com/${ge}`,aud:ge,iat:ee,exp:ee+3600,auth_time:ee,sub:Je,user_id:Je,firebase:{sign_in_provider:"custom",identities:{}}},j);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ye)),""].join(".")}function Ee(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())}function re(){var j;const V=null===(j=Ue())||void 0===j?void 0:j.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ke(){return"object"==typeof self&&self.self===self}function Yt(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function br(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function io(){const j=Ee();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function _e(){return!0===m.NODE_CLIENT||!0===m.NODE_ADMIN}function Ce(){return!re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Me(){try{return"object"==typeof indexedDB}catch{return!1}}function We(){return new Promise((j,V)=>{try{let q=!0;const ge="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(ge);ee.onsuccess=()=>{ee.result.close(),q||self.indexedDB.deleteDatabase(ge),j(!0)},ee.onupgradeneeded=()=>{q=!1},ee.onerror=()=>{var Je;V((null===(Je=ee.error)||void 0===Je?void 0:Je.message)||"")}}catch(q){V(q)}})}function Le(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class it extends Error{constructor(V,q,ge){super(q),this.code=V,this.customData=ge,this.name="FirebaseError",Object.setPrototypeOf(this,it.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ft.prototype.create)}}class Ft{constructor(V,q,ge){this.service=V,this.serviceName=q,this.errors=ge}create(V,...q){const ge=q[0]||{},ee=`${this.service}/${V}`,Je=this.errors[V],Ye=Je?function wt(j,V){return j.replace(Nt,(q,ge)=>{const ee=V[ge];return null!=ee?String(ee):`<${ge}?>`})}(Je,ge):"Error";return new it(ee,`${this.serviceName}: ${Ye} (${ee}).`,ge)}}const Nt=/\{\$([^}]+)}/g;function pn(j){return JSON.parse(j)}function Gt(j){return JSON.stringify(j)}const gn=function(j){let V={},q={},ge={},ee="";try{const Je=j.split(".");V=pn(G(Je[0])||""),q=pn(G(Je[1])||""),ee=Je[2],ge=q.d||{},delete q.d}catch{}return{header:V,claims:q,data:ge,signature:ee}},mr=function(j){const q=gn(j).claims;return!!q&&"object"==typeof q&&q.hasOwnProperty("iat")},yi=function(j){const V=gn(j).claims;return"object"==typeof V&&!0===V.admin};function Sn(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function Fs(j,V){if(Object.prototype.hasOwnProperty.call(j,V))return j[V]}function so(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function au(j,V,q){const ge={};for(const ee in j)Object.prototype.hasOwnProperty.call(j,ee)&&(ge[ee]=V.call(q,j[ee],ee,j));return ge}function gt(j,V){if(j===V)return!0;const q=Object.keys(j),ge=Object.keys(V);for(const ee of q){if(!ge.includes(ee))return!1;const Je=j[ee],Ye=V[ee];if(_i(Je)&&_i(Ye)){if(!gt(Je,Ye))return!1}else if(Je!==Ye)return!1}for(const ee of ge)if(!q.includes(ee))return!1;return!0}function _i(j){return null!==j&&"object"==typeof j}function yr(j){const V=[];for(const[q,ge]of Object.entries(j))Array.isArray(ge)?ge.forEach(ee=>{V.push(encodeURIComponent(q)+"="+encodeURIComponent(ee))}):V.push(encodeURIComponent(q)+"="+encodeURIComponent(ge));return V.length?"&"+V.join("&"):""}function en(j){const V={};return j.replace(/^\?/,"").split("&").forEach(ge=>{if(ge){const[ee,Je]=ge.split("=");V[decodeURIComponent(ee)]=decodeURIComponent(Je)}}),V}function Ct(j){const V=j.indexOf("?");if(!V)return"";const q=j.indexOf("#",V);return j.substring(V,q>0?q:void 0)}class Xe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let V=1;V<this.blockSize;++V)this.pad_[V]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(V,q){q||(q=0);const ge=this.W_;if("string"==typeof V)for(let Lt=0;Lt<16;Lt++)ge[Lt]=V.charCodeAt(q)<<24|V.charCodeAt(q+1)<<16|V.charCodeAt(q+2)<<8|V.charCodeAt(q+3),q+=4;else for(let Lt=0;Lt<16;Lt++)ge[Lt]=V[q]<<24|V[q+1]<<16|V[q+2]<<8|V[q+3],q+=4;for(let Lt=16;Lt<80;Lt++){const nr=ge[Lt-3]^ge[Lt-8]^ge[Lt-14]^ge[Lt-16];ge[Lt]=4294967295&(nr<<1|nr>>>31)}let On,Gn,ee=this.chain_[0],Je=this.chain_[1],Ye=this.chain_[2],Ht=this.chain_[3],tr=this.chain_[4];for(let Lt=0;Lt<80;Lt++){Lt<40?Lt<20?(On=Ht^Je&(Ye^Ht),Gn=1518500249):(On=Je^Ye^Ht,Gn=1859775393):Lt<60?(On=Je&Ye|Ht&(Je|Ye),Gn=2400959708):(On=Je^Ye^Ht,Gn=3395469782);const nr=(ee<<5|ee>>>27)+On+tr+Gn+ge[Lt]&4294967295;tr=Ht,Ht=Ye,Ye=4294967295&(Je<<30|Je>>>2),Je=ee,ee=nr}this.chain_[0]=this.chain_[0]+ee&4294967295,this.chain_[1]=this.chain_[1]+Je&4294967295,this.chain_[2]=this.chain_[2]+Ye&4294967295,this.chain_[3]=this.chain_[3]+Ht&4294967295,this.chain_[4]=this.chain_[4]+tr&4294967295}update(V,q){if(null==V)return;void 0===q&&(q=V.length);const ge=q-this.blockSize;let ee=0;const Je=this.buf_;let Ye=this.inbuf_;for(;ee<q;){if(0===Ye)for(;ee<=ge;)this.compress_(V,ee),ee+=this.blockSize;if("string"==typeof V){for(;ee<q;)if(Je[Ye]=V.charCodeAt(ee),++Ye,++ee,Ye===this.blockSize){this.compress_(Je),Ye=0;break}}else for(;ee<q;)if(Je[Ye]=V[ee],++Ye,++ee,Ye===this.blockSize){this.compress_(Je),Ye=0;break}}this.inbuf_=Ye,this.total_+=q}digest(){const V=[];let q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ee=this.blockSize-1;ee>=56;ee--)this.buf_[ee]=255&q,q/=256;this.compress_(this.buf_);let ge=0;for(let ee=0;ee<5;ee++)for(let Je=24;Je>=0;Je-=8)V[ge]=this.chain_[ee]>>Je&255,++ge;return V}}function vi(j,V){const q=new Pn(j,V);return q.subscribe.bind(q)}class Pn{constructor(V,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{V(this)}).catch(ge=>{this.error(ge)})}next(V){this.forEachObserver(q=>{q.next(V)})}error(V){this.forEachObserver(q=>{q.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,q,ge){let ee;if(void 0===V&&void 0===q&&void 0===ge)throw new Error("Missing Observer.");ee=function Kr(j,V){if("object"!=typeof j||null===j)return!1;for(const q of V)if(q in j&&"function"==typeof j[q])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:q,complete:ge},void 0===ee.next&&(ee.next=jn),void 0===ee.error&&(ee.error=jn),void 0===ee.complete&&(ee.complete=jn);const Je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch{}}),this.observers.push(ee),Je}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,V)}sendOne(V,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{q(this.observers[V])}catch(ge){typeof console<"u"&&console.error&&console.error(ge)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jn(){}const vs=function(j,V,q,ge){let ee;if(ge<V?ee="at least "+V:ge>q&&(ee=0===q?"none":"no more than "+q),ee)throw new Error(j+" failed: Was called with "+ge+(1===ge?" argument.":" arguments.")+" Expects "+ee+".")};function sn(j,V){return`${j} failed: ${V} argument `}function $t(j,V,q,ge){if((!ge||q)&&"function"!=typeof q)throw new Error(sn(j,V)+"must be a valid function.")}function Us(j,V,q,ge){if((!ge||q)&&("object"!=typeof q||null===q))throw new Error(sn(j,V)+"must be a valid context object.")}const wi=function(j){const V=[];let q=0;for(let ge=0;ge<j.length;ge++){let ee=j.charCodeAt(ge);if(ee>=55296&&ee<=56319){const Je=ee-55296;ge++,Q(ge<j.length,"Surrogate pair missing trail surrogate."),ee=65536+(Je<<10)+(j.charCodeAt(ge)-56320)}ee<128?V[q++]=ee:ee<2048?(V[q++]=ee>>6|192,V[q++]=63&ee|128):ee<65536?(V[q++]=ee>>12|224,V[q++]=ee>>6&63|128,V[q++]=63&ee|128):(V[q++]=ee>>18|240,V[q++]=ee>>12&63|128,V[q++]=ee>>6&63|128,V[q++]=63&ee|128)}return V},aa=function(j){let V=0;for(let q=0;q<j.length;q++){const ge=j.charCodeAt(q);ge<128?V++:ge<2048?V+=2:ge>=55296&&ge<=56319?(V+=4,q++):V+=3}return V},Vs=1e3,ln=2,Hn=144e5,Ot=.5;function Ei(j,V=Vs,q=ln){const ge=V*Math.pow(q,j),ee=Math.round(Ot*ge*(Math.random()-.5)*2);return Math.min(Hn,ge+ee)}function Ui(j){return j&&j._delegate?j._delegate:j}},2843:(_t,Ae,F)=>{var m=F(2223);let Q=null;function L(){return Q}class ie{}const oe=new m.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(he)},providedIn:"platform"}),n})();const Ie=new m.OlP("Location Initialized");let he=(()=>{class n extends me{constructor(){super(),this._doc=(0,m.f3M)(oe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function G(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function z(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Z(n){return n&&"?"!==n[0]?"?"+n:n}let je=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(nt)},providedIn:"root"}),n})();const Te=new m.OlP("appBaseHref");let nt=(()=>{class n extends je{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return G(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Z(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+Z(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+Z(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(me),m.LFG(Te,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vt=(()=>{class n extends je{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=G(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+Z(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+Z(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(me),m.LFG(Te,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ce=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ke(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(z(ze(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Z(r))}normalize(t){return n.stripTrailingSlash(function Oe(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Z(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Z(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Z,n.joinWithSlash=G,n.stripTrailingSlash=z,n.\u0275fac=function(t){return new(t||n)(m.LFG(je))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ue(){return new ce((0,m.LFG)(je))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}class fc{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Oo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new fc(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,c),Ih(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ih(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ih(n,e){n.context.$implicit=e.item}let Bs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new iy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bp("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bp("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class iy{constructor(){this.$implicit=null,this.ngIf=null}}function bp(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let is=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function cu(n){return"server"===n}let bi=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new kn((0,m.LFG)(oe),window)}),n})();class kn{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function oi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=fo(this.window.history)||fo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Eu extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class rd extends Eu{static makeCurrent(){!function se(n){Q||(Q=n)}(new rd)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function kp(){return $i=$i||document.querySelector("base"),$i?$i.getAttribute("href"):null}();return null==t?null:function sd(n){id=id||document.createElement("a"),id.setAttribute("href",n);const e=id.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$i=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ua(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let id,$i=null,od=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Fh=new m.OlP("EventManagerPlugins");let bt=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new m.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Fh),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Tc{constructor(e){this._doc=e}}const Lp="ng-app-id";let va=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=cu(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Lp}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(Lp),a;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Lp,this.appId),c}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,c=a.get(r)?.elements;c?c.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(oe),m.LFG(m.AFp),m.LFG(m.Ojb,8),m.LFG(m.Lbi))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const $s={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ho=/%COMP%/g,Up=new m.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function De(n,e){return e.map(t=>t.replace(Ho,n))}let Zt=(()=>{class n{constructor(t,r,i,a,c,f,y,E=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.doc=c,this.platformId=f,this.ngZone=y,this.nonce=E,this.rendererByCompId=new Map,this.platformIsServer=cu(f),this.defaultRenderer=new wa(t,c,y,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===m.ifc.ShadowDom&&(r={...r,encapsulation:m.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Hs?i.applyToHost(t):i instanceof ss&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const c=this.doc,f=this.ngZone,y=this.eventManager,E=this.sharedStylesHost,b=this.removeStylesOnCompDestory,x=this.platformIsServer;switch(r.encapsulation){case m.ifc.Emulated:a=new Hs(y,E,r,this.appId,b,c,f,x);break;case m.ifc.ShadowDom:return new zo(y,E,t,r,c,f,this.nonce,x);default:a=new ss(y,E,r,b,c,f,x)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(bt),m.LFG(va),m.LFG(m.AFp),m.LFG(Up),m.LFG(oe),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(m.Ojb))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class wa{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS($s[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Sc(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Sc(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new m.vHH(5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=$s[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=$s[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=L().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Sc(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class zo extends wa{constructor(e,t,r,i,a,c,f,y){super(e,a,c,y),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const E=De(i.id,i.styles);for(const b of E){const x=document.createElement("style");f&&x.setAttribute("nonce",f),x.textContent=b,this.shadowRoot.appendChild(x)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ss extends wa{constructor(e,t,r,i,a,c,f,y){super(e,a,c,f),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=y?De(y,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Hs extends ss{constructor(e,t,r,i,a,c,f,y){const E=i+"-"+r.id;super(e,t,r,a,c,f,y,E),this.contentAttr=function Vp(n){return"_ngcontent-%COMP%".replace(Ho,n)}(E),this.hostAttr=function Iu(n){return"_nghost-%COMP%".replace(Ho,n)}(E)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Bh=(()=>{class n extends Tc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(oe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const mo=["alt","control","meta","shift"],$v={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ac={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vr=(()=>{class n extends Tc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),mo.forEach(E=>{const b=r.indexOf(E);b>-1&&(r.splice(b,1),c+=E+".")}),c+=a,0!=r.length||0===a.length)return null;const y={};return y.domEventName=i,y.fullKey=c,y}static matchEventFullKeyCode(t,r){let i=$v[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),mo.forEach(c=>{c!==i&&(0,Ac[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(oe))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Rc=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Bp(){rd.makeCurrent()},multi:!0},{provide:oe,useFactory:function ad(){return(0,m.RDi)(document),document},deps:[]}]),Rr=new m.OlP(""),Ea=[{provide:m.rWj,useClass:class Lh{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new m.vHH(5103,!1);return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const f=function(y){c=c||y,a--,0==a&&r(c)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],Ia=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function xc(){return new m.qLn},deps:[]},{provide:Fh,useClass:Bh,multi:!0,deps:[oe,m.R0b,m.Lbi]},{provide:Fh,useClass:vr,multi:!0,deps:[oe]},Zt,va,bt,{provide:m.FYo,useExisting:Zt},{provide:class _c{},useClass:od,deps:[]},[]];let Cu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Rr,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...Ia,...Ea],imports:[is,m.hGG]}),n})(),Tu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(oe))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Du(){return new Tu((0,m.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const pd_fireBaseConfig={apiKey:"AIzaSyDoo6rLmjzE19UhyGBNTHnn7FML1n6cCag",authDomain:"ang-blog-69661.firebaseapp.com",projectId:"ang-blog-69661",storageBucket:"ang-blog-69661.appspot.com",messagingSenderId:"519510213856",appId:"1:519510213856:web:17e8fd8928b9dc628e3c85"};var zi=F(9751),xu=F(576),Rn=F(8996),yo=F(7669);function mt(...n){const e=(0,yo.yG)(n);return(0,Rn.D)(n,e)}var Ai=F(7579);class xi extends Ai.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:ba}=Array,{getPrototypeOf:Gs,prototype:Ts,keys:os}=Object;var Ws=F(4671),lt=F(4004);const{isArray:yd}=Array;var ar=F(5403),Mu=F(9672);function Hh(...n){const e=(0,yo.yG)(n),t=(0,yo.jO)(n),{args:r,keys:i}=function gd(n){if(1===n.length){const e=n[0];if(ba(e))return{args:e,keys:null};if(function md(n){return n&&"object"==typeof n&&Gs(n)===Ts}(e)){const t=os(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Rn.D)([],e);const a=new zi.y(function Oc(n,e,t=Ws.y){return r=>{Pu(e,()=>{const{length:i}=n,a=new Array(i);let c=i,f=i;for(let y=0;y<i;y++)Pu(e,()=>{const E=(0,Rn.D)(n[y],e);let b=!1;E.subscribe((0,ar.x)(r,x=>{a[y]=x,b||(b=!0,f--),f||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function _d(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):Ws.y));return t?a.pipe(function Nu(n){return(0,lt.U)(e=>function Ri(n,e){return yd(e)?n(...e):n(e)}(n,e))}(t)):a}function Pu(n,e,t){n?(0,Mu.f)(t,n,e):e()}const _o=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Lc=F(8189);function bs(...n){return function Sa(){return(0,Lc.J)(1)}()((0,Rn.D)(n,(0,yo.yG)(n)))}var Ou=F(8421);function Fc(n){return new zi.y(e=>{(0,Ou.Xf)(n()).subscribe(e)})}var Wp=F(9635);function Gi(n,e){const t=(0,xu.m)(n)?n:()=>n,r=i=>i.error(t());return new zi.y(e?i=>e.schedule(r,0,i):r)}var vo=F(515),ku=F(727),ur=F(4482);function vd(){return(0,ur.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ar.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Lu extends zi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ur.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ku.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ar.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ku.w0.EMPTY)}return e}refCount(){return vd()(this)}}function Kn(n,e){return(0,ur.e)((t,r)=>{let i=null,a=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,ar.x)(r,y=>{i?.unsubscribe();let E=0;const b=a++;(0,Ou.Xf)(n(y,b)).subscribe(i=(0,ar.x)(r,x=>r.next(e?e(y,x,b,E++):x),()=>{i=null,f()}))},()=>{c=!0,f()}))})}function as(n){return n<=0?()=>vo.E:(0,ur.e)((e,t)=>{let r=0;e.subscribe((0,ar.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function us(...n){const e=(0,yo.yG)(n);return(0,ur.e)((t,r)=>{(e?bs(n,t,e):bs(n,t)).subscribe(r)})}function jr(n,e){return(0,ur.e)((t,r)=>{let i=0;t.subscribe((0,ar.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Jr=F(5577);function wo(n){return(0,ur.e)((e,t)=>{let r=!1;e.subscribe((0,ar.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Zo(n=zh){return(0,ur.e)((e,t)=>{let r=!1;e.subscribe((0,ar.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function zh(){return new _o}function cs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?jr((i,a)=>n(i,a,r)):Ws.y,as(1),t?wo(e):Zo(()=>new _o))}function Aa(n,e){return(0,xu.m)(e)?(0,Jr.z)(n,e,1):(0,Jr.z)(n,1)}var Mr=F(8505);function Ss(n){return(0,ur.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,ar.x)(t,void 0,void 0,c=>{a=(0,Ou.Xf)(n(c,Ss(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Eo(n,e){return(0,ur.e)(function Gh(n,e,t,r,i){return(a,c)=>{let f=t,y=e,E=0;a.subscribe((0,ar.x)(c,b=>{const x=E++;y=f?n(y,b,x):(f=!0,b),r&&c.next(y)},i&&(()=>{f&&c.next(y),c.complete()})))}}(n,e,arguments.length>=2,!0))}function Fu(n){return n<=0?()=>vo.E:(0,ur.e)((e,t)=>{let r=[];e.subscribe((0,ar.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function qh(n){return(0,ur.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const dt="primary",Uc=Symbol("RouteTitle");class Uu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xa(n){return new Uu(n)}function cr(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],f=n[a];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ls(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Na(n[i],e[i]))return!1;return!0}function Na(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Wi(n){return n.length>0?n[n.length-1]:null}function ds(n){return function Ru(n){return!!n&&(n instanceof zi.y||(0,xu.m)(n.lift)&&(0,xu.m)(n.subscribe))}(n)?n:(0,m.QGY)(n)?(0,Rn.D)(Promise.resolve(n)):mt(n)}const Ma={exact:function Vc(n,e,t){if(!ae(n.segments,e.segments)||!T(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Vc(n.children[r],e.children[r],t))return!1;return!0},subset:fy},qp={exact:function ci(n,e){return ls(n,e)},subset:function Pa(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Na(n[t],e[t]))},ignored:()=>!0};function hy(n,e,t){return Ma[t.paths](n.root,e.root,t.matrixParams)&&qp[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function fy(n,e,t){return C(n,e,e.segments,t)}function C(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ae(i,t)||e.hasChildren()||!T(i,t,r))}if(n.segments.length===t.length){if(!ae(n.segments,t)||!T(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!fy(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ae(n.segments,i)&&T(n.segments,i,r)&&n.children[dt])&&C(n.children[dt],e,a,r)}}function T(n,e,t){return e.every((r,i)=>qp[t](n[i].parameters,r.parameters))}class R{constructor(e=new O([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xa(this.queryParams)),this._queryParamMap}toString(){return St.serialize(this)}}class O{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return At(this)}}class H{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=xa(this.parameters)),this._parameterMap}toString(){return wd(this)}}function ae(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Be=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new ct},providedIn:"root"}),n})();class ct{parse(e){const t=new Yh(e);return new R(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${lr(e.root,!0)}`,r=function Ed(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${As(t)}=${As(i)}`).join("&"):`${As(t)}=${As(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Vu(n){return encodeURI(n)}(e.fragment)}`:""}`}}const St=new ct;function At(n){return n.segments.map(e=>wd(e)).join("/")}function lr(n,e){if(!n.hasChildren())return At(n);if(e){const t=n.children[dt]?lr(n.children[dt],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==dt&&r.push(`${i}:${lr(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ze(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===dt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==dt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===dt?[lr(n.children[dt],!1)]:[`${i}:${lr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[dt]?`${At(n)}/${t[0]}`:`${At(n)}/(${t.join("//")})`}}function Yn(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function As(n){return Yn(n).replace(/%3B/gi,";")}function qi(n){return Yn(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xr(n){return decodeURIComponent(n)}function xs(n){return Xr(n.replace(/\+/g,"%20"))}function wd(n){return`${qi(n.path)}${function Oa(n){return Object.keys(n).map(e=>`;${qi(e)}=${qi(n[e])}`).join("")}(n.parameters)}`}const eC=/^[^\/()?;#]+/;function Zh(n){const e=n.match(eC);return e?e[0]:""}const Zp=/^[^\/()?;=#]+/,Hv=/^[^=?&#]+/,zv=/^[^&#]+/;class Yh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new O([],{}):new O([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[dt]=new O(e,t)),r}parseSegment(){const e=Zh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new H(Xr(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Kh(n){const e=n.match(Zp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Zh(this.remaining);i&&(r=i,this.capture(r))}e[Xr(t)]=Xr(r)}parseQueryParam(e){const t=function py(n){const e=n.match(Hv);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Gv(n){const e=n.match(zv);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=xs(t),a=xs(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Zh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=dt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[dt]:new O([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function Kp(n){return n.segments.length>0?new O([],{[dt]:n}):n}function gy(n){const e={};for(const r of Object.keys(n.children)){const a=gy(n.children[r]);if(r===dt&&0===a.segments.length&&a.hasChildren())for(const[c,f]of Object.entries(a.children))e[c]=f;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Yp(n){if(1===n.numberOfChildren&&n.children[dt]){const e=n.children[dt];return new O(n.segments.concat(e.segments),e.children)}return n}(new O(n.segments,e))}function Bc(n){return n instanceof R}function Bu(n){let e;const i=Kp(function t(a){const c={};for(const y of a.children){const E=t(y);c[y.outlet]=E}const f=new O(a.url,c);return a===n&&(e=f),f}(n.root));return e??i}function my(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return yy(i,i,i,t,r);const a=function tC(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Jh(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Object.entries(a.outlets).forEach(([y,E])=>{f[y]="string"==typeof E?E.split("/"):E}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new Jh(t,e,r)}(e);if(a.toRoot())return yy(i,i,new O([],{}),t,r);const c=function nC(n,e,t){if(n.isAbsolute)return new Id(e,!0,0);if(!t)return new Id(e,!1,NaN);if(null===t.parent)return new Id(t,!0,0);const r=Qh(n.commands[0])?0:1;return function rC(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new m.vHH(4005,!1);i=r.segments.length}return new Id(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),f=c.processChildren?ka(c.segmentGroup,c.index,a.commands):vy(c.segmentGroup,c.index,a.commands);return yy(i,c.segmentGroup,f,t,r)}function Qh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ko(n){return"object"==typeof n&&null!=n&&n.outlets}function yy(n,e,t,r,i){let c,a={};r&&Object.entries(r).forEach(([y,E])=>{a[y]=Array.isArray(E)?E.map(b=>`${b}`):`${E}`}),c=n===e?t:Qp(n,e,t);const f=Kp(gy(c));return new R(f,a,i)}function Qp(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:Qp(a,e,t)}),new O(n.segments,r)}class Jh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qh(r[0]))throw new m.vHH(4003,!1);const i=r.find(Ko);if(i&&i!==Wi(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Id{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function vy(n,e,t){if(n||(n=new O([],{})),0===n.segments.length&&n.hasChildren())return ka(n,e,t);const r=function Jp(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],f=t[r];if(Ko(f))break;const y=`${f}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&E&&"object"==typeof E&&void 0===E.outlets){if(!Yo(y,E,c))return a;r+=2}else{if(!Yo(y,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new O(n.segments.slice(0,r.pathIndex),{});return a.children[dt]=new O(n.segments.slice(r.pathIndex),n.children),ka(a,0,i)}return r.match&&0===i.length?new O(n.segments,{}):r.match&&!n.hasChildren()?Xh(n,e,t):r.match?ka(n,0,i):Xh(n,e,t)}function ka(n,e,t){if(0===t.length)return new O(n.segments,{});{const r=function _y(n){return Ko(n[0])?n[0].outlets:{[dt]:n}}(t),i={};if(!r[dt]&&n.children[dt]&&1===n.numberOfChildren&&0===n.children[dt].segments.length){const a=ka(n.children[dt],e,t);return new O(n.segments,a.children)}return Object.entries(r).forEach(([a,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(i[a]=vy(n.children[a],e,c))}),Object.entries(n.children).forEach(([a,c])=>{void 0===r[a]&&(i[a]=c)}),new O(n.segments,i)}}function Xh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Ko(a)){const y=wy(a.outlets);return new O(r,y)}if(0===i&&Qh(t[0])){r.push(new H(n.segments[e].path,ef(t[0]))),i++;continue}const c=Ko(a)?a.outlets[dt]:`${a}`,f=i<t.length-1?t[i+1]:null;c&&f&&Qh(f)?(r.push(new H(c,ef(f))),i+=2):(r.push(new H(c,{})),i++)}return new O(r,{})}function wy(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Xh(new O([],{}),0,r))}),e}function ef(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Yo(n,e,t){return n==t.path&&ls(e,t.parameters)}const jc="imperative";class hs{constructor(e,t){this.id=e,this.url=t}}class La extends hs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $r extends hs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tf extends hs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cd extends hs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class $c extends hs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ey extends hs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xp extends hs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qv extends hs{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Iy extends hs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zv extends hs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cy{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Kv{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Yv{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hr{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eg{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tg{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nf{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Dd{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Hc,this.attachRef=null}}let Hc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Dd,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class rf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Td(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Td(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=zc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return zc(e,this._root).map(t=>t.value)}}function Td(n,e){if(n===e.value)return e;for(const t of e.children){const r=Td(n,t);if(r)return r}return null}function zc(n,e){if(n===e.value)return[e];for(const t of e.children){const r=zc(n,t);if(r.length)return r.unshift(e),r}return[]}class Co{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ju(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sf extends rf{constructor(e,t){super(e),this.snapshot=t,ig(this,e)}toString(){return this.snapshot.toString()}}function ng(n,e){const t=function fs(n,e){const c=new Gc([],{},{},"",{},dt,e,null,{});return new Fa("",new Co(c,[]))}(0,e),r=new xi([new H("",{})]),i=new xi({}),a=new xi({}),c=new xi({}),f=new xi(""),y=new Rs(r,i,c,f,a,dt,e,t.root);return y.snapshot=t.root,new sf(new Co(y,[]),t)}class Rs{constructor(e,t,r,i,a,c,f,y){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=c,this.component=f,this._futureSnapshot=y,this.title=this.dataSubject?.pipe((0,lt.U)(E=>E[Uc]))??mt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,lt.U)(e=>xa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,lt.U)(e=>xa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bd(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function rg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Gc{get title(){return this.data?.[Uc]}constructor(e,t,r,i,a,c,f,y,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.routeConfig=y,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Fa extends rf{constructor(e,t){super(t),this.url=e,ig(this,t)}toString(){return sg(this._root)}}function ig(n,e){e.value._routerState=n,e.children.forEach(t=>ig(n,t))}function sg(n){const e=n.children.length>0?` { ${n.children.map(sg).join(", ")} } `:"";return`${n.value}${e}`}function Sd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ls(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ls(e.params,t.params)||n.paramsSubject.next(t.params),function Ra(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ls(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ls(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ns(n,e){const t=ls(n.params,e.params)&&function K(n,e){return ae(n,e)&&n.every((t,r)=>ls(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ns(n.parent,e.parent))}let Ad=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=dt,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.parentContexts=(0,m.f3M)(Hc),this.location=(0,m.f3M)(m.s_b),this.changeDetector=(0,m.f3M)(m.sBO),this.environmentInjector=(0,m.f3M)(m.lqb),this.inputBinder=(0,m.f3M)($u,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,!1);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,y=new Wc(t,f,i.injector);this.activated=i.createComponent(c,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[m.TTD]}),n})();class Wc{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Rs?this.route:e===Hc?this.childContexts:this.parent.get(e,t)}}const $u=new m.OlP("");let og=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Hh([r.queryParams,r.params,r.data]).pipe(Kn(([a,c,f],y)=>(f={...a,...c,...f},0===y?mt(f):Promise.resolve(f)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const c=(0,m.qFp)(r.component);if(c)for(const{templateName:f}of c.inputs)t.activatedComponentRef.setInput(f,a[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function dr(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function ag(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dr(n,r,i);return dr(n,r)})}(n,e,t);return new Co(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>dr(n,f)),c}}const r=function ug(n){return new Rs(new xi(n.url),new xi(n.params),new xi(n.queryParams),new xi(n.fragment),new xi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>dr(n,a));return new Co(r,i)}}const cg="ngNavigationCancelingError";function Do(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Bc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=qc(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function qc(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[cg]=!0,r.cancellationCode=e,t&&(r.url=t),r}function lg(n){return uf(n)&&Bc(n.url)}function uf(n){return n&&n[cg]}let cf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[Ad],encapsulation:2}),n})();function S(n){const e=n.children&&n.children.map(S),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==dt&&(t.component=cf),t}function N(n){return n.outlet||dt}function X(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class st{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Sd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ju(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ju(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ju(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=ju(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new tg(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Hr(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Sd(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),Sd(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=X(i.snapshot);c.attachRef=null,c.route=i,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class ot{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class _n{constructor(e,t){this.component=e,this.route=t}}function Zi(n,e,t){const r=n._root;return Qo(r,e?e._root:null,t,[r.value])}function Va(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function Qo(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ju(e);return n.children.forEach(c=>{(function xd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const y=function dg(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ae(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ae(n.url,e.url)||!ls(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ns(n,e)||!ls(n.queryParams,e.queryParams);default:return!Ns(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new ot(r)):(a.data=c.data,a._resolvedData=c._resolvedData),Qo(n,e,a.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new _n(f.outlet.component,c))}else c&&Jo(e,f,i),i.canActivateChecks.push(new ot(r)),Qo(n,null,a.component?f?f.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Object.entries(a).forEach(([c,f])=>Jo(f,t.getContext(c),i)),i}function Jo(n,e,t){const r=ju(n),i=n.value;Object.entries(r).forEach(([a,c])=>{Jo(c,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new _n(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function To(n){return"function"==typeof n}function Ry(n){return n instanceof _o||"EmptyError"===n?.name}const Hu=Symbol("INITIAL_VALUE");function hf(){return Kn(n=>Hh(n.map(e=>e.pipe(as(1),us(Hu)))).pipe((0,lt.U)(e=>{for(const t of e)if(!0!==t){if(t===Hu)return Hu;if(!1===t||t instanceof R)return t}return!0}),jr(e=>e!==Hu),as(1)))}function ew(n){return(0,Wp.z)((0,Mr.b)(e=>{if(Bc(e))throw Do(0,e)}),(0,lt.U)(e=>!0===e))}class pg{constructor(e){this.segmentGroup=e||null}}class uC{constructor(e){this.urlTree=e}}function ff(n){return Gi(new pg(n))}function cC(n){return Gi(new uC(n))}class Zc{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new m.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return mt(r);if(i.numberOfChildren>1||!i.children[dt])return Gi(new m.vHH(4e3,!1));i=i.children[dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new R(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const f=a.substring(1);r[i]=t[f]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Object.entries(t.children).forEach(([f,y])=>{c[f]=this.createSegmentGroup(e,y,r,i)}),new O(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const Rd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kS(n,e,t,r,i){const a=lC(n,e,t);return a.matched?(r=function lf(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function aC(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?mt(i.map(c=>{const f=Va(c,n);return ds(function Ay(n){return n&&To(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(hf(),ew()):mt(!0)}(r,e,t).pipe((0,lt.U)(c=>!0===c?a:{...Rd}))):mt(a)}function lC(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Rd}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||cr)(t,n,e);if(!i)return{...Rd};const a={};Object.entries(i.posParams??{}).forEach(([f,y])=>{a[f]=y.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function LS(n,e,t,r){return t.length>0&&function dM(n,e,t){return t.some(r=>My(n,e,r)&&N(r)!==dt)}(n,t,r)?{segmentGroup:new O(e,lM(r,new O(t,n.children))),slicedSegments:[]}:0===t.length&&function dC(n,e,t){return t.some(r=>My(n,e,r))}(n,t,r)?{segmentGroup:new O(n.segments,cM(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new O(n.segments,n.children),slicedSegments:t}}function cM(n,e,t,r,i){const a={};for(const c of r)if(My(n,t,c)&&!i[N(c)]){const f=new O([],{});a[N(c)]=f}return{...i,...a}}function lM(n,e){const t={};t[dt]=e;for(const r of n)if(""===r.path&&N(r)!==dt){const i=new O([],{});t[N(r)]=i}return t}function My(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class tw{constructor(e,t,r,i,a,c,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=c,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new Zc(this.urlSerializer,this.urlTree)}noMatchError(e){return new m.vHH(4002,!1)}recognize(){const e=LS(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,dt).pipe(Ss(t=>{if(t instanceof uC)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof pg?this.noMatchError(t):t}),(0,lt.U)(t=>{const r=new Gc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dt,this.rootComponentType,null,{}),i=new Co(r,t),a=new Fa("",i),c=function Wv(n,e,t=null,r=null){return my(Bu(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(a._root),{state:a,tree:c}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,dt).pipe(Ss(r=>{throw r instanceof pg?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=bd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Rn.D)(i).pipe(Aa(a=>{const c=r.children[a],f=function $(n,e){const t=n.filter(r=>N(r)===e);return t.push(...n.filter(r=>N(r)!==e)),t}(t,a);return this.processSegmentGroup(e,f,c,a)}),Eo((a,c)=>(a.push(...c),a)),wo(null),function Io(n,e){const t=arguments.length>=2;return r=>r.pipe(n?jr((i,a)=>n(i,a,r)):Ws.y,Fu(1),t?wo(e):Zo(()=>new _o))}(),(0,Jr.z)(a=>{if(null===a)return ff(r);const c=nw(a);return function zu(n){n.sort((e,t)=>e.value.outlet===dt?-1:t.value.outlet===dt?1:e.value.outlet.localeCompare(t.value.outlet))}(c),mt(c)}))}processSegment(e,t,r,i,a,c){return(0,Rn.D)(t).pipe(Aa(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,a,c).pipe(Ss(y=>{if(y instanceof pg)return mt(null);throw y}))),cs(f=>!!f),Ss(f=>{if(Ry(f))return function US(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?mt([]):ff(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,a,c,f){return function FS(n,e,t,r){return!!(N(n)===r||r!==dt&&My(e,t,n))&&("**"===n.path||lC(e,n,t).matched)}(r,i,a,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,c,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,c):ff(i):ff(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?cC(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,Jr.z)(c=>{const f=new O(c,{});return this.processSegment(e,t,f,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:f,consumedSegments:y,remainingSegments:E,positionalParamSegments:b}=lC(t,i,a);if(!f)return ff(t);const x=this.applyRedirects.applyRedirectCommands(y,i.redirectTo,b);return i.redirectTo.startsWith("/")?cC(x):this.applyRedirects.lineralizeSegments(i,x).pipe((0,Jr.z)(P=>this.processSegment(e,r,t,P.concat(E),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,c){let f;if("**"===r.path){const y=i.length>0?Wi(i).parameters:{};f=mt({snapshot:new Gc(i,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rw(r),N(r),r.component??r._loadedComponent??null,r,jS(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else f=kS(t,r,i,e).pipe((0,lt.U)(({matched:y,consumedSegments:E,remainingSegments:b,parameters:x})=>y?{snapshot:new Gc(E,x,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rw(r),N(r),r.component??r._loadedComponent??null,r,jS(r)),consumedSegments:E,remainingSegments:b}:null));return f.pipe(Kn(y=>null===y?ff(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Kn(({routes:E})=>{const b=r._loadedInjector??e,{snapshot:x,consumedSegments:P,remainingSegments:B}=y,{segmentGroup:Y,slicedSegments:pe}=LS(t,P,B,E);if(0===pe.length&&Y.hasChildren())return this.processChildren(b,E,Y).pipe((0,lt.U)(ut=>null===ut?null:[new Co(x,ut)]));if(0===E.length&&0===pe.length)return mt([new Co(x,[])]);const xe=N(r)===a;return this.processSegment(b,E,Y,pe,xe?dt:a,!0).pipe((0,lt.U)(ut=>[new Co(x,ut)]))}))))}getChildConfig(e,t,r){return t.children?mt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?mt({routes:t._loadedRoutes,injector:t._loadedInjector}):function oC(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?mt(!0):mt(i.map(c=>{const f=Va(c,n);return ds(function df(n){return n&&To(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(hf(),ew())}(e,t,r).pipe((0,Jr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Mr.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function OS(n){return Gi(qc(!1,3))}())):mt({routes:[],injector:e})}}function gg(n){const e=n.value.routeConfig;return e&&""===e.path}function nw(n){const e=[],t=new Set;for(const r of n){if(!gg(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=nw(r.children);e.push(new Co(r.value,i))}return e.filter(r=>!t.has(r))}function rw(n){return n.data||{}}function jS(n){return n.resolve||{}}function ow(n){return"string"==typeof n.title||null===n.title}function aw(n){return Kn(e=>{const t=n(e);return t?(0,Rn.D)(t).pipe((0,lt.U)(()=>e)):mt(e)})}const pf=new m.OlP("ROUTES");let uw=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,m.f3M)(m.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return mt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ds(t.loadComponent()).pipe((0,lt.U)(cw),(0,Mr.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),qh(()=>{this.componentLoaders.delete(t)})),i=new Lu(r,()=>new Ai.x).pipe(vd());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return mt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,lt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,E;return Array.isArray(f)?E=f:(y=f.create(t).injector,E=y.get(pf,[],m.XFs.Self|m.XFs.Optional).flat()),{routes:E.map(S),injector:y}}),qh(()=>{this.childrenLoaders.delete(r)})),c=new Lu(a,()=>new Ai.x).pipe(vd());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return ds(t()).pipe((0,lt.U)(cw),(0,Jr.z)(r=>r instanceof m.YKP||Array.isArray(r)?mt(r):(0,Rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cw(n){return function $S(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Nd=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ai.x,this.configLoader=(0,m.f3M)(uw),this.environmentInjector=(0,m.f3M)(m.lqb),this.urlSerializer=(0,m.f3M)(Be),this.rootContexts=(0,m.f3M)(Hc),this.inputBindingEnabled=null!==(0,m.f3M)($u,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>mt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Kv(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Cy(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new xi({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:jc,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(jr(r=>0!==r.id),(0,lt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Kn(r=>{let i=!1,a=!1;return mt(r).pipe((0,Mr.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Kn(c=>{const f=t.browserUrlTree.toString(),y=!t.navigated||c.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!y&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new Cd(c.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),vo.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return hC(c.source)&&(t.browserUrlTree=c.extractedUrl),mt(c).pipe(Kn(b=>{const x=this.transitions?.getValue();return this.events.next(new La(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),x!==this.transitions?.getValue()?vo.E:Promise.resolve(b)}),function hM(n,e,t,r,i,a){return(0,Jr.z)(c=>function VS(n,e,t,r,i,a,c="emptyOnly"){return new tw(n,e,t,r,i,c,a).recognize()}(n,e,t,r,c.extractedUrl,i,a).pipe((0,lt.U)(({state:f,tree:y})=>({...c,targetSnapshot:f,urlAfterRedirects:y}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Mr.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,r.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const P=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl(P,b)}t.browserUrlTree=b.urlAfterRedirects}const x=new Ey(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(x)}));if(y&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:x,source:P,restoredState:B,extras:Y}=c,pe=new La(b,this.urlSerializer.serialize(x),P,B);this.events.next(pe);const xe=ng(0,this.rootComponentType).snapshot;return mt(r={...c,targetSnapshot:xe,urlAfterRedirects:x,extras:{...Y,skipLocationChange:!1,replaceUrl:!1}})}{const b="";return this.events.next(new Cd(c.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),vo.E}}),(0,Mr.b)(c=>{const f=new Xp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),(0,lt.U)(c=>r={...c,guards:Zi(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function RS(n,e){return(0,Jr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?mt({...t,guardsResult:!0}):function uM(n,e,t,r){return(0,Rn.D)(n).pipe((0,Jr.z)(i=>function Xv(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?mt(a.map(f=>{const y=X(e)??i,E=Va(f,y);return ds(function hg(n){return n&&To(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,r):y.runInContext(()=>E(n,e,t,r))).pipe(cs())})).pipe(hf()):mt(!0)}(i.component,i.route,t,e,r)),cs(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Jr.z)(f=>f&&function by(n){return"boolean"==typeof n}(f)?function NS(n,e,t,r){return(0,Rn.D)(e).pipe(Aa(i=>bs(function MS(n,e){return null!==n&&e&&e(new Yv(n)),mt(!0)}(i.route.parent,r),function Jv(n,e){return null!==n&&e&&e(new eg(n)),mt(!0)}(i.route,r),function Ny(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function Ua(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Fc(()=>mt(c.guards.map(y=>{const E=X(c.node)??t,b=Va(y,E);return ds(function Qv(n){return n&&To(n.canActivateChild)}(b)?b.canActivateChild(r,n):E.runInContext(()=>b(r,n))).pipe(cs())})).pipe(hf())));return mt(a).pipe(hf())}(n,i.path,t),function fg(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const i=r.map(a=>Fc(()=>{const c=X(e)??t,f=Va(a,c);return ds(function Sy(n){return n&&To(n.canActivate)}(f)?f.canActivate(e,n):c.runInContext(()=>f(e,n))).pipe(cs())}));return mt(i).pipe(hf())}(n,i.route,t))),cs(i=>!0!==i,!0))}(r,a,n,e):mt(f)),(0,lt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,c=>this.events.next(c)),(0,Mr.b)(c=>{if(r.guardsResult=c.guardsResult,Bc(c.guardsResult))throw Do(0,c.guardsResult);const f=new qv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(f)}),jr(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),aw(c=>{if(c.guards.canActivateChecks.length)return mt(c).pipe((0,Mr.b)(f=>{const y=new Iy(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}),Kn(f=>{let y=!1;return mt(f).pipe(function fM(n,e){return(0,Jr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let a=0;return(0,Rn.D)(i).pipe(Aa(c=>function iw(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!ow(i)&&(a[Uc]=i.title),function sw(n,e,t,r){const i=function pM(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return mt({});const a={};return(0,Rn.D)(i).pipe((0,Jr.z)(c=>function gM(n,e,t,r){const i=X(e)??r,a=Va(n,i);return ds(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(cs(),(0,Mr.b)(f=>{a[c]=f}))),Fu(1),function Wh(n){return(0,lt.U)(()=>n)}(a),Ss(c=>Ry(c)?vo.E:Gi(c)))}(a,n,e,r).pipe((0,lt.U)(c=>(n._resolvedData=c,n.data=bd(n,t).resolve,i&&ow(i)&&(n.data[Uc]=i.title),null)))}(c.route,r,n,e)),(0,Mr.b)(()=>a++),Fu(1),(0,Jr.z)(c=>a===i.length?mt(t):vo.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Mr.b)({next:()=>y=!0,complete:()=>{y||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,Mr.b)(f=>{const y=new Zv(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}))}),aw(c=>{const f=y=>{const E=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,Mr.b)(b=>{y.component=b}),(0,lt.U)(()=>{})));for(const b of y.children)E.push(...f(b));return E};return Hh(f(c.targetSnapshot.root)).pipe(wo(),as(1))}),aw(()=>this.afterPreactivation()),(0,lt.U)(c=>{const f=function af(n,e,t){const r=dr(n,e._root,t?t._root:void 0);return new sf(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:f}}),(0,Mr.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t,r)=>(0,lt.U)(i=>(new st(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),as(1),(0,Mr.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new $r(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),qh(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ss(c=>{if(a=!0,uf(c)){lg(c)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new tf(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(f),lg(c)){const y=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),E={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||hC(r.source)};t.scheduleNavigation(y,jc,null,E,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new $c(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(c))}catch(y){r.reject(y)}}return vo.E}))}))}cancelNavigationTransition(t,r,i){const a=new tf(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hC(n){return n!==jc}let Py=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===dt);return r}getResolvedTitleForRoute(t){return t.data[Uc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(HS)},providedIn:"root"}),n})(),HS=(()=>{class n extends Py{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Tu))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(GS)},providedIn:"root"}),n})();class zS{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let GS=(()=>{class n extends zS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gf=new m.OlP("",{providedIn:"root",factory:()=>({})});let fC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(WS)},providedIn:"root"}),n})(),WS=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var qs=(()=>((qs=qs||{})[qs.COMPLETE=0]="COMPLETE",qs[qs.FAILED=1]="FAILED",qs[qs.REDIRECTING=2]="REDIRECTING",qs))();function pC(n,e){n.events.pipe(jr(t=>t instanceof $r||t instanceof tf||t instanceof $c||t instanceof Cd),(0,lt.U)(t=>t instanceof $r||t instanceof Cd?qs.COMPLETE:t instanceof tf&&(0===t.code||1===t.code)?qs.REDIRECTING:qs.FAILED),jr(t=>t!==qs.REDIRECTING),as(1)).subscribe(()=>{e()})}function qS(n){throw n}function gC(n,e,t){return e.parse("/")}const mM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ki=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,m.f3M)(m.c2e),this.isNgZoneEnabled=!1,this.options=(0,m.f3M)(gf,{optional:!0})||{},this.pendingTasks=(0,m.f3M)(m.HDt),this.errorHandler=this.options.errorHandler||qS,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||gC,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,m.f3M)(fC),this.routeReuseStrategy=(0,m.f3M)(zr),this.titleStrategy=(0,m.f3M)(Py),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,m.f3M)(pf,{optional:!0})?.flat()??[],this.navigationTransitions=(0,m.f3M)(Nd),this.urlSerializer=(0,m.f3M)(Be),this.location=(0,m.f3M)(ce),this.componentInputBindingEnabled=!!(0,m.f3M)($u,{optional:!0}),this.isNgZoneEnabled=(0,m.f3M)(m.R0b)instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new R,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ng(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),jc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const y={...i};delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(a.state=y)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(S),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:y}=r,E=y?this.currentUrlTree.fragment:c;let x,b=null;switch(f){case"merge":b={...this.currentUrlTree.queryParams,...a};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=a||null}null!==b&&(b=this.removeEmptyProps(b));try{x=Bu(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),x=this.currentUrlTree.root}return my(x,t,b,E??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Bc(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,jc,null,r)}navigate(t,r={skipLocationChange:!1}){return function hn(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new m.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...mM}:!1===r?{...yM}:r,Bc(t))return hy(this.currentUrlTree,t,i);const a=this.parseUrl(t);return hy(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let f,y,E;c?(f=c.resolve,y=c.reject,E=c.promise):E=new Promise((x,P)=>{f=x,y=P});const b=this.pendingTasks.add();return pC(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:y,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-(this.browserPageId??this.currentPageId);0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Gu=(()=>{class n{constructor(t,r,i,a,c,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=f,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Ai.x;const y=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===y||"area"===y,this.isAnchorElement?this.subscription=t.events.subscribe(E=>{E instanceof $r&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,m.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,m.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,m.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,c){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,m.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Ki),m.Y36(Rs),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(je))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&m.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&m.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),n})();class lw{}let _C=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(jr(t=>t instanceof $r),Aa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,m.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,f=a._loadedInjector??c;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(c,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,Rn.D)(i).pipe((0,Lc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):mt(null);const a=i.pipe((0,Jr.z)(c=>null===c?mt(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Rn.D)([a,c]).pipe((0,Lc.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ki),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(lw),m.LFG(uw))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Oy=new m.OlP("");let ky=(()=>{class n{constructor(t,r,i,a,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof La?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $r?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Cd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nf&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nf(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Wu(n,e){return{\u0275kind:n,\u0275providers:e}}function vC(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(Ki),i=n.get(Fy);1===n.get(yf)&&r.initialNavigation(),n.get(Kc,null,m.XFs.Optional)?.setUpPreloading(),n.get(Oy,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Fy=new m.OlP("",{factory:()=>new Ai.x}),yf=new m.OlP("",{providedIn:"root",factory:()=>1}),Kc=new m.OlP("");function pw(n){return Wu(0,[{provide:Kc,useExisting:_C},{provide:lw,useExisting:n}])}const IC=new m.OlP("ROUTER_FORROOT_GUARD"),JS=[ce,{provide:Be,useClass:ct},Ki,Hc,{provide:Rs,useFactory:function Ly(n){return n.routerState.root},deps:[Ki]},uw,[]];function XS(){return new m.PXZ("Router",Ki)}let Uy=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[JS,[],{provide:pf,multi:!0,useValue:t},{provide:IC,useFactory:gw,deps:[[Ki,new m.FiY,new m.tp0]]},{provide:gf,useValue:r||{}},r?.useHash?{provide:je,useClass:vt}:{provide:je,useClass:nt},{provide:Oy,useFactory:()=>{const n=(0,m.f3M)(bi),e=(0,m.f3M)(m.R0b),t=(0,m.f3M)(gf),r=(0,m.f3M)(Nd),i=(0,m.f3M)(Be);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ky(i,r,n,e,t)}},r?.preloadingStrategy?pw(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:XS},r?.initialNavigation?EM(r):[],r?.bindToComponentInputs?Wu(8,[og,{provide:$u,useExisting:og}]).\u0275providers:[],[{provide:tA,useFactory:vC},{provide:m.tb,multi:!0,useExisting:tA}]]}}static forChild(t){return{ngModule:n,providers:[{provide:pf,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(IC,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function gw(n){return"guarded"}function EM(n){return["disabled"===n.initialNavigation?Wu(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(Ki);return()=>{e.setUpLocationChangeListener()}}},{provide:yf,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Wu(2,[{provide:yf,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(Ie,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ki),a=e.get(Fy);pC(i,()=>{r(!0)}),e.get(Nd).afterPreactivation=()=>(r(!0),a.closed?mt(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const tA=new m.OlP("");let yw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-about-us"]],decls:14,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","background-theme"],[1,"text-white","text-center"],[1,"mt-5","p-5","bg-secondary-theme"],[1,"text-center"],[1,"btn","btn-sm","btn-info","mt-5","btn-theme"]],template:function(t,r){1&t&&(m.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),m._uU(3,"About Us"),m.qZA(),m.TgZ(4,"div",3)(5,"p"),m._uU(6," Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore delectus totam aliquam rem. Suscipit provident ratione repellendus excepturi odit optio, saepe doloremque eligendi tempora fugit voluptatum ab quos ipsa, minus explicabo alias nesciunt obcaecati cum maxime laboriosam nostrum possimus corporis non? Dicta officiis, quae voluptates laborum quidem cupiditate. Ea, consequuntur. "),m.qZA(),m.TgZ(7,"p"),m._uU(8," Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore delectus totam aliquam rem. Suscipit provident ratione repellendus excepturi odit optio, saepe doloremque eligendi tempora fugit voluptatum ab quos ipsa, minus explicabo alias nesciunt obcaecati cum maxime laboriosam nostrum possimus corporis non? Dicta officiis, quae voluptates laborum quidem cupiditate. Ea, consequuntur. "),m.qZA(),m.TgZ(9,"p"),m._uU(10," Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore delectus totam aliquam rem. Suscipit provident ratione repellendus excepturi odit optio, saepe doloremque eligendi tempora fugit voluptatum ab quos ipsa, minus explicabo alias nesciunt obcaecati cum maxime laboriosam nostrum possimus corporis non? Dicta officiis, quae voluptates laborum quidem cupiditate. Ea, consequuntur. "),m.qZA(),m.TgZ(11,"div",4)(12,"button",5),m._uU(13,"Back to Home"),m.qZA()()()()())},styles:["p[_ngcontent-%COMP%]{color:var(--primary-color)}"]}),n})(),yg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-contact-us"]],decls:2,vars:0,template:function(t,r){1&t&&(m.TgZ(0,"p"),m._uU(1,"contact-us works!"),m.qZA())}}),n})();var _g=F(9260),Vy=F(4986),vn=F(4976);function _f(){return(0,ur.e)((n,e)=>{let t,r=!1;n.subscribe((0,ar.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function vf(n,e=Ws.y){return n=n??bC,(0,ur.e)((t,r)=>{let i,a=!0;t.subscribe((0,ar.x)(r,c=>{const f=e(c);(a||!n(i,f))&&(a=!1,i=f,r.next(c))}))})}function bC(n,e){return n===e}var rt,Mi=F(2011),rA=(F(2644),F(3942)),ye=F(5861),Zs=F(6881),Ba=F(4859),Xo=F(1877),k=F(2090),SC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bo={},vw=vw||{},jt=SC||self;function By(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Md(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ew="closure_uid_"+(1e9*Math.random()>>>0),AC=0;function Iw(n,e,t){return n.call.apply(n.bind,arguments)}function jy(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Yi(n,e,t){return(Yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Iw:jy).apply(null,arguments)}function vg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function li(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function qu(){this.s=this.s,this.o=this.o}qu.prototype.s=!1,qu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function ww(n){Object.prototype.hasOwnProperty.call(n,Ew)&&n[Ew]||(n[Ew]=++AC)}(this)},qu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function wf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function RC(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(By(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function Pr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Pr.prototype.h=function(){this.defaultPrevented=!0};var wg=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",()=>{},e),jt.removeEventListener("test",()=>{},e)}catch{}return n}();function Eg(n){return/^[\s\xa0]*$/.test(n)}function Ig(){var n=jt.navigator;return n&&(n=n.userAgent)?n:""}function ja(n){return-1!=Ig().indexOf(n)}function Cw(n){return Cw[" "](n),n}Cw[" "]=function(){};var Yc,n,NC=ja("Opera"),Pd=ja("Trident")||ja("MSIE"),$y=ja("Edge"),Od=$y||Pd,Dw=ja("Gecko")&&!(-1!=Ig().toLowerCase().indexOf("webkit")&&!ja("Edge"))&&!(ja("Trident")||ja("MSIE"))&&!ja("Edge"),TM=-1!=Ig().toLowerCase().indexOf("webkit")&&!ja("Edge");function Hy(){var n=jt.document;return n?n.documentMode:void 0}e:{var Ef="",zy=(n=Ig(),Dw?/rv:([^\);]+)(\)|;)/.exec(n):$y?/Edge\/([\d\.]+)/.exec(n):Pd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):TM?/WebKit\/(\S+)/.exec(n):NC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(zy&&(Ef=zy?zy[1]:""),Pd){var Gy=Hy();if(null!=Gy&&Gy>parseFloat(Ef)){Yc=String(Gy);break e}}Yc=Ef}var sA=jt.document&&Pd&&(Hy()||parseInt(Yc,10))||void 0;function Cg(n,e){if(Pr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Dw){e:{try{Cw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:oA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Cg.$.h.call(this)}}li(Cg,Pr);var oA={2:"touch",3:"pen",4:"mouse"};Cg.prototype.h=function(){Cg.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Dg="closure_listenable_"+(1e6*Math.random()|0),PC=0;function If(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++PC,this.fa=this.ia=!1}function So(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Wy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function OC(n){const e={};for(const t in n)e[t]=n[t];return e}const aA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uA(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<aA.length;a++)t=aA[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Tg(n){this.src=n,this.g={},this.h=0}function qy(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=xC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(So(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function kC(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}Tg.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=kC(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new If(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var Zy="closure_lm_"+(1e6*Math.random()|0),Cf={};function bw(n,e,t,r,i){if(r&&r.once)return Bt(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)bw(n,e[a],t,r,i);return null}return t=Rw(t),n&&n[Dg]?n.O(e,t,Md(r)?!!r.capture:!!r,i):Sw(n,e,t,!1,r,i)}function Sw(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Md(i)?!!i.capture:!!i,f=Yy(n);if(f||(n[Zy]=f=new Tg(n)),(t=f.add(e,t,r,c,a)).proxy)return t;if(r=function LC(){const e=lA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)wg||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(cA(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Bt(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Bt(n,e[a],t,r,i);return null}return t=Rw(t),n&&n[Dg]?n.P(e,t,Md(r)?!!r.capture:!!r,i):Sw(n,e,t,!0,r,i)}function Aw(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Aw(n,e[a],t,r,i);else r=Md(r)?!!r.capture:!!r,t=Rw(t),n&&n[Dg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=kC(a=n.g[e],t,r,i))&&(So(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Yy(n))&&(e=n.g[e.toString()],n=-1,e&&(n=kC(e,t,r,i)),(t=-1<n?e[n]:null)&&Ky(t))}function Ky(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Dg])qy(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(cA(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Yy(e))?(qy(t,n),0==t.h&&(t.src=null,e[Zy]=null)):So(n)}}}function cA(n){return n in Cf?Cf[n]:Cf[n]="on"+n}function lA(n,e){if(n.fa)n=!0;else{e=new Cg(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Ky(n),n=t.call(r,e)}return n}function Yy(n){return(n=n[Zy])instanceof Tg?n:null}var xw="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rw(n){return"function"==typeof n?n:(n[xw]||(n[xw]=function(e){return n.handleEvent(e)}),n[xw])}function ei(){qu.call(this),this.i=new Tg(this),this.S=this,this.J=null}function Pi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Pr(e,n);else if(e instanceof Pr)e.target=e.target||n;else{var i=e;uA(e=new Pr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=bg(c,r,!0,e)&&i}if(i=bg(c=e.g=n,r,!0,e)&&i,i=bg(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=bg(c=e.g=t[a],r,!1,e)&&i}function bg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.fa&&c.capture==t){var f=c.listener,y=c.la||c.src;c.ia&&qy(n.i,c),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}li(ei,qu),ei.prototype[Dg]=!0,ei.prototype.removeEventListener=function(n,e,t,r){Aw(this,n,e,t,r)},ei.prototype.N=function(){if(ei.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)So(t[r]);delete n.g[e],n.h--}}this.J=null},ei.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ei.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Nw=jt.JSON.stringify;function SM(){var n=Xc;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Mw=new class dA{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Qc,n=>n.reset());class Qc{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Df(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function UC(n){jt.setTimeout(()=>{throw n},0)}let Sg,Jc=!1,Xc=new class FC{constructor(){this.h=this.g=null}add(e,t){const r=Mw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Qy=()=>{const n=jt.Promise.resolve(void 0);Sg=()=>{n.then(Ag)}};var Ag=()=>{for(var n;n=SM();){try{n.h.call(n.g)}catch(t){UC(t)}var e=Mw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Jc=!1};function xg(n,e){ei.call(this),this.h=n||1,this.g=e||jt,this.j=Yi(this.qb,this),this.l=Date.now()}function Rg(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Ng(n,e,t){if("function"==typeof n)t&&(n=Yi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Yi(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function Jy(n){n.g=Ng(()=>{n.g=null,n.i&&(n.i=!1,Jy(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}li(xg,ei),(rt=xg.prototype).ga=!1,rt.T=null,rt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Pi(this,"tick"),this.ga&&(Rg(this),this.start()))}},rt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.N=function(){xg.$.N.call(this),Rg(this),delete this.g};class VC extends qu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Jy(this)}N(){super.N(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kd(n){qu.call(this),this.h=n,this.g={}}li(kd,qu);var BC=[];function jC(n,e,t,r){Array.isArray(t)||(t&&(BC[0]=t.toString()),t=BC);for(var i=0;i<t.length;i++){var a=bw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function $C(n){Wy(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ky(e)},n),n.g={}}function Mg(){this.g=!0}function Tf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function HC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return Nw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}kd.prototype.N=function(){kd.$.N.call(this),$C(this)},kd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mg.prototype.Ea=function(){this.g=!1},Mg.prototype.info=function(){};var el={},zC=null;function Xy(){return zC=zC||new ei}function Ms(n){Pr.call(this,el.Ta,n)}function Pg(n){const e=Xy();Pi(e,new Ms(e))}function GC(n,e){Pr.call(this,el.STAT_EVENT,n),this.stat=e}function Ps(n){const e=Xy();Pi(e,new GC(e,n))}function e_(n,e){Pr.call(this,el.Ua,n),this.size=e}function bf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}el.Ta="serverreachability",li(Ms,Pr),el.STAT_EVENT="statevent",li(GC,Pr),el.Ua="timingevent",li(e_,Pr);var t_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},WC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Pw(){}function qC(){}Pw.prototype.h=null;var Lw,Og={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function kg(){Pr.call(this,"d")}function kw(){Pr.call(this,"c")}function n_(){}function Lg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new kd(this),this.P=$a,this.V=new xg(n=Od?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ZC}function ZC(){this.i=null,this.g="",this.h=!1}li(kg,Pr),li(kw,Pr),li(n_,Pw),n_.prototype.g=function(){return new XMLHttpRequest},n_.prototype.i=function(){return{}},Lw=new n_;var $a=45e3,Fg={},r_={};function i_(n,e,t){n.L=1,n.v=Ud(Ku(e)),n.s=t,n.S=!0,KC(n,null)}function KC(n,e){n.G=Date.now(),Ld(n),n.A=Ku(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Hw(t.i,"t",r),n.C=0,t=n.l.J,n.h=new ZC,n.g=e0(n.l,t?e:null,!n.s),0<n.O&&(n.M=new VC(Yi(n.Pa,n,n.g),n.O)),jC(n.U,n.g,"readystatechange",n.nb),e=n.I?OC(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Pg(),function hA(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",f=a.split("&"),y=0;y<f.length;y++){var E=f[y].split("=");if(1<E.length){var b=E[0];E=E[1];var x=b.split("_");c=2<=x.length&&"type"==x[1]?c+(b+"=")+E+"&":c+(b+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Fw(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Uw(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=s_(n,t),i==r_){4==e&&(n.o=4,Ps(14),r=!1),Tf(n.j,n.m,null,"[Incomplete Response]");break}if(i==Fg){n.o=4,Ps(15),Tf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Tf(n.j,n.m,i,null),o_(n,i)}Fw(n)&&i!=r_&&i!=Fg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ps(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),sl(e),e.M=!0,Ps(11))):(Tf(n.j,n.m,t,"[Invalid Chunked Response]"),tl(n),Sf(n))}function s_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?r_:(t=Number(e.substring(t,r)),isNaN(t)?Fg:(r+=1)+t>e.length?r_:(e=e.slice(r,r+t),n.C=r+t,e))}function Ld(n){n.Y=Date.now()+n.P,gA(n,n.P)}function gA(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=bf(Yi(n.lb,n),e)}function Ug(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function Sf(n){0==n.l.H||n.J||Yw(n.l,n)}function tl(n){Ug(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Rg(n.V),$C(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function o_(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||zw(t.i,n)))if(!n.K&&zw(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Hg(t),Nf(t)}il(t),Ps(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=bf(Yi(t.ib,t),6e3));if(1>=eD(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ol(t,11)}else if((n.K||t.g==n)&&Hg(t),!Eg(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.V=E[0],E=E[1],2==t.H)if("c"==E[0]){t.K=E[1],t.pa=E[2];const b=E[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const x=E[4];null!=x&&(t.Ga=x,t.l.info("SVER="+t.Ga));const P=E[5];null!=P&&"number"==typeof P&&0<P&&(t.L=r=1.5*P,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const Y=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var a=r.i;a.g||-1==Y.indexOf("spdy")&&-1==Y.indexOf("quic")&&-1==Y.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Gw(a,a.h),a.h=null))}if(r.F){const pe=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;pe&&(r.Da=pe,Ln(r.I,r.F,pe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=Xw(r,r.J?r.pa:null,r.Y),c.K){tD(r.i,c);var f=c,y=r.L;y&&f.setTimeout(y),f.B&&(Ug(f),Ld(f)),r.g=c}else Gd(r);0<t.j.length&&Qu(t)}else"stop"!=E[0]&&"close"!=E[0]||ol(t,7);else 3==t.H&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?ol(t,7):Os(t):"noop"!=E[0]&&t.h&&t.h.Aa(E),t.A=0)}Pg()}catch{}}function YC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(By(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Zu(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(By(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Vw(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(By(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(rt=Lg.prototype).setTimeout=function(n){this.P=n},rt.nb=function(n){n=n.target;const e=this.M;e&&3==Ao(n)?e.l():this.Pa(n)},rt.Pa=function(n){try{if(n==this.g)e:{const b=Ao(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||Od||this.g&&(this.h.h||this.g.ja()||uD(this.g)))){this.J||4!=b||7==e||Pg(),Ug(this);var t=this.g.da();this.ca=t;t:if(Fw(this)){var r=uD(this.g);n="";var i=r.length,a=4==Ao(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){tl(this),Sf(this);var c="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function fA(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Eg(f)){var E=f;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Ps(12),tl(this),Sf(this);break e}Tf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,o_(this,t)}this.S?(Uw(this,b,c),Od&&this.i&&3==b&&(jC(this.U,this.V,"tick",this.mb),this.V.start())):(Tf(this.j,this.m,c,null),o_(this,c)),4==b&&tl(this),this.i&&!this.J&&(4==b?Yw(this.l,this):(this.i=!1,Ld(this)))}else(function Ha(n){const e={};n=(n.g&&2<=Ao(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Eg(n[r]))continue;var t=Df(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function bM(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ps(12)):(this.o=0,Ps(13)),tl(this),Sf(this)}}}catch{}},rt.mb=function(){if(this.g){var n=Ao(this.g),e=this.g.ja();this.C<e.length&&(Ug(this),Uw(this,n,e),this.i&&4!=n&&Ld(this))}},rt.cancel=function(){this.J=!0,tl(this)},rt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function pA(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Pg(),Ps(17)),tl(this),this.o=2,Sf(this)):gA(this,this.Y-n)};var QC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fd(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Fd){this.h=n.h,a_(this,n.j),this.s=n.s,this.g=n.g,jw(this,n.m),this.l=n.l;var e=n.i,t=new Vd;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),$w(this,t),this.o=n.o}else n&&(e=String(n).match(QC))?(this.h=!1,a_(this,e[1]||"",!0),this.s=Yu(e[2]||""),this.g=Yu(e[3]||"",!0),jw(this,e[4]),this.l=Yu(e[5]||"",!0),$w(this,e[6]||"",!0),this.o=Yu(e[7]||"")):(this.h=!1,this.i=new Vd(null,this.h))}function Ku(n){return new Fd(n)}function a_(n,e,t){n.j=t?Yu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jw(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function $w(n,e,t){e instanceof Vd?(n.i=e,function vA(n,e){e&&!n.j&&(rl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Af(this,r),Hw(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=nl(e,yA)),n.i=new Vd(e,n.h))}function Ln(n,e,t){n.i.set(e,t)}function Ud(n){return Ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Yu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function nl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,AM),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function AM(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Fd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(nl(e,JC,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(nl(e,JC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(nl(t,"/"==t.charAt(0)?mA:u_,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",nl(t,_A)),n.join("")};var JC=/[#\/\?@]/g,u_=/[#\?:]/g,mA=/[#\?]/g,yA=/[#\?@]/g,_A=/#/g;function Vd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function rl(n){n.g||(n.g=new Map,n.h=0,n.i&&function Bw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Af(n,e){rl(n),e=Bd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function XC(n,e){return rl(n),e=Bd(n,e),n.g.has(e)}function Hw(n,e,t){Af(n,e),0<t.length&&(n.i=null,n.g.set(Bd(n,e),wf(t)),n.h+=t.length)}function Bd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function xf(n){this.l=n||EA,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ka&&jt.g.Ka()&&jt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=Vd.prototype).add=function(n,e){rl(this),this.i=null,n=Bd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){rl(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},rt.ta=function(){rl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},rt.Z=function(n){rl(this);let e=[];if("string"==typeof n)XC(this,n)&&(e=e.concat(this.g.get(Bd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},rt.set=function(n,e){return rl(this),this.i=null,XC(this,n=Bd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var EA=10;function IA(n){return!!n.h||!!n.g&&n.g.size>=n.j}function eD(n){return n.h?1:n.g?n.g.size:0}function zw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Gw(n,e){n.g?n.g.add(e):n.h=e}function tD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function nD(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return wf(n.i)}xf.prototype.cancel=function(){if(this.i=nD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var CA=class{stringify(n){return jt.JSON.stringify(n,void 0)}parse(n){return jt.JSON.parse(n,void 0)}};function DA(){this.g=new CA}function rD(n,e,t){const r=t||"";try{YC(n,function(i,a){let c=i;Md(i)&&(c=Nw(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function c_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function jd(n){this.l=n.fc||null,this.j=n.ob||!1}function l_(n,e){ei.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Ww,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}li(jd,Pw),jd.prototype.g=function(){return new l_(this.l,this.j)},jd.prototype.i=function(n){return function(){return n}}({}),li(l_,ei);var Ww=0;function sD(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Vg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Bg(n)}function Bg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=l_.prototype).open=function(n,e){if(this.readyState!=Ww)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Bg(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||jt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vg(this)),this.readyState=Ww},rt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Bg(this)),this.g&&(this.readyState=3,Bg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sD(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},rt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vg(this):Bg(this),3==this.readyState&&sD(this)}},rt.Za=function(n){this.g&&(this.response=this.responseText=n,Vg(this))},rt.Ya=function(n){this.g&&(this.response=n,Vg(this))},rt.ka=function(){this.g&&Vg(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(l_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var TA=jt.JSON.parse;function wr(n){ei.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=qw,this.L=this.M=!1}li(wr,ei);var qw="",oD=/^https?$/i,bA=["POST","PUT"];function Zw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,SA(n),d_(n)}function SA(n){n.F||(n.F=!0,Pi(n,"complete"),Pi(n,"error"))}function jg(n){if(n.h&&typeof vw<"u"&&(!n.C[1]||4!=Ao(n)||2!=n.da()))if(n.v&&4==Ao(n))Ng(n.La,0,n);else if(Pi(n,"readystatechange"),4==Ao(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(QC)[1]||null;!i&&jt.self&&jt.self.location&&(i=jt.self.location.protocol.slice(0,-1)),r=!oD.test(i?i.toLowerCase():"")}t=r}if(t)Pi(n,"complete"),Pi(n,"success");else{n.m=6;try{var a=2<Ao(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",SA(n)}}finally{d_(n)}}}function d_(n,e){if(n.g){aD(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Pi(n,"ready");try{t.onreadystatechange=r}catch{}}}function aD(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function Ao(n){return n.g?n.g.readyState:0}function uD(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case qw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Rf(n){let e="";return Wy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function di(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Rf(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ln(n,e,t))}function ea(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function $g(n){this.Ga=0,this.j=[],this.l=new Mg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ea("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ea("baseRetryDelayMs",5e3,n),this.hb=ea("retryDelaySeedMs",1e4,n),this.eb=ea("forwardChannelMaxRetries",2,n),this.xa=ea("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new xf(n&&n.concurrentRequestLimit),this.Ja=new DA,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Os(n){if($d(n),3==n.H){var e=n.W++,t=Ku(n.I);if(Ln(t,"SID",n.K),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),za(n,t),(e=new Lg(n,n.l,e)).L=2,e.v=Ud(Ku(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon)try{t=jt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=e0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ld(e)}Jw(n)}function Nf(n){n.g&&(sl(n),n.g.cancel(),n.g=null)}function $d(n){Nf(n),n.u&&(jt.clearTimeout(n.u),n.u=null),Hg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function Qu(n){if(!IA(n.i)&&!n.m){n.m=!0;var e=n.Na;Sg||Qy(),Jc||(Sg(),Jc=!0),Xc.add(e,n),n.C=0}}function Hd(n,e){var t;t=e?e.m:n.W++;const r=Ku(n.I);Ln(r,"SID",n.K),Ln(r,"RID",t),Ln(r,"AID",n.V),za(n,r),n.o&&n.s&&di(r,n.o,n.s),t=new Lg(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=zd(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Gw(n.i,t),i_(t,r,e)}function za(n,e){n.na&&Wy(n.na,function(t,r){Ln(e,r,t)}),n.h&&YC({},function(t,r){Ln(e,r,t)})}function zd(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Yi(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].g,c.push("ofs="+a)):a=0:c.push("ofs="+a);let f=!0;for(let y=0;y<t;y++){let E=i[y].g;const b=i[y].map;if(E-=a,0>E)a=Math.max(0,i[y].g-100),f=!1;else try{rD(b,c,"req"+E+"_")}catch{r&&r(b)}}if(f){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Gd(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Sg||Qy(),Jc||(Sg(),Jc=!0),Xc.add(e,n),n.A=0}}function il(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=bf(Yi(n.Ma,n),Qw(n,n.A)),n.A++,0))}function sl(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function Kw(n){n.g=new Lg(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ku(n.wa);Ln(e,"RID","rpc"),Ln(e,"SID",n.K),Ln(e,"AID",n.V),Ln(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Ln(e,"TO",n.qa),Ln(e,"TYPE","xmlhttp"),za(n,e),n.o&&n.s&&di(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Ud(Ku(e)),t.s=null,t.S=!0,KC(t,n)}function Hg(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function Yw(n,e){var t=null;if(n.g==e){Hg(n),sl(n),n.g=null;var r=2}else{if(!zw(n.i,e))return;t=e.F,tD(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Pi(r=Xy(),new e_(r,t)),Qu(n)}else Gd(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Mf(n,e){return!(eD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=bf(Yi(n.Na,n,e),Qw(n,n.C)),n.C++,0)))}(n,e)||2==r&&il(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ol(n,5);break;case 4:ol(n,10);break;case 3:ol(n,6);break;default:ol(n,2)}}function Qw(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ol(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Yi(n.pb,n);t||(t=new Fd("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||a_(t,"https"),Ud(t)),function iD(n,e){const t=new Mg;if(jt.Image){const r=new Image;r.onload=vg(c_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=vg(c_,t,r,"TestLoadImage: error",!1,e),r.onabort=vg(c_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=vg(c_,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ps(2);n.H=0,n.h&&n.h.za(e),Jw(n),$d(n)}function Jw(n){if(n.H=0,n.ma=[],n.h){const e=nD(n.i);(0!=e.length||0!=n.j.length)&&(RC(n.ma,e),RC(n.ma,n.j),n.i.i.length=0,wf(n.j),n.j.length=0),n.h.ya()}}function Xw(n,e,t){var r=t instanceof Fd?Ku(t):new Fd(t);if(""!=r.g)e&&(r.g=e+"."+r.g),jw(r,r.m);else{var i=jt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Fd(null);r&&a_(a,r),e&&(a.g=e),i&&jw(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Ln(r,t,e),Ln(r,"VER",n.ra),za(n,r),r}function e0(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wr(t&&n.Ha&&!n.va?new jd({ob:!0}):n.va)).Oa(n.J),e}function t0(){}function Pf(){if(Pd&&!(10<=Number(sA)))throw Error("Environmental error: no available transport.")}function Ks(n,e){ei.call(this),this.g=new $g(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Eg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Eg(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Of(this)}function AA(n){kg.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function xA(){kw.call(this),this.status=1}function Of(n){this.g=n}function Ga(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function n0(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],c=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;c=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(c<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((a=(e=t+((c=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=a+((c=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function Dn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(rt=wr.prototype).Oa=function(n){this.M=n},rt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Lw.g(),this.C=function Ow(n){return n.h||(n.h=n.i())}(this.u?this.u:Lw),this.g.onreadystatechange=Yi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void Zw(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=jt.FormData&&n instanceof jt.FormData,!(0<=xC(bA,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{aD(this),0<this.B&&((this.L=function xM(n){return Pd&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yi(this.ua,this)):this.A=Ng(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Zw(this,a)}},rt.ua=function(){typeof vw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pi(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Pi(this,"complete"),Pi(this,"abort"),d_(this))},rt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),d_(this,!0)),wr.$.N.call(this)},rt.La=function(){this.s||(this.G||this.v||this.l?jg(this):this.kb())},rt.kb=function(){jg(this)},rt.isActive=function(){return!!this.g},rt.da=function(){try{return 2<Ao(this)?this.g.status:-1}catch{return-1}},rt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},rt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),TA(e)}},rt.Ia=function(){return this.m},rt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=$g.prototype).ra=8,rt.H=1,rt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Lg(this,this.l,n);let a=this.s;if(this.U&&(a?(a=OC(a),uA(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zd(this,i,e),Ln(t=Ku(this.I),"RID",n),Ln(t,"CVER",22),this.F&&Ln(t,"X-HTTP-Session-Id",this.F),za(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(Rf(a)))+"&"+e:this.o&&di(t,this.o,a)),Gw(this.i,i),this.bb&&Ln(t,"TYPE","init"),this.P?(Ln(t,"$req",e),Ln(t,"SID","null"),i.aa=!0,i_(i,t,null)):i_(i,t,e),this.H=2}}else 3==this.H&&(n?Hd(this,n):0==this.j.length||IA(this.i)||Hd(this))},rt.Ma=function(){if(this.u=null,Kw(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=bf(Yi(this.jb,this),n)}},rt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ps(10),Nf(this),Kw(this))},rt.ib=function(){null!=this.v&&(this.v=null,Nf(this),il(this),Ps(19))},rt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ps(2)):(this.l.info("Failed to ping google.com"),Ps(1))},rt.isActive=function(){return!!this.h&&this.h.isActive(this)},(rt=t0.prototype).Ba=function(){},rt.Aa=function(){},rt.za=function(){},rt.ya=function(){},rt.isActive=function(){return!0},rt.Va=function(){},Pf.prototype.g=function(n,e){return new Ks(n,e)},li(Ks,ei),Ks.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ps(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Xw(n,null,n.Y),Qu(n)},Ks.prototype.close=function(){Os(this.g)},Ks.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Nw(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Qu(e)},Ks.prototype.N=function(){this.g.h=null,delete this.j,Os(this.g),delete this.g,Ks.$.N.call(this)},li(AA,kg),li(xA,kw),li(Of,t0),Of.prototype.Ba=function(){Pi(this.g,"a")},Of.prototype.Aa=function(n){Pi(this.g,new AA(n))},Of.prototype.za=function(n){Pi(this.g,new xA)},Of.prototype.ya=function(){Pi(this.g,"b")},li(Ga,function RA(){this.blockSize=-1}),Ga.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ga.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)n0(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){n0(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){n0(this,r),i=0;break}}this.h=i,this.i+=e},Ga.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var NA={};function r0(n){return-128<=n&&128>n?function iA(n,e){var t=NA;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Dn([0|e],0>e?-1:0)}):new Dn([0|n],0>n?-1:0)}function Wa(n){if(isNaN(n)||!isFinite(n))return al;if(0>n)return Oi(Wa(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Wd;return new Dn(e,0)}var Wd=4294967296,al=r0(0),kf=r0(1),s0=r0(16777216);function Ys(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Qs(n){return-1==n.h}function Oi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Dn(t,~n.h).add(kf)}function ul(n,e){return n.add(Oi(e))}function f_(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function zg(n,e){this.g=n,this.h=e}function p_(n,e){if(Ys(e))throw Error("division by zero");if(Ys(n))return new zg(al,al);if(Qs(n))return e=p_(Oi(n),e),new zg(Oi(e.g),Oi(e.h));if(Qs(e))return e=p_(n,Oi(e)),new zg(Oi(e.g),e.h);if(30<n.g.length){if(Qs(n)||Qs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=kf,r=e;0>=r.X(n);)t=cD(t),r=cD(r);var i=cl(t,1),a=cl(r,1);for(r=cl(r,2),t=cl(t,2);!Ys(r);){var c=a.add(r);0>=c.X(n)&&(i=i.add(t),a=c),r=cl(r,1),t=cl(t,1)}return e=ul(n,i.R(e)),new zg(i,e)}for(i=al;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(a=Wa(t)).R(e);Qs(c)||0<c.X(n);)c=(a=Wa(t-=r)).R(e);Ys(a)&&(a=kf),i=i.add(a),n=ul(n,c)}return new zg(i,n)}function cD(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Dn(t,n.h)}function cl(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new Dn(i,n.h)}(rt=Dn.prototype).ea=function(){if(Qs(this))return-Oi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Wd+r)*e,e*=Wd}return n},rt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ys(this))return"0";if(Qs(this))return"-"+Oi(this).toString(n);for(var e=Wa(Math.pow(n,6)),t=this,r="";;){var i=p_(t,e).g,a=((0<(t=ul(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ys(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},rt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},rt.X=function(n){return Qs(n=ul(this,n))?-1:Ys(n)?0:1},rt.abs=function(){return Qs(this)?Oi(this):this},rt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),c=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(a&=65535)}return new Dn(t,-2147483648&t[t.length-1]?-1:0)},rt.R=function(n){if(Ys(this)||Ys(n))return al;if(Qs(this))return Qs(n)?Oi(this).R(Oi(n)):Oi(Oi(this).R(n));if(Qs(n))return Oi(this.R(Oi(n)));if(0>this.X(s0)&&0>n.X(s0))return Wa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,c=65535&this.D(r),f=n.D(i)>>>16,y=65535&n.D(i);t[2*r+2*i]+=c*y,f_(t,2*r+2*i),t[2*r+2*i+1]+=a*y,f_(t,2*r+2*i+1),t[2*r+2*i+1]+=c*f,f_(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,f_(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Dn(t,0)},rt.gb=function(n){return p_(this,n).h},rt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Dn(t,this.h&n.h)},rt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Dn(t,this.h|n.h)},rt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Dn(t,this.h^n.h)},Pf.prototype.createWebChannel=Pf.prototype.g,Ks.prototype.send=Ks.prototype.u,Ks.prototype.open=Ks.prototype.m,Ks.prototype.close=Ks.prototype.close,t_.NO_ERROR=0,t_.TIMEOUT=8,t_.HTTP_ERROR=6,WC.COMPLETE="complete",qC.EventType=Og,Og.OPEN="a",Og.CLOSE="b",Og.ERROR="c",Og.MESSAGE="d",ei.prototype.listen=ei.prototype.O,wr.prototype.listenOnce=wr.prototype.P,wr.prototype.getLastError=wr.prototype.Sa,wr.prototype.getLastErrorCode=wr.prototype.Ia,wr.prototype.getStatus=wr.prototype.da,wr.prototype.getResponseJson=wr.prototype.Wa,wr.prototype.getResponseText=wr.prototype.ja,wr.prototype.send=wr.prototype.ha,wr.prototype.setWithCredentials=wr.prototype.Oa,Ga.prototype.digest=Ga.prototype.l,Ga.prototype.reset=Ga.prototype.reset,Ga.prototype.update=Ga.prototype.j,Dn.prototype.add=Dn.prototype.add,Dn.prototype.multiply=Dn.prototype.R,Dn.prototype.modulo=Dn.prototype.gb,Dn.prototype.compare=Dn.prototype.X,Dn.prototype.toNumber=Dn.prototype.ea,Dn.prototype.toString=Dn.prototype.toString,Dn.prototype.getBits=Dn.prototype.D,Dn.fromNumber=Wa,Dn.fromString=function h_(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Oi(h_(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Wa(Math.pow(e,8)),r=al,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+a),e);8>a?(a=Wa(Math.pow(e,a)),r=r.R(a).add(Wa(c))):r=(r=r.R(t)).add(Wa(c))}return r};var g_=bo.createWebChannelTransport=function(){return new Pf},m_=bo.getStatEventTarget=function(){return Xy()},lD=bo.ErrorCode=t_,MA=bo.EventType=WC,PA=bo.Event=el,y_=bo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},OA=bo.FetchXmlHttpFactory=jd,Gg=bo.WebChannel=qC,kA=bo.XhrIo=wr,LA=bo.Md5=Ga,qd=bo.Integer=Dn;const o0="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let Lf="9.22.1";const ll=new Xo.Yd("@firebase/firestore");function a0(){return ll.logLevel}function Ve(n,...e){if(ll.logLevel<=Xo.in.DEBUG){const t=e.map(Ff);ll.debug(`Firestore (${Lf}): ${n}`,...t)}}function hr(n,...e){if(ll.logLevel<=Xo.in.ERROR){const t=e.map(Ff);ll.error(`Firestore (${Lf}): ${n}`,...t)}}function xo(n,...e){if(ll.logLevel<=Xo.in.WARN){const t=e.map(Ff);ll.warn(`Firestore (${Lf}): ${n}`,...t)}}function Ff(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${Lf}) INTERNAL ASSERTION FAILED: `+n;throw hr(e),new Error(e)}function ft(n,e){n||at()}function tt(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Wg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class fD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class UA{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let c=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Er,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const E=c;e.enqueueRetryable((0,ye.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},y=E=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(E=>y(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Er)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft("string"==typeof r.accessToken),new Wg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ft(null===e||"string"==typeof e),new ti(e)}}class VA{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ti.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class BA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new VA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class __{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pD{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.T;return this.T=a.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ft("string"==typeof t.token),this.T=t.token,new __(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function mD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class yD{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=mD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function Zd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function u0(n){return n+"\0"}class Fn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fn.fromMillis(Date.now())}static fromDate(e){return Fn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Fn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Fn(0,0))}static max(){return new Et(new Fn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qg{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===qg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends qg{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new an(t)}static emptyPath(){return new an([])}}const c0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends qg{construct(e,t,r){return new Qn(e,t,r)}static isValidIdentifier(e){return c0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Se(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Se(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Se(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(a(),i++)}if(a(),c)throw new Se(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(t)}static emptyPath(){return new Qn([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(an.fromString(e))}static fromName(e){return new Qe(an.fromString(e).popFirst(5))}static empty(){return new Qe(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new an(e.slice()))}}class Zg{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function v_(n){return n.fields.find(e=>2===e.kind)}function dl(n){return n.fields.filter(e=>2!==e.kind)}Zg.UNKNOWN_ID=-1;class Kg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Uf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Uf(0,Js.min())}}function Yg(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(1e9===r?new Fn(t+1,0):new Fn(t,r));return new Js(i,Qe.empty(),e)}function Ju(n){return new Js(n.readTime,n.key,-1)}class Js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Js(Et.min(),Qe.empty(),-1)}static max(){return new Js(Et.max(),Qe.empty(),-1)}}function l0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:kt(n.largestBatchId,e.largestBatchId))}const w_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qa(n){return d0.apply(this,arguments)}function d0(){return d0=(0,ye.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==w_)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),d0.apply(this,arguments)}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let i=0,a=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++a,c&&a===i&&t()},y=>r(y))}),c=!0,a===i&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(i=>i?ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,i)=>{const a=e.length,c=new Array(a);let f=0;for(let y=0;y<a;y++){const E=y;t(e[E]).next(b=>{c[E]=b,++f,f===a&&r(c)},b=>i(b))}})}static doWhile(e,t){return new ne((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class h0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Er,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Qg(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=p0(r.target.error);this.v.reject(new Qg(e,i))}}static open(e,t,r,i){try{return new h0(t,e.transaction(i,r))}catch(a){throw new Qg(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $A(t)}}class Za{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Za.S((0,k.z$)())&&hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Un(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,k.hl)())return!1;if(Za.C())return!0;const e=(0,k.z$)(),t=Za.S(e),r=0<t&&t<10,i=Za.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new Qg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Se(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Se(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Qg(e,f))},a.onupgradeneeded=c=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ye.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const y=h0.open(a.db,e,c?"readonly":"readwrite",r),E=i(y).next(b=>(y.P(),b)).catch(b=>(y.abort(b),ne.reject(b))).toPromise();return E.catch(()=>{}),yield y.R,E}catch(y){const E=y,b="FirebaseError"!==E.name&&f<3;if(Ve("SimpleDb","Transaction failed with error:",E.message,"Retrying:",b),a.close(),!b)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jA{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Un(this.L.delete())}}class Qg extends Se{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xu(n){return"IndexedDbTransactionError"===n.name}class $A{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Un(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Un(this.store.add(e))}get(e){return Un(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Un(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Un(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(c,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ne((a,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ne((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,c,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ne((r,i)=>{t.onerror=a=>{const c=p0(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}W(e,t){const r=[];return new ne((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const y=new jA(f),E=t(f.primaryKey,f.value,y);if(E instanceof ne){const b=E.catch(x=>(y.done(),ne.reject(x)));r.push(b)}y.isDone?i():null===y.K?f.continue():f.continue(y.K)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Un(n){return new ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=p0(r.target.error);t(i)}})}let f0=!1;function p0(n){const e=Za.S((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return f0||(f0=!0,setTimeout(()=>{throw r},0)),r}}return n}class HA{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Xu(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield qa(r)}yield t.et(6e4)}))}}class wD{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ne.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ve("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(f=>{i-=f,r.add(c)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,a)).next(f=>(Ve("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=Ju(a);l0(c,r)>0&&(r=c)}),new Js(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Xs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Vf(n){return null==n}function Bf(n){return 0===n&&1/n==-1/0}function Kd(n){return"number"==typeof n&&Number.isInteger(n)&&!Bf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Qi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=g0(e)),e=zA(n.get(t),e);return g0(e)}function zA(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function g0(n){return n+"\x01\x01"}function Ka(n){const e=n.length;if(ft(e>=2),2===e)return ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&at(),n.charAt(c+1)){case"\x01":const f=n.substring(a,c);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:at()}a=c+2}return new an(r)}const m0=["userId","batchId"];function y0(n,e){return[n,Qi(e)]}function _0(n,e,t){return[n,Qi(e),t]}const ED={},Ya=["prefixPath","collectionGroup","readTime","documentId"],GA=["prefixPath","collectionGroup","documentId"],WA=["collectionGroup","readTime","prefixPath","documentId"],Qa=["canonicalId","targetId"],ta=["targetId","path"],na=["path","targetId"],ID=["collectionId","parent"],CD=["indexId","uid"],qA=["uid","sequenceNumber"],ZA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],KA=["indexId","uid","orderedDocumentKey"],YA=["userId","collectionPath","documentId"],v0=["userId","collectionPath","largestBatchId"],Jg=["userId","collectionGroup","largestBatchId"],DD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],TD=[...DD,"documentOverlays"],bD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SD=bD,AD=[...SD,"indexConfiguration","indexState","indexEntries"];class E_ extends hl{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Or(n,e){const t=tt(n);return Za.M(t.ht,e)}function xD(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ec(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function w0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Nn{constructor(e,t){this.comparator=e,this.root=t||ki.EMPTY}insert(e,t){return new Nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ki.BLACK,null,null))}remove(e){return new Nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ki.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new I_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new I_(this.root,e,this.comparator,!1)}getReverseIterator(){return new I_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new I_(this.root,e,this.comparator,!0)}}class I_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ki{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ki.RED,this.left=i??ki.EMPTY,this.right=a??ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ki(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ki.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}ki.EMPTY=null,ki.RED=!0,ki.BLACK=!1,ki.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ki(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mn{constructor(e){this.comparator=e,this.data=new Nn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xg(this.data.getIterator())}getIteratorFrom(e){return new Xg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mn(this.comparator);return t.data=e,t}}class Xg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yd(n){return n.hasNext()?n.getNext():void 0}class ps{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new ps([])}unionWith(e){let t=new Mn(Qn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ps(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class E0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new E0("Invalid base64 string: "+i):i}}(e);return new Gr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Gr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gr.EMPTY_BYTE_STRING=new Gr("");const ND=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tc(n){if(ft(!!n),"string"==typeof n){let e=0;const t=ND.exec(n);if(ft(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fr(n.seconds),nanos:fr(n.nanos)}}function fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function nc(n){return"string"==typeof n?Gr.fromBase64String(n):Gr.fromUint8Array(n)}function C_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function D_(n){const e=n.mapValue.fields.__previous_value__;return C_(e)?D_(e):e}function em(n){const e=tc(n.mapValue.fields.__local_write_time__.timestampValue);return new Fn(e.seconds,e.nanos)}class QA{constructor(e,t,r,i,a,c,f,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=y,this.useFetchStreams=E}}class fl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}const pl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},T_={nullValue:"NULL_VALUE"};function gl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?C_(n)?4:b0(n)?9007199254740991:10:at()}function Ja(n,e){if(n===e)return!0;const t=gl(n);if(t!==gl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return em(n).isEqual(em(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=tc(r.timestampValue),c=tc(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,nc(n.bytesValue).isEqual(nc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return fr(r.geoPointValue.latitude)===fr(i.geoPointValue.latitude)&&fr(r.geoPointValue.longitude)===fr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return fr(r.integerValue)===fr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=fr(r.doubleValue),c=fr(i.doubleValue);return a===c?Bf(a)===Bf(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Zd(n.arrayValue.values||[],e.arrayValue.values||[],Ja);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(xD(a)!==xD(c))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===c[f]||!Ja(a[f],c[f])))return!1;return!0}(n,e);default:return at()}var i}function tm(n,e){return void 0!==(n.values||[]).find(t=>Ja(t,e))}function ml(n,e){if(n===e)return 0;const t=gl(n),r=gl(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=fr(i.integerValue||i.doubleValue),f=fr(a.integerValue||a.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return MD(n.timestampValue,e.timestampValue);case 4:return MD(em(n),em(e));case 5:return kt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=nc(i),f=nc(a);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),f=a.split("/");for(let y=0;y<c.length&&y<f.length;y++){const E=kt(c[y],f[y]);if(0!==E)return E}return kt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=kt(fr(i.latitude),fr(a.latitude));return 0!==c?c:kt(fr(i.longitude),fr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],f=a.values||[];for(let y=0;y<c.length&&y<f.length;++y){const E=ml(c[y],f[y]);if(E)return E}return kt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===pl.mapValue&&a===pl.mapValue)return 0;if(i===pl.mapValue)return 1;if(a===pl.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),y=a.fields||{},E=Object.keys(y);f.sort(),E.sort();for(let b=0;b<f.length&&b<E.length;++b){const x=kt(f[b],E[b]);if(0!==x)return x;const P=ml(c[f[b]],y[E[b]]);if(0!==P)return P}return kt(f.length,E.length)}(n.mapValue,e.mapValue);default:throw at()}}function MD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return kt(n,e);const t=tc(n),r=tc(e),i=kt(t.seconds,r.seconds);return 0!==i?i:kt(t.nanos,r.nanos)}function jf(n){return I0(n)}function I0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=tc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?nc(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=I0(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${I0(r.fields[f])}`;return a+"}"}(n.mapValue):at();var e}function Qd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function C0(n){return!!n&&"integerValue"in n}function $f(n){return!!n&&"arrayValue"in n}function D0(n){return!!n&&"nullValue"in n}function T0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nm(n){return!!n&&"mapValue"in n}function Hf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ec(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function b0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function PD(n){return"nullValue"in n?T_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Qd(fl.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function OD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Qd(fl.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?pl:at()}function S0(n,e){const t=ml(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function A0(n,e){const t=ml(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!nm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hf(t)}setAll(e){let t=Qn.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=Hf(c):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());nm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ja(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];nm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ec(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new hi(Hf(this.value))}}function yl(n){const e=[];return ec(n.fields,(t,r)=>{const i=new Qn([t]);if(nm(r)){const a=yl(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new ps(e)}class Vn{constructor(e,t,r,i,a,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Vn(e,0,Et.min(),Et.min(),Et.min(),hi.empty(),0)}static newFoundDocument(e,t,r,i){return new Vn(e,1,t,Et.min(),r,i,0)}static newNoDocument(e,t){return new Vn(e,2,t,Et.min(),Et.min(),hi.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,Et.min(),Et.min(),hi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _l{constructor(e,t){this.position=e,this.inclusive=t}}function Jd(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Qe.comparator(Qe.fromName(c.referenceValue),t.key):ml(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function JA(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ja(n.position[t],e.position[t]))return!1;return!0}class vl{constructor(e,t="asc"){this.field=e,this.dir=t}}function RM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class x0{}class Qt extends x0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Ir(e,t,r):"array-contains"===t?new XA(e,r):"in"===t?new P0(e,r):"not-in"===t?new UD(e,r):"array-contains-any"===t?new VD(e,r):new Qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new NM(e,r):new FD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ml(t,this.value)):null!==t&&gl(this.value)===gl(t)&&this.matchesComparison(ml(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Tn extends x0{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Tn(e,t)}matches(e){return Dt(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Dt(n){return"and"===n.op}function R0(n){return"or"===n.op}function N0(n){return kD(n)&&Dt(n)}function kD(n){for(const e of n.filters)if(e instanceof Tn)return!1;return!0}function wl(n){if(n instanceof Qt)return n.field.canonicalString()+n.op.toString()+jf(n.value);if(N0(n))return n.filters.map(e=>wl(e)).join(",");{const e=n.filters.map(t=>wl(t)).join(",");return`${n.op}(${e})`}}function LD(n,e){return n instanceof Qt?(t=n,(r=e)instanceof Qt&&t.op===r.op&&t.field.isEqual(r.field)&&Ja(t.value,r.value)):n instanceof Tn?function(t,r){return r instanceof Tn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&LD(a,r.filters[c]),!0)}(n,e):void at();var t,r}function rm(n,e){const t=n.filters.concat(e);return Tn.create(t,n.op)}function im(n){return n instanceof Qt?`${(e=n).field.canonicalString()} ${e.op} ${jf(e.value)}`:n instanceof Tn?function(e){return e.op.toString()+" {"+e.getFilters().map(im).join(" ,")+"}"}(n):"Filter";var e}class Ir extends Qt{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class NM extends Qt{constructor(e,t){super(e,"in",t),this.keys=M0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class FD extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=M0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function M0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class XA extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $f(t)&&tm(t.arrayValue,this.value)}}class P0 extends Qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tm(this.value.arrayValue,t)}}class UD extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(tm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tm(this.value.arrayValue,t)}}class VD extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$f(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tm(this.value.arrayValue,r))}}class BD{constructor(e,t=null,r=[],i=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=f,this.dt=null}}function O0(n,e=null,t=[],r=[],i=null,a=null,c=null){return new BD(n,e,t,r,i,a,c)}function Xd(n){const e=tt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>wl(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Vf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jf(r)).join(",")),e.dt=t}return e.dt}function sm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!RM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LD(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JA(n.startAt,e.startAt)&&JA(n.endAt,e.endAt)}function El(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function S_(n,e){return n.filters.filter(t=>t instanceof Qt&&t.field.isEqual(e))}function jD(n,e,t){let r=T_,i=!0;for(const a of S_(n,e)){let c=T_,f=!0;switch(a.op){case"<":case"<=":c=PD(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,f=!1;break;case"!=":case"not-in":c=T_}S0({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];S0({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function $D(n,e,t){let r=pl,i=!0;for(const a of S_(n,e)){let c=pl,f=!0;switch(a.op){case">=":case">":c=OD(a.value),f=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,f=!1;break;case"!=":case"not-in":c=pl}A0({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];A0({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Ro{constructor(e,t=null,r=[],i=[],a=null,c="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=y,this.wt=null,this._t=null}}function k0(n,e,t,r,i,a,c,f){return new Ro(n,e,t,r,i,a,c,f)}function eh(n){return new Ro(n)}function L0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function F0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Il(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function th(n){return null!==n.collectionGroup}function nh(n){const e=tt(n);if(null===e.wt){e.wt=[];const t=Il(e),r=F0(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new vl(t)),e.wt.push(new vl(Qn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new vl(Qn.keyField(),a))}}}return e.wt}function gs(n){const e=tt(n);if(!e._t)if("F"===e.limitType)e._t=O0(e.path,e.collectionGroup,nh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of nh(e))t.push(new vl(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new _l(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new _l(e.startAt.position,e.startAt.inclusive):null;e._t=O0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function U0(n,e){e.getFirstInequalityField(),Il(n);const t=n.filters.concat([e]);return new Ro(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function om(n,e,t){return new Ro(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zf(n,e){return sm(gs(n),gs(e))&&n.limitType===e.limitType}function V0(n){return`${Xd(gs(n))}|lt:${n.limitType}`}function B0(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>im(r)).join(", ")}]`),Vf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jf(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jf(r)).join(",")),`Target(${t})`}(gs(n))}; limitType=${n.limitType})`}function Gf(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of nh(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const f=Jd(i,a,c);return i.inclusive?f<=0:f<0}(t.startAt,nh(t),r)||t.endAt&&!function(i,a,c){const f=Jd(i,a,c);return i.inclusive?f>=0:f>0}(t.endAt,nh(t),r)));var t,r}function HD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zD(n){return(e,t)=>{let r=!1;for(const i of nh(n)){const a=MM(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function MM(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(i,a,c){const f=a.data.field(i),y=c.data.field(i);return null!==f&&null!==y?ml(f,y):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}class Cl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ec(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return w0(this.inner)}size(){return this.innerSize}}const PM=new Nn(Qe.comparator);function eo(){return PM}const j0=new Nn(Qe.comparator);function Dl(...n){let e=j0;for(const t of n)e=e.insert(t.key,t);return e}function GD(n){let e=j0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xa(){return rc()}function $0(){return rc()}function rc(){return new Cl(n=>n.toString(),(n,e)=>n.isEqual(e))}const ex=new Nn(Qe.comparator),tx=new Mn(Qe.comparator);function zt(...n){let e=tx;for(const t of n)e=e.add(t);return e}const nx=new Mn(kt);function WD(){return nx}function qD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bf(e)?"-0":e}}function H0(n){return{integerValue:""+n}}function ZD(n,e){return Kd(e)?H0(e):qD(n,e)}class A_{constructor(){this._=void 0}}function am(n,e,t){return n instanceof Wf?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&C_(i)&&(i=D_(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Tl?KD(n,e):n instanceof bl?YD(n,e):function(r,i){const a=z0(r,i),c=QD(a)+QD(r.gt);return C0(a)&&C0(r.gt)?H0(c):qD(r.serializer,c)}(n,e)}function rx(n,e,t){return n instanceof Tl?KD(n,e):n instanceof bl?YD(n,e):t}function z0(n,e){return n instanceof Sl?C0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Wf extends A_{}class Tl extends A_{constructor(e){super(),this.elements=e}}function KD(n,e){const t=G0(e);for(const r of n.elements)t.some(i=>Ja(i,r))||t.push(r);return{arrayValue:{values:t}}}class bl extends A_{constructor(e){super(),this.elements=e}}function YD(n,e){let t=G0(e);for(const r of n.elements)t=t.filter(i=>!Ja(i,r));return{arrayValue:{values:t}}}class Sl extends A_{constructor(e,t){super(),this.serializer=e,this.gt=t}}function QD(n){return fr(n.integerValue||n.doubleValue)}function G0(n){return $f(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qf{constructor(e,t){this.field=e,this.transform=t}}class sx{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class x_{}function W0(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new rh(n.key,Jn.none()):new Kf(n.key,n.data,Jn.none());{const t=n.data,r=hi.empty();let i=new Mn(Qn.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new ic(n.key,r,new ps(i.toArray()),Jn.none())}}function ox(n,e,t){n instanceof Kf?function(r,i,a){const c=r.value.clone(),f=eT(r.fieldTransforms,i,a.transformResults);c.setAll(f),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ic?function(r,i,a){if(!Zf(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=eT(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(XD(r)),f.setAll(c),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function um(n,e,t,r){return n instanceof Kf?function(i,a,c,f){if(!Zf(i.precondition,a))return c;const y=i.value.clone(),E=q0(i.fieldTransforms,f,a);return y.setAll(E),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof ic?function(i,a,c,f){if(!Zf(i.precondition,a))return c;const y=q0(i.fieldTransforms,f,a),E=a.data;return E.setAll(XD(i)),E.setAll(y),a.convertToFoundDocument(a.version,E).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(c=t,Zf(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function ax(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=z0(r.transform,i||null);null!=a&&(null===t&&(t=hi.empty()),t.set(r.field,a))}return t||null}function JD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Zd(t,r,(i,a)=>function ix(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Tl&&r instanceof Tl||t instanceof bl&&r instanceof bl?Zd(t.elements,r.elements,Ja):t instanceof Sl&&r instanceof Sl?Ja(t.gt,r.gt):t instanceof Wf&&r instanceof Wf);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Kf extends x_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ic extends x_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function XD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function eT(n,e,t){const r=new Map;ft(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,f=e.data.field(a.field);r.set(a.field,rx(c,f,t[i]))}return r}function q0(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,am(a,c,e))}return r}class rh extends x_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z0 extends x_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class K0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&ox(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=um(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=um(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$0();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(i.key)?null:f;const y=W0(c,f);null!==y&&r.set(i.key,y),c.isValidDocument()||c.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zt())}isEqual(e){return this.batchId===e.batchId&&Zd(this.mutations,e.mutations,(t,r)=>JD(t,r))&&Zd(this.baseMutations,e.baseMutations,(t,r)=>JD(t,r))}}class R_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ft(e.mutations.length===r.length);let i=ex;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new R_(e,t,r,i)}}class Y0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cx{constructor(e,t){this.count=e,this.unchangedNames=t}}var Cr,nn;function Q0(n){switch(n){default:return at();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function N_(n){if(void 0===n)return hr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Cr.OK:return ue.OK;case Cr.CANCELLED:return ue.CANCELLED;case Cr.UNKNOWN:return ue.UNKNOWN;case Cr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Cr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Cr.INTERNAL:return ue.INTERNAL;case Cr.UNAVAILABLE:return ue.UNAVAILABLE;case Cr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Cr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Cr.NOT_FOUND:return ue.NOT_FOUND;case Cr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Cr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Cr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Cr.ABORTED:return ue.ABORTED;case Cr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Cr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Cr.DATA_LOSS:return ue.DATA_LOSS;default:return at()}}(nn=Cr||(Cr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class J0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return M_}static getOrCreateInstance(){return null===M_&&(M_=new J0),M_}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let M_=null;function P_(){return new TextEncoder}const lx=new qd([4294967295,4294967295],0);function tT(n){const e=P_().encode(n),t=new LA;return t.update(e),new Uint8Array(t.digest())}function ih(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new qd([t,r],0),new qd([i,a],0)]}class O_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cm(`Invalid padding: ${t}`);if(r<0)throw new cm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new cm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new cm(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=qd.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(qd.fromNumber(r)));return 1===i.compare(lx)&&(i=new qd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=tT(e),[r,i]=ih(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new O_(a,i,t);return r.forEach(f=>c.insert(f)),c}insert(e){if(0===this.It)return;const t=tT(e),[r,i]=ih(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class cm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class k_{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,sh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new k_(Et.min(),i,new Nn(kt),eo(),zt())}}class sh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sh(r,t,zt(),zt(),zt())}}class Yf{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class nT{constructor(e,t){this.targetId=e,this.Vt=t}}class X0{constructor(e,t,r=Gr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class eE{constructor(){this.St=0,this.Dt=L_(),this.Ct=Gr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=zt(),t=zt(),r=zt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new sh(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=L_()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class dx{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=eo(),this.zt=tE(),this.Wt=new Nn(kt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const c=a.target;if(El(c))if(0===i){const f=new Qe(c.path);this.Yt(r,f,Vn.newNoDocument(f,Et.min()))}else ft(1===i);else{const f=this.ie(r);if(f!==i){const y=this.re(e,f);0!==y&&(this.ee(r),this.Wt=this.Wt.insert(r,2===y?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=J0.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(E,b,x){var P,B,Y,pe,xe,ut;const It={localCacheCount:b,existenceFilterCount:x.count},yt=x.unchangedNames;return yt&&(It.bloomFilter={applied:0===E,hashCount:null!==(P=yt?.hashCount)&&void 0!==P?P:0,bitmapLength:null!==(pe=null===(Y=null===(B=yt?.bits)||void 0===B?void 0:B.bitmap)||void 0===Y?void 0:Y.length)&&void 0!==pe?pe:0,padding:null!==(ut=null===(xe=yt?.bits)||void 0===xe?void 0:xe.padding)&&void 0!==ut?ut:0}),It}(y,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:c=0},hashCount:f=0}=r;let y,E;try{y=nc(a).toUint8Array()}catch(b){if(b instanceof E0)return xo("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{E=new O_(y,c,f)}catch(b){return xo(b instanceof cm?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===E.It?1:i!==t-this.oe(e.targetId,E)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const c=this.Gt.ue(),f=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,c)=>{const f=this.se(c);if(f){if(a.current&&El(f.target)){const y=new Qe(f.target.path);null!==this.jt.get(y)||this.ae(c,y)||this.Yt(c,y,Vn.newNoDocument(y,e))}a.Mt&&(t.set(c,a.Ot()),a.Ft())}});let r=zt();this.zt.forEach((a,c)=>{let f=!0;c.forEachWhile(y=>{const E=this.se(y);return!E||"TargetPurposeLimboResolution"===E.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,c)=>c.setReadTime(e));const i=new k_(e,t,this.Wt,this.jt,r);return this.jt=eo(),this.zt=tE(),this.Wt=new Nn(kt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new eE,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Mn(kt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new eE),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function tE(){return new Nn(Qe.comparator)}function L_(){return new Nn(Qe.comparator)}const rT={asc:"ASCENDING",desc:"DESCENDING"},iT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sT={and:"AND",or:"OR"};class oT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nE(n,e){return n.useProto3Json||Vf(e)?e:{value:e}}function Qf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function hx(n,e){return Qf(n,e.toTimestamp())}function Dr(n){return ft(!!n),Et.fromTimestamp(function(e){const t=tc(e);return new Fn(t.seconds,t.nanos)}(n))}function uT(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function rE(n){const e=an.fromString(n);return ft(yT(e)),e}function lm(n,e){return uT(n.databaseId,e.path)}function eu(n,e){const t=rE(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(dT(t))}function cT(n,e){return uT(n.databaseId,e)}function lT(n){const e=rE(n);return 4===e.length?an.emptyPath():dT(e)}function dm(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dT(n){return ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function iE(n,e,t){return{name:lm(n,e),fields:t.value.mapValue.fields}}function sE(n,e,t){const r=eu(n,e.name),i=Dr(e.updateTime),a=e.createTime?Dr(e.createTime):Et.min(),c=new hi({mapValue:{fields:e.fields}}),f=Vn.newFoundDocument(r,i,a,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function hm(n,e){let t;if(e instanceof Kf)t={update:iE(n,e.key,e.value)};else if(e instanceof rh)t={delete:lm(n,e.key)};else if(e instanceof ic)t={update:iE(n,e.key,e.data),updateMask:yx(e.fieldMask)};else{if(!(e instanceof Z0))return at();t={verify:lm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Wf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Tl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof bl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Sl)return{fieldPath:a.field.canonicalString(),increment:c.gt};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:hx(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function oE(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Jn.updateTime(Dr(i.updateTime)):void 0!==i.exists?Jn.exists(i.exists):Jn.none():Jn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let f=null;"setToServerValue"in c?(ft("REQUEST_TIME"===c.setToServerValue),f=new Wf):"appendMissingElements"in c?f=new Tl(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new bl(c.removeAllFromArray.values||[]):"increment"in c?f=new Sl(a,c.increment):at();const y=Qn.fromServerFormat(c.fieldPath);return new qf(y,f)}(n,i)):[];var i;if(e.update){const i=eu(n,e.update.name),a=new hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ps((e.updateMask.fieldPaths||[]).map(E=>Qn.fromServerFormat(E)));return new ic(i,a,c,t,r)}return new Kf(i,a,t,r)}if(e.delete){const i=eu(n,e.delete);return new rh(i,t)}if(e.verify){const i=eu(n,e.verify);return new Z0(i,t)}return at()}function hT(n,e){return{documents:[cT(n,e.path)]}}function aE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=cT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=cT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0!==y.length)return mx(Tn.create(y,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(E=>{return{field:Al((b=E).field),direction:pT(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=nE(n,e.limit);var f,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function Jf(n){let e=lT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ft(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const x=uE(b);return x instanceof Tn&&N0(x)?x.getFilters():[x]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(b=>{return new vl(Xf((x=b).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let f=null;t.limit&&(f=function(b){let x;return x="object"==typeof b?b.value:b,Vf(x)?null:x}(t.limit));let y=null;var b;t.startAt&&(y=new _l((b=t.startAt).values||[],!!b.before));let E=null;return t.endAt&&(E=function(b){return new _l(b.values||[],!b.before)}(t.endAt)),k0(e,i,c,a,f,"F",y,E)}function uE(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Xf(e.unaryFilter.field);return Qt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Xf(e.unaryFilter.field);return Qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xf(e.unaryFilter.field);return Qt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Xf(e.unaryFilter.field);return Qt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return at()}}(n):void 0!==n.fieldFilter?Qt.create(Xf((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Tn.create(e.compositeFilter.filters.map(t=>uE(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return at()}}(e.compositeFilter.op))}(n):at();var e}function pT(n){return rT[n]}function gT(n){return iT[n]}function mT(n){return sT[n]}function Al(n){return{fieldPath:n.canonicalString()}}function Xf(n){return Qn.fromServerFormat(n.fieldPath)}function mx(n){return n instanceof Qt?function(e){if("=="===e.op){if(T0(e.value))return{unaryFilter:{field:Al(e.field),op:"IS_NAN"}};if(D0(e.value))return{unaryFilter:{field:Al(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(T0(e.value))return{unaryFilter:{field:Al(e.field),op:"IS_NOT_NAN"}};if(D0(e.value))return{unaryFilter:{field:Al(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Al(e.field),op:gT(e.op),value:e.value}}}(n):n instanceof Tn?function(e){const t=e.getFilters().map(r=>mx(r));return 1===t.length?t[0]:{compositeFilter:{op:mT(e.op),filters:t}}}(n):at()}function yx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class sc{constructor(e,t,r,i,a=Et.min(),c=Et.min(),f=Gr.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=y}withSequenceNumber(e){return new sc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _T{constructor(e){this.fe=e}}function ep(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:F_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:lm(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Qf(i,a.version.toTimestamp()),createTime:Qf(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:oc(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:oc(e.version)}}var i,a;return r}function F_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function oc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ji(n){const e=new Fn(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function oh(n,e){const t=(e.baseMutations||[]).map(a=>oE(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>oE(n.fe,a)),i=Fn.fromMillis(e.localWriteTimeMs);return new K0(e.batchId,i,t,r)}function ah(n){const e=Ji(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ji(n.lastLimboFreeSnapshotVersion):Et.min();let r;var i;return void 0!==n.query.documents?(ft(1===(i=n.query).documents.length),r=gs(eh(lT(i.documents[0])))):r=gs(Jf(n.query)),new sc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Gr.fromBase64String(n.resumeToken))}function tp(n,e){const t=oc(e.snapshotVersion),r=oc(e.lastLimboFreeSnapshotVersion);let i;i=El(e.target)?hT(n.fe,e.target):aE(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xd(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function cE(n){const e=Jf({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?om(e,e.limit,"L"):e}function lE(n,e){return new Y0(e.largestBatchId,oE(n.fe,e.overlayMutation))}function vT(n,e){const t=e.path.lastSegment();return[n,Qi(e.path.popLast()),t]}function fm(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:oc(r.readTime),documentKey:Qi(r.documentKey.path),largestBatchId:r.largestBatchId}}class wT{getBundleMetadata(e,t){return ET(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ji(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return ET(e).put({bundleId:(r=t).id,createTime:oc(Dr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return IT(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:cE(i.bundledQuery),readTime:Ji(i.readTime)};var i})}saveNamedQuery(e,t){return IT(e).put({name:(r=t).name,readTime:oc(Dr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function ET(n){return Or(n,"bundles")}function IT(n){return Or(n,"namedQueries")}class np{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new np(e,t.uid||"")}getOverlay(e,t){return pm(e).get(vT(this.userId,t)).next(r=>r?lE(this.serializer,r):null)}getOverlays(e,t){const r=Xa();return ne.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const f=new Y0(t,c);i.push(this.we(e,f))}),ne.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Qi(c.getCollectionPath())));const a=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(pm(e).J("collectionPathOverlayIndex",f))}),ne.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Xa(),a=Qi(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return pm(e).j("collectionPathOverlayIndex",c).next(f=>{for(const y of f){const E=lE(this.serializer,y);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Xa();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pm(e).X({index:"collectionGroupOverlayIndex",range:f},(y,E,b)=>{const x=lE(this.serializer,E);a.size()<i||x.largestBatchId===c?(a.set(x.getKey(),x),c=x.largestBatchId):b.done()}).next(()=>a)}we(e,t){return pm(e).put(function(r,i,a){const[c,f,y]=vT(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:hm(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function pm(n){return Or(n,"documentOverlays")}class uh{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(fr(e.integerValue));else if("doubleValue"in e){const r=fr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Bf(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(nc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?b0(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):at()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function CT(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function DT(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=CT(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}uh.Ve=new uh;class vx{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=DT(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=DT(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class TT{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class U_{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class gm{constructor(){this.je=new vx,this.ze=new TT(this.je),this.We=new U_(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class ch{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ch(this.indexId,this.documentKey,this.arrayValue,r)}}function ac(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=dE(n.arrayValue,e.arrayValue),0!==t?t:(t=dE(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function dE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class hE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ft(e.collectionGroup===this.collectionId);const t=v_(e);if(void 0!==t&&!this.en(t))return!1;const r=dl(e);let i=0,a=0;for(;i<r.length&&this.en(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ze){const c=r[i];if(!this.nn(this.Ze,c)||!this.sn(this.Ye[a++],c))return!1;++i}for(;i<r.length;++i)if(a>=this.Ye.length||!this.sn(this.Ye[a++],r[i]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function fE(n){var e,t;if(ft(n instanceof Qt||n instanceof Tn),n instanceof Qt){if(n instanceof P0){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>Qt.create(n.field,"==",a)))||[];return Tn.create(i,"or")}return n}const r=n.filters.map(i=>fE(i));return Tn.create(r,n.op)}function wx(n){if(0===n.getFilters().length)return[];const e=pE(fE(n));return ft(bT(e)),V_(e)||B_(e)?[e]:e.getFilters()}function V_(n){return n instanceof Qt}function B_(n){return n instanceof Tn&&N0(n)}function bT(n){return V_(n)||B_(n)||function(e){if(e instanceof Tn&&R0(e)){for(const t of e.getFilters())if(!V_(t)&&!B_(t))return!1;return!0}return!1}(n)}function pE(n){if(ft(n instanceof Qt||n instanceof Tn),n instanceof Qt)return n;if(1===n.filters.length)return pE(n.filters[0]);const e=n.filters.map(r=>pE(r));let t=Tn.create(e,n.op);return t=ym(t),bT(t)?t:(ft(t instanceof Tn),ft(Dt(t)),ft(t.filters.length>1),t.filters.reduce((r,i)=>mm(r,i)))}function mm(n,e){let t;return ft(n instanceof Qt||n instanceof Tn),ft(e instanceof Qt||e instanceof Tn),t=n instanceof Qt?e instanceof Qt?Tn.create([n,e],"and"):j_(n,e):e instanceof Qt?j_(e,n):function(r,i){if(ft(r.filters.length>0&&i.filters.length>0),Dt(r)&&Dt(i))return rm(r,i.getFilters());const a=R0(r)?r:i,c=R0(r)?i:r,f=a.filters.map(y=>mm(y,c));return Tn.create(f,"or")}(n,e),ym(t)}function j_(n,e){if(Dt(e))return rm(e,n.getFilters());{const t=e.filters.map(r=>mm(n,r));return Tn.create(t,"or")}}function ym(n){if(ft(n instanceof Qt||n instanceof Tn),n instanceof Qt)return n;const e=n.getFilters();if(1===e.length)return ym(e[0]);if(kD(n))return n;const t=e.map(i=>ym(i)),r=[];return t.forEach(i=>{i instanceof Qt?r.push(i):i instanceof Tn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Tn.create(r,n.op)}class gE{constructor(){this.rn=new _m}addToCollectionParentIndex(e,t){return this.rn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Js.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class _m{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mn(an.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mn(an.comparator)).toArray()}}const $_=new Uint8Array(0);class Ex{constructor(e,t){this.user=e,this.databaseId=t,this.on=new _m,this.un=new Cl(r=>Xd(r),(r,i)=>sm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Qi(i)};return ST(e).put(a)}return ne.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[u0(t),""],!1,!0);return ST(e).j(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Ka(c.parent))}return r})}addFieldIndex(e,t){const r=wm(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=lh(e);return a.next(f=>{c.put(fm(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=wm(e),i=lh(e),a=vm(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=vm(e);let i=!0;const a=new Map;return ne.forEach(this.cn(t),c=>this.an(e,c).next(f=>{i&&(i=!!f),a.set(c,f)})).next(()=>{if(i){let c=zt();const f=[];return ne.forEach(a,(y,E)=>{var b;Ve("IndexedDbIndexManager",`Using index ${b=y,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(yt=>`${yt.fieldPath}:${yt.kind}`).join(",")}`} to execute ${Xd(t)}`);const x=function(yt,Mt){const qt=v_(Mt);if(void 0===qt)return null;for(const cn of S_(yt,qt.fieldPath))switch(cn.op){case"array-contains-any":return cn.value.arrayValue.values||[];case"array-contains":return[cn.value]}return null}(E,y),P=function(yt,Mt){const qt=new Map;for(const cn of dl(Mt))for(const Ls of S_(yt,cn.fieldPath))switch(Ls.op){case"==":case"in":qt.set(cn.fieldPath.canonicalString(),Ls.value);break;case"not-in":case"!=":return qt.set(cn.fieldPath.canonicalString(),Ls.value),Array.from(qt.values())}return null}(E,y),B=function(yt,Mt){const qt=[];let cn=!0;for(const Ls of dl(Mt)){const ry=0===Ls.kind?jD(yt,Ls.fieldPath,yt.startAt):$D(yt,Ls.fieldPath,yt.startAt);qt.push(ry.value),cn&&(cn=ry.inclusive)}return new _l(qt,cn)}(E,y),Y=function(yt,Mt){const qt=[];let cn=!0;for(const Ls of dl(Mt)){const ry=0===Ls.kind?$D(yt,Ls.fieldPath,yt.endAt):jD(yt,Ls.fieldPath,yt.endAt);qt.push(ry.value),cn&&(cn=ry.inclusive)}return new _l(qt,cn)}(E,y),pe=this.hn(y,E,B),xe=this.hn(y,E,Y),ut=this.ln(y,E,P),It=this.fn(y.indexId,x,pe,B.inclusive,xe,Y.inclusive,ut);return ne.forEach(It,yt=>r.H(yt,t.limit).next(Mt=>{Mt.forEach(qt=>{const cn=Qe.fromSegments(qt.documentKey);c.has(cn)||(c=c.add(cn),f.push(cn))})}))}).next(()=>f)}return ne.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:wx(Tn.create(e.filters,"and")).map(r=>O0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,c,f){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),E=y/(null!=t?t.length:1),b=[];for(let x=0;x<y;++x){const P=t?this.dn(t[x/E]):$_,B=this.wn(e,P,r[x%E],i),Y=this._n(e,P,a[x%E],c),pe=f.map(xe=>this.wn(e,P,xe,!0));b.push(...this.createRange(B,Y,pe))}return b}wn(e,t,r,i){const a=new ch(e,Qe.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new ch(e,Qe.empty(),t,r);return i?a.Je():a}an(e,t){const r=new hE(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const f of a)r.tn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return ne.forEach(i,a=>this.an(e,a).next(c=>{c?0!==r&&c.fields.length<function(f){let y=new Mn(Qn.comparator),E=!1;for(const b of f.filters)for(const x of b.getFlattenedFilters())x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?E=!0:y=y.add(x.field));for(const b of f.orderBy)b.field.isKeyField()||(y=y.add(b.field));return y.size+(E?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new gm;for(const i of dl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.He(i.kind);uh.Ve._e(a,c)}return r.Qe()}dn(e){const t=new gm;return uh.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new gm;return uh.Ve._e(Qd(this.databaseId,t),r.He(function(i){const a=dl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new gm);let a=0;for(const c of dl(e)){const f=r[a++];for(const y of i)if(this.yn(t,c.fieldPath)&&$f(f))i=this.pn(i,c,f);else{const E=y.He(c.kind);uh.Ve._e(f,E)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const f of i){const y=new gm;y.seed(f.Qe()),uh.Ve._e(c,y.He(t.kind)),a.push(y)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof Qt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=wm(e),i=lh(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const c=[];return ne.forEach(a,f=>i.get([f.indexId,this.uid]).next(y=>{c.push(function(E,b){const x=b?new Uf(b.sequenceNumber,new Js(Ji(b.readTime),new Qe(Ka(b.documentKey)),b.largestBatchId)):Uf.empty(),P=E.fields.map(([B,Y])=>new Kg(Qn.fromServerFormat(B),Y));return new Zg(E.indexId,E.collectionGroup,P,x)}(f,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=wm(e),a=lh(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ne.forEach(f,y=>a.put(fm(y.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?ne.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ne.forEach(f,y=>this.En(e,i,y).next(E=>{const b=this.An(a,y);return E.isEqual(b)?ne.resolve():this.vn(e,a,y,E,b)}))))})}Rn(e,t,r,i){return vm(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return vm(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=vm(e);let a=new Mn(ac);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,f)=>{a=a.add(new ch(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new Mn(ac);const i=this.mn(t,e);if(null==i)return r;const a=v_(t);if(null!=a){const c=e.data.field(a.fieldPath);if($f(c))for(const f of c.arrayValue.values||[])r=r.add(new ch(t.indexId,e.key,this.dn(f),i))}else r=r.add(new ch(t.indexId,e.key,$_,i));return r}vn(e,t,r,i,a){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,y,E,b,x){const P=f.getIterator(),B=y.getIterator();let Y=Yd(P),pe=Yd(B);for(;Y||pe;){let xe=!1,ut=!1;if(Y&&pe){const It=E(Y,pe);It<0?ut=!0:It>0&&(xe=!0)}else null!=Y?ut=!0:xe=!0;xe?(b(pe),pe=Yd(B)):ut?(x(Y),Y=Yd(P)):(Y=Yd(P),pe=Yd(B))}}(i,a,ac,f=>{c.push(this.Rn(e,t,r,f))},f=>{c.push(this.Pn(e,t,r,f))}),ne.waitFor(c)}Tn(e){let t=1;return lh(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>ac(c,f)).filter((c,f,y)=>!f||0!==ac(c,y[f-1]));const i=[];i.push(e);for(const c of r){const f=ac(c,e),y=ac(c,t);if(0===f)i[0]=e.Je();else if(f>0&&y<0)i.push(c),i.push(c.Je());else if(y>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,$_,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,$_,[]]))}return a}bn(e,t){return ac(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mE)}getMinOffset(e,t){return ne.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||at())).next(mE)}}function ST(n){return Or(n,"collectionParents")}function vm(n){return Or(n,"indexEntries")}function wm(n){return Or(n,"indexConfiguration")}function lh(n){return Or(n,"indexState")}function mE(n){ft(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;l0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Js(e.readTime,e.documentKey,t)}const AT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Li{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Li(e,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yE(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let f=0;const y=r.X({range:c},(b,x,P)=>(f++,P.delete()));a.push(y.next(()=>{ft(1===f)}));const E=[];for(const b of t.mutations){const x=_0(e,b.key.path,t.batchId);a.push(i.delete(x)),E.push(b.key)}return ne.waitFor(a).next(()=>E)}function H_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}Li.DEFAULT_COLLECTION_PERCENTILE=10,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Li.DEFAULT=new Li(41943040,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Li.DISABLED=new Li(-1,0,0);class Em{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){ft(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Em(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xl(e).X({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=dh(e),c=xl(e);return c.add({}).next(f=>{ft("number"==typeof f);const y=new K0(f,t,r,i),E=function(P,B,Y){const pe=Y.baseMutations.map(ut=>hm(P.fe,ut)),xe=Y.mutations.map(ut=>hm(P.fe,ut));return{userId:B,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:pe,mutations:xe}}(this.serializer,this.userId,y),b=[];let x=new Mn((P,B)=>kt(P.canonicalString(),B.canonicalString()));for(const P of i){const B=_0(this.userId,P.key.path,f);x=x.add(P.key.path.popLast()),b.push(c.put(E)),b.push(a.put(B,ED))}return x.forEach(P=>{b.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.Vn[f]=y.keys()}),ne.waitFor(b).next(()=>y)})}lookupMutationBatch(e,t){return xl(e).get(t).next(r=>r?(ft(r.userId===this.userId),oh(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ne.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return xl(e).X({index:"userMutationsIndex",range:i},(c,f,y)=>{f.userId===this.userId&&(ft(f.batchId>=r),a=oh(this.serializer,f)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return xl(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xl(e).j("userMutationsIndex",t).next(r=>r.map(i=>oh(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=y0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return dh(e).X({range:i},(c,f,y)=>{const[E,b,x]=c,P=Ka(b);if(E===this.userId&&t.path.isEqual(P))return xl(e).get(x).next(B=>{if(!B)throw at();ft(B.userId===this.userId),a.push(oh(this.serializer,B))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(kt);const i=[];return t.forEach(a=>{const c=y0(this.userId,a.path),f=IDBKeyRange.lowerBound(c),y=dh(e).X({range:f},(E,b,x)=>{const[P,B,Y]=E,pe=Ka(B);P===this.userId&&a.path.isEqual(pe)?r=r.add(Y):x.done()});i.push(y)}),ne.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=y0(this.userId,r),c=IDBKeyRange.lowerBound(a);let f=new Mn(kt);return dh(e).X({range:c},(y,E,b)=>{const[x,P,B]=y,Y=Ka(P);x===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(f=f.add(B)):b.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(xl(e).get(a).next(c=>{if(null===c)throw at();ft(c.userId===this.userId),r.push(oh(this.serializer,c))}))}),ne.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return yE(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ne.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return dh(e).X({range:r},(a,c,f)=>{if(a[0]===this.userId){const y=Ka(a[1]);i.push(y)}else f.done()}).next(()=>{ft(0===i.length)})})}containsKey(e,t){return _E(e,this.userId,t)}xn(e){return xT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function _E(n,e,t){const r=y0(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return dh(n).X({range:a,Y:!0},(f,y,E)=>{const[b,x,P]=f;b===e&&x===i&&(c=!0),E.done()}).next(()=>c)}function xl(n){return Or(n,"mutations")}function dh(n){return Or(n,"documentMutations")}function xT(n){return Or(n,"mutationQueues")}class kr{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new kr(0)}static Mn(){return new kr(-1)}}class rp{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new kr(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Et.fromTimestamp(new Fn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ip(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(ft(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ip(e).X((c,f)=>{const y=ah(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>ne.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ip(e).X((r,i)=>{const a=ah(i);t(a)})}$n(e){return RT(e).get("targetGlobalKey").next(t=>(ft(null!==t),t))}On(e,t){return RT(e).put("targetGlobalKey",t)}Fn(e,t){return ip(e).put(tp(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Xd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ip(e).X({range:i,index:"queryTargetsIndex"},(c,f,y)=>{const E=ah(f);sm(t,E.target)&&(a=E,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=hh(e);return t.forEach(c=>{const f=Qi(c.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),ne.waitFor(i)}removeMatchingKeys(e,t,r){const i=hh(e);return ne.forEach(t,a=>{const c=Qi(a.path);return ne.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=hh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=hh(e);let a=zt();return i.X({range:r,Y:!0},(c,f,y)=>{const E=Ka(c[1]),b=new Qe(E);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=Qi(t.path),i=IDBKeyRange.bound([r],[u0(r)],!1,!0);let a=0;return hh(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,f],y,E)=>{0!==c&&(a++,E.done())}).next(()=>a>0)}le(e,t){return ip(e).get(t).next(r=>r?ah(r):null)}}function ip(n){return Or(n,"targets")}function RT(n){return Or(n,"targetGlobal")}function hh(n){return Or(n,"targetDocuments")}function Ix([n,e],[t,r]){const i=kt(n,t);return 0===i?kt(e,r):i}class NT{constructor(e){this.Ln=e,this.buffer=new Mn(Ix),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ix(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class z_{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Xu(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield qa(r)}yield t.Qn(3e5)}))}}class Im{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ne.resolve(Xs.ct);const r=new NT(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(AT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AT):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,c,f,y,E;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,c=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,f=Date.now(),this.removeTargets(e,r,t))).next(x=>(a=x,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(E=Date.now(),a0()<=Xo.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${a} targets in `+(y-f)+`ms\n\tRemoved ${x} documents in `+(E-y)+`ms\nTotal Duration: ${E-b}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:x})))}}class vE{constructor(e,t){this.db=e,this.garbageCollector=function MT(n,e){return new Im(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return G_(e,r)}removeReference(e,t,r){return G_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return G_(e,t)}Xn(e,t){return function(r,i){let a=!1;return xT(r).Z(c=>_E(r,c,i).next(f=>(f&&(a=!0),ne.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(c,f)=>{if(f<=t){const y=this.Xn(e,c).next(E=>{if(!E)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Et.min()),hh(e).delete([0,Qi(c.path)])))});i.push(y)}}).next(()=>ne.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return G_(e,t)}Yn(e,t){const r=hh(e);let i,a=Xs.ct;return r.X({index:"documentTargetsIndex"},([c,f],{path:y,sequenceNumber:E})=>{0===c?(a!==Xs.ct&&t(new Qe(Ka(i)),a),a=E,i=y):a=Xs.ct}).next(()=>{a!==Xs.ct&&t(new Qe(Ka(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function G_(n,e){return hh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Qi(e.path),sequenceNumber:r}));var r}class wE{constructor(){this.changes=new Cl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Cx{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Rl(e).put(r)}removeEntry(e,t,r){return Rl(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],F_(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Vn.newInvalidDocument(t);return Rl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Cm(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:Vn.newInvalidDocument(t)};return Rl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Cm(t))},(i,a)=>{r={document:this.ts(t,a),size:H_(a)}}).next(()=>r)}getEntries(e,t){let r=eo();return this.ns(e,t,(i,a)=>{const c=this.ts(i,a);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=eo(),i=new Nn(Qe.comparator);return this.ns(e,t,(a,c)=>{const f=this.ts(a,c);r=r.insert(a,f),i=i.insert(a,H_(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ne.resolve();let i=new Mn(q_);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(Cm(i.first()),Cm(i.last())),c=i.getIterator();let f=c.getNext();return Rl(e).X({index:"documentKeyIndex",range:a},(y,E,b)=>{const x=Qe.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;f&&q_(f,x)<0;)r(f,null),f=c.getNext();f&&f.isEqual(x)&&(r(f,E),f=c.hasNext()?c.getNext():null),f?b.G(Cm(f)):b.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),F_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rl(e).j(IDBKeyRange.bound(c,f,!0)).next(y=>{let E=eo();for(const b of y){const x=this.ts(Qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);x.isFoundDocument()&&(Gf(t,x)||i.has(x.key))&&(E=E.insert(x.key,x))}return E})}getAllFromCollectionGroup(e,t,r,i){let a=eo();const c=Dm(t,r),f=Dm(t,Js.max());return Rl(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(y,E,b)=>{const x=this.ts(Qe.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);a=a.insert(x.key,x),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new Dx(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return W_(e).get("remoteDocumentGlobalKey").next(t=>(ft(!!t),t))}Zn(e,t){return W_(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function _x(n,e){let t;if(e.document)t=sE(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=Ji(e.noDocument.readTime);t=Vn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=Qe.fromSegments(e.unknownDocument.path),i=Ji(e.unknownDocument.version);t=Vn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Fn(r[0],r[1]);return Et.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return Vn.newInvalidDocument(e)}}function PT(n){return new Cx(n)}class Dx extends wE{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Cl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Mn((a,c)=>kt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),c.isValidDocument()){const y=ep(this.os.serializer,c);i=i.add(a.path.popLast());const E=H_(y);r+=E-f.size,t.push(this.os.addEntry(e,a,y))}else if(r-=f.size,this.trackRemovals){const y=ep(this.os.serializer,c.convertToNoDocument(Et.min()));t.push(this.os.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,c)=>{this.us.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function W_(n){return Or(n,"remoteDocumentGlobal")}function Rl(n){return Or(n,"remoteDocumentsV14")}function Cm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Dm(n,e){const t=e.documentKey.path.toArray();return[n,F_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function q_(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=kt(t[a],r[a]),i)return i;return i=kt(t.length,r.length),i||(i=kt(t[t.length-2],r[r.length-2]),i||kt(t[t.length-1],r[r.length-1]))}class OM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class EE{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&um(r.mutation,i,ps.empty(),Fn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=zt()){const i=Xa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=Dl();return a.forEach((f,y)=>{c=c.insert(f,y.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Xa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,zt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let a=eo();const c=rc(),f=rc();return t.forEach((y,E)=>{const b=r.get(E.key);i.has(E.key)&&(void 0===b||b.mutation instanceof ic)?a=a.insert(E.key,E):void 0!==b?(c.set(E.key,b.mutation.getFieldMask()),um(b.mutation,E,b.mutation.getFieldMask(),Fn.now())):c.set(E.key,ps.empty())}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((E,b)=>c.set(E,b)),t.forEach((E,b)=>{var x;return f.set(E,new OM(b,null!==(x=c.get(E))&&void 0!==x?x:null))}),f))}recalculateAndSaveOverlays(e,t){const r=rc();let i=new Nn((c,f)=>c-f),a=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(y=>{const E=t.get(y);if(null===E)return;let b=r.get(y)||ps.empty();b=f.applyToLocalView(E,b),r.set(y,b);const x=(i.get(f.batchId)||zt()).add(y);i=i.insert(f.batchId,x)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),E=y.key,b=y.value,x=$0();b.forEach(P=>{if(!a.has(P)){const B=W0(t.get(P),r.get(P));null!==B&&x.set(P,B),a=a.add(P)}}),c.push(this.documentOverlayCache.saveOverlays(e,E,x))}return ne.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):th(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ne.resolve(Xa());let f=-1,y=a;return c.next(E=>ne.forEach(E,(b,x)=>(f<x.largestBatchId&&(f=x.largestBatchId),a.get(b)?ne.resolve():this.remoteDocumentCache.getEntry(e,b).next(P=>{y=y.insert(b,P)}))).next(()=>this.populateOverlays(e,E,a)).next(()=>this.computeViews(e,y,E,zt())).next(b=>({batchId:f,changes:GD(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let i=Dl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Dl();return this.indexManager.getCollectionParents(e,i).next(c=>ne.forEach(c,f=>{const y=(E=t,b=f.child(i),new Ro(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,b;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(E=>{E.forEach((b,x)=>{a=a.insert(b,x)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,y)=>{const E=y.getKey();null===a.get(E)&&(a=a.insert(E,Vn.newInvalidDocument(E)))});let c=Dl();return a.forEach((f,y)=>{const E=i.get(f);void 0!==E&&um(E.mutation,y,ps.empty(),Fn.now()),Gf(t,y)&&(c=c.insert(f,y))}),c})}}class Tx{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ne.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Dr(r.createTime)}),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:cE(r.bundledQuery),readTime:Dr(r.readTime)}),ne.resolve();var r}}class OT{constructor(){this.overlays=new Nn(Qe.comparator),this.ls=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xa();return ne.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const i=Xa(),a=t.length+1,c=new Qe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const y=f.getNext().value,E=y.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Nn((E,b)=>E-b);const c=this.overlays.getIterator();for(;c.hasNext();){const E=c.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let b=a.get(E.largestBatchId);null===b&&(b=Xa(),a=a.insert(E.largestBatchId,b)),b.set(E.getKey(),E)}}const f=Xa(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((E,b)=>f.set(E,b)),!(f.size()>=i)););return ne.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Y0(t,r));let a=this.ls.get(t);void 0===a&&(a=zt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class Nl{constructor(){this.fs=new Mn(fi.ds),this.ws=new Mn(fi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new fi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new fi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Qe(new an([])),r=new fi(t,e),i=new fi(t,e+1),a=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),a.push(c.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qe(new an([])),r=new fi(t,e),i=new fi(t,e+1);let a=zt();return this.ws.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new fi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class fi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qe.comparator(e.key,t.key)||kt(e.As,t.As)}static _s(e,t){return kt(e.As,t.As)||Qe.comparator(e.key,t.key)}}class kT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Mn(fi.ds)}checkEmpty(e){return ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const c=new K0(a,t,r,i);this.mutationQueue.push(c);for(const f of i)this.Rs=this.Rs.add(new fi(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new fi(t,0),i=new fi(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],c=>{const f=this.Ps(c.As);a.push(f)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mn(kt);return t.forEach(i=>{const a=new fi(i,0),c=new fi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,c],f=>{r=r.add(f.As)})}),ne.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Qe.isDocumentKey(a)||(a=a.child(""));const c=new fi(new Qe(a),0);let f=new Mn(kt);return this.Rs.forEachWhile(y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(f=f.add(y.As)),!0)},c),ne.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ft(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ne.forEach(t.mutations,i=>{const a=new fi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new fi(t,0),i=this.Rs.firstAfterOrEqual(r);return ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ne.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class IE{constructor(e){this.Ds=e,this.docs=new Nn(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let r=eo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Vn.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=eo();const c=t.path,f=new Qe(c.child("")),y=this.docs.getIteratorFrom(f);for(;y.hasNext();){const{key:E,value:{document:b}}=y.getNext();if(!c.isPrefixOf(E.path))break;E.path.length>c.length+1||l0(Ju(b),r)<=0||(i.has(b.key)||Gf(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,r,i){at()}Cs(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new kM(this)}getSize(e){return ne.resolve(this.size)}}class kM extends wE{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class bx{constructor(e){this.persistence=e,this.xs=new Cl(t=>Xd(t),sm),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Nl,this.targetCount=0,this.Ms=kr.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ne.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new kr(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Fn(t),ne.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ne.waitFor(a).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.ks.containsKey(t))}}class LT{constructor(e,t){this.$s={},this.overlays={},this.Os=new Xs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new bx(this),this.indexManager=new gE,this.remoteDocumentCache=new IE(r=>this.referenceDelegate.Ls(r)),this.serializer=new _T(t),this.qs=new Tx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new kT(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new Sx(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return ne.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Sx extends hl{constructor(e){super(),this.currentSequenceNumber=e}}class Z_{constructor(e){this.persistence=e,this.Qs=new Nl,this.js=null}static zs(e){return new Z_(e)}get Ws(){if(this.js)return this.js;throw at()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Ws,r=>{const i=Qe.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,Et.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ne.or([()=>ne.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class FT{constructor(e){this.serializer=e}O(e,t,r,i){const a=new h0("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",m0,{unique:!0}),f.createObjectStore("documentMutations"),CE(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=ne.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),CE(e)),c=c.next(()=>function(f){const y=f.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",E)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,y){return y.store("mutations").j().next(E=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",m0,{unique:!0});const b=y.store("mutations"),x=E.map(P=>b.put(P));return ne.waitFor(x)})}(e,a))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(a))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(a))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(a))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:YA});y.createIndex("collectionPathOverlayIndex",v0,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",Jg,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:Ya});y.createIndex("documentKeyIndex",GA),y.createIndex("collectionGroupIndex",WA)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,a))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:CD}).createIndex("sequenceNumberIndex",qA,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:ZA}).createIndex("documentKeyIndex",KA,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=H_(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ne.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(f=>ne.forEach(f,y=>{ft(y.userId===a.userId);const E=oh(this.serializer,y);return yE(e,a.userId,E).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((c,f)=>{const y=new an(c),E=[0,Qi(y)];a.push(t.get(E).next(b=>b?ne.resolve():t.put({targetId:0,path:Qi(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ne.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:ID});const r=t.store("collectionParents"),i=new _m,a=c=>{if(i.add(c)){const f=c.lastSegment(),y=c.popLast();return r.put({collectionId:f,parent:Qi(y)})}};return t.store("remoteDocuments").X({Y:!0},(c,f)=>{const y=new an(c);return a(y.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,f,y],E)=>{const b=Ka(f);return a(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=ah(i),c=tp(this.serializer,a);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,c)=>{const f=t.store("remoteDocumentsV14"),y=(E=c,E.document?new Qe(an.fromString(E.document.name).popFirst(5)):E.noDocument?Qe.fromSegments(E.noDocument.path):E.unknownDocument?Qe.fromSegments(E.unknownDocument.path):at()).path.toArray();var E;const b={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(b))}).next(()=>ne.waitFor(i))}si(e,t){const r=t.store("mutations"),i=PT(this.serializer),a=new LT(Z_.zs,this.serializer.fe);return r.j().next(c=>{const f=new Map;return c.forEach(y=>{var E;let b=null!==(E=f.get(y.userId))&&void 0!==E?E:zt();oh(this.serializer,y).keys().forEach(x=>b=b.add(x)),f.set(y.userId,b)}),ne.forEach(f,(y,E)=>{const b=new ti(E),x=np.de(this.serializer,b),P=a.getIndexManager(b),B=Em.de(b,this.serializer,P,a.referenceDelegate);return new EE(i,B,x,P).recalculateAndSaveOverlaysForDocumentKeys(new E_(t,Xs.ct),y).next()})})}}function CE(n){n.createObjectStore("targetDocuments",{keyPath:ta}).createIndex("documentTargetsIndex",na,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qa,{unique:!0}),n.createObjectStore("targetGlobal")}const DE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Y_{constructor(e,t,r,i,a,c,f,y,E,b,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=c,this.document=f,this.ri=E,this.oi=b,this.ui=x,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=P=>Promise.resolve(),!Y_.D())throw new Se(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vE(this,i),this.di=t+"main",this.serializer=new _T(y),this.wi=new Za(this.di,this.ui,new FT(this.serializer)),this.Bs=new rp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=PT(this.serializer),this.qs=new wT,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(ue.FAILED_PRECONDITION,DE);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Xs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Q_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Xu(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return sp(e).get("owner").next(t=>ne.resolve(this.Ri(t)))}Pi(e){return Q_(e).delete(this.clientId)}bi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Or(r,"clientMetadata");return i.j().next(a=>{const c=e.Si(a,18e5),f=a.filter(y=>-1===c.indexOf(y));return ne.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ne.resolve(!0):sp(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Se(ue.FAILED_PRECONDITION,DE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Q_(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new E_(t,Xs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Q_(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Em.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ex(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return np.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.ui)?AD:14===c?SD:13===c?bD:12===c?TD:11===c?DD:void at();var c;let f;return this.wi.runTransaction(e,i,a,y=>(f=new E_(y,this.Os?this.Os.next():Xs.ct),"readwrite-primary"===t?this.Ti(f).next(E=>!!E||this.Ei(f)).next(E=>{if(!E)throw hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Se(ue.FAILED_PRECONDITION,w_);return r(f)}).next(E=>this.vi(f).next(()=>E)):this.Oi(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Oi(e){return sp(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(ue.FAILED_PRECONDITION,DE)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sp(e).put("owner",t)}static D(){return Za.D()}Ai(e){const t=sp(e);return t.get("owner").next(r=>this.Ri(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ne.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(hr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,k.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return hr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){hr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sp(n){return Or(n,"owner")}function Q_(n){return Or(n,"clientMetadata")}function TE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class J_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=zt(),i=zt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new J_(e,t.fromCache,r,i)}}class UT{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(L0(t))return ne.resolve(null);let r=gs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=om(t,null,"F"),r=gs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=zt(...a);return this.Ui.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(y=>{const E=this.ji(t,f);return this.zi(t,E,c,y.readTime)?this.Ki(e,om(t,null,"F")):this.Wi(e,E,t,y)}))})))}Gi(e,t,r,i){return L0(t)||i.isEqual(Et.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const c=this.ji(t,a);return this.zi(t,c,r,i)?this.Qi(e,t):(a0()<=Xo.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),B0(t)),this.Wi(e,c,t,Yg(i,-1)))})}ji(e,t){let r=new Mn(zD(e));return t.forEach((i,a)=>{Gf(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return a0()<=Xo.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",B0(t)),this.Ui.getDocumentsMatchingQuery(e,t,Js.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class VT{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Nn(kt),this.Yi=new Cl(a=>Xd(a),sm),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EE(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function bE(n,e,t,r){return new VT(n,e,t,r)}function SE(n,e){return X_.apply(this,arguments)}function X_(){return X_=(0,ye.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],f=[];let y=zt();for(const E of i){c.push(E.batchId);for(const b of E.mutations)y=y.add(b.key)}for(const E of a){f.push(E.batchId);for(const b of E.mutations)y=y.add(b.key)}return t.localDocuments.getDocuments(r,y).next(E=>({er:E,removedBatchIds:c,addedBatchIds:f}))})})}),X_.apply(this,arguments)}function BT(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function AE(n,e,t){let r=zt(),i=zt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=eo();return t.forEach((f,y)=>{const E=a.get(f);y.isFoundDocument()!==E.isFoundDocument()&&(i=i.add(f)),y.isNoDocument()&&y.version.isEqual(Et.min())?(e.removeEntry(f,y.readTime),c=c.insert(f,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||0===y.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(y),c=c.insert(f,y)):Ve("LocalStore","Ignoring outdated watch update for ",f,". Current version:",E.version," Watch version:",y.version)}),{nr:c,sr:i}})}function FM(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tm(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,ne.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new sc(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function bm(n,e,t){return jT.apply(this,arguments)}function jT(){return jT=(0,ye.Z)(function*(n,e,t){const r=tt(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Xu(c))throw c;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),jT.apply(this,arguments)}function xE(n,e,t){const r=tt(n);let i=Et.min(),a=zt();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,y,E){const b=tt(f),x=b.Yi.get(E);return void 0!==x?ne.resolve(b.Ji.get(x)):b.Bs.getTargetData(y,E)}(r,c,gs(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,f.targetId).next(y=>{a=y})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:Et.min(),t?a:zt())).next(f=>(Nx(r,HD(e),f),{documents:f,ir:a})))}function xx(n,e){const t=tt(n),r=tt(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(c=>c?c.target:null))}function Rx(n,e){const t=tt(n),r=t.Xi.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,Yg(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Nx(t,e,i),i))}function Nx(n,e,t){let r=n.Xi.get(e)||Et.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function ev(){return ev=(0,ye.Z)(function*(n,e,t,r){const i=tt(n);let a=zt(),c=eo();for(const E of t){const b=e.rr(E.metadata.name);E.document&&(a=a.add(b));const x=e.ur(E);x.setReadTime(e.cr(E.metadata.readTime)),c=c.insert(b,x)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),y=yield Tm(i,(E=r,gs(eh(an.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>AE(E,f,c).next(b=>(f.apply(E),b)).next(b=>i.Bs.removeMatchingKeysForTargetId(E,y.targetId).next(()=>i.Bs.addMatchingKeys(E,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(E,b.nr,b.sr)).next(()=>b.nr)))}),ev.apply(this,arguments)}function RE(n,e){return tv.apply(this,arguments)}function tv(){return tv=(0,ye.Z)(function*(n,e,t=zt()){const r=yield Tm(n,gs(cE(e.bundledQuery))),i=tt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Dr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(Gr.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),tv.apply(this,arguments)}function $T(n,e){return`firestore_clients_${n}_${e}`}function Sm(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function NE(n,e){return`firestore_targets_${n}_${e}`}class ME{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Se(i.error.code,i.error.message))),c?new ME(e,t,i.state,a):(hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Se(r.error.code,r.error.message))),a?new nv(e,r.state,i):(hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class PE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=WD();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Kd(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new PE(e,a):(hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class OE{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new OE(t.clientId,t.onlineState):(hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class kE{constructor(){this.activeTargetIds=WD()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LE{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Nn(kt),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=$T(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new kE),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem($T(e.persistenceKey,i));if(a){const c=PE.ar(i,a);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(NE(this.persistenceKey,e));if(r){const i=nv.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(NE(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let c=Xs.ct;if(null!=a)try{const f=JSON.parse(a);ft("number"==typeof f),c=f}catch(f){hr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Xs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new ME(this.currentUser,e,t,r),a=Sm(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=Sm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=NE(this.persistenceKey,e),a=new nv(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return PE.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return ME.ar(new ti(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return nv.ar(i,t)}br(e){return OE.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),c=[],f=[];return a.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{a.has(y)||f.push(y)}),this.syncEngine.Wr(c,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=WD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Mx{constructor(){this.Hr=new kE,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new kE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Px{Yr(e){}shutdown(){}}class FE{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Am=null;function HT(){return null===Am?Am=268435456+Math.round(2147483648*Math.random()):Am++,"0x"+Am.toString(16)}const ra={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ox{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const pi="WebChannelConnection";class zT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const c=HT(),f=this.To(e,t);Ve("RestConnection",`Sending RPC '${e}' ${c}:`,f,r);const y={};return this.Eo(y,i,a),this.Ao(e,f,y,r).then(E=>(Ve("RestConnection",`Received RPC '${e}' ${c}: `,E),E),E=>{throw xo("RestConnection",`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",r),E})}vo(e,t,r,i,a,c){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${ra[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=HT();return new Promise((c,f)=>{const y=new kA;y.setWithCredentials(!0),y.listenOnce(MA.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case lD.NO_ERROR:const b=y.getResponseJson();Ve(pi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),c(b);break;case lD.TIMEOUT:Ve(pi,`RPC '${e}' ${a} timed out`),f(new Se(ue.DEADLINE_EXCEEDED,"Request time out"));break;case lD.HTTP_ERROR:const x=y.getStatus();if(Ve(pi,`RPC '${e}' ${a} failed with status:`,x,"response text:",y.getResponseText()),x>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const B=P?.error;if(B&&B.status&&B.message){const Y=function(pe){const xe=pe.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(xe)>=0?xe:ue.UNKNOWN}(B.status);f(new Se(Y,B.message))}else f(new Se(ue.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new Se(ue.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Ve(pi,`RPC '${e}' ${a} completed.`)}});const E=JSON.stringify(i);Ve(pi,`RPC '${e}' ${a} sending request:`,i),y.send(t,"POST",E,r,15)})}Ro(e,t,r){const i=HT(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=g_(),f=m_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;void 0!==E&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.xmlHttpFactory=new OA({})),this.Eo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const b=a.join("");Ve(pi,`Creating RPC '${e}' stream ${i}: ${b}`,y);const x=c.createWebChannel(b,y);let P=!1,B=!1;const Y=new Ox({ro:xe=>{B?Ve(pi,`Not sending because RPC '${e}' stream ${i} is closed:`,xe):(P||(Ve(pi,`Opening RPC '${e}' stream ${i} transport.`),x.open(),P=!0),Ve(pi,`RPC '${e}' stream ${i} sending:`,xe),x.send(xe))},oo:()=>x.close()}),pe=(xe,ut,It)=>{xe.listen(ut,yt=>{try{It(yt)}catch(Mt){setTimeout(()=>{throw Mt},0)}})};return pe(x,Gg.EventType.OPEN,()=>{B||Ve(pi,`RPC '${e}' stream ${i} transport opened.`)}),pe(x,Gg.EventType.CLOSE,()=>{B||(B=!0,Ve(pi,`RPC '${e}' stream ${i} transport closed`),Y.wo())}),pe(x,Gg.EventType.ERROR,xe=>{B||(B=!0,xo(pi,`RPC '${e}' stream ${i} transport errored:`,xe),Y.wo(new Se(ue.UNAVAILABLE,"The operation could not be completed")))}),pe(x,Gg.EventType.MESSAGE,xe=>{var ut;if(!B){const It=xe.data[0];ft(!!It);const Mt=It.error||(null===(ut=It[0])||void 0===ut?void 0:ut.error);if(Mt){Ve(pi,`RPC '${e}' stream ${i} received error:`,Mt);const qt=Mt.status;let cn=function(ry){const Nk=Cr[ry];if(void 0!==Nk)return N_(Nk)}(qt),Ls=Mt.message;void 0===cn&&(cn=ue.INTERNAL,Ls="Unknown error status: "+qt+" with message "+Mt.message),B=!0,Y.wo(new Se(cn,Ls)),x.close()}else Ve(pi,`RPC '${e}' stream ${i} received:`,It),Y._o(It)}}),pe(f,PA.STAT_EVENT,xe=>{xe.stat===y_.PROXY?Ve(pi,`RPC '${e}' stream ${i} detected buffering proxy`):xe.stat===y_.NOPROXY&&Ve(pi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Y.fo()},0),Y}}function GT(){return typeof window<"u"?window:null}function UE(){return typeof document<"u"?document:null}function Wr(n){return new oT(n,!0)}class VE{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class rv{constructor(e,t,r,i,a,c,f,y){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new VE(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ye.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ye.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(hr(t.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Se(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,ye.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kx extends rv{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function px(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:at(),i=e.targetChange.targetIds||[],a=function(y,E){return y.useProto3Json?(ft(void 0===E||"string"==typeof E),Gr.fromBase64String(E||"")):(ft(void 0===E||E instanceof Uint8Array),Gr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const E=void 0===y.code?ue.UNKNOWN:N_(y.code);return new Se(E,y.message||"")}(c);t=new X0(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=eu(n,r.document.name),a=Dr(r.document.updateTime),c=r.document.createTime?Dr(r.document.createTime):Et.min(),f=new hi({mapValue:{fields:r.document.fields}}),y=Vn.newFoundDocument(i,a,c,f);t=new Yf(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,i=eu(n,r.document),a=r.readTime?Dr(r.readTime):Et.min(),c=Vn.newNoDocument(i,a);t=new Yf([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=eu(n,r.document);t=new Yf([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,{count:i=0,unchangedNames:a}=r,c=new cx(i,a);t=new nT(r.targetId,c)}}var y;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Et.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Et.min():a.readTime?Dr(a.readTime):Et.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=dm(this.serializer),t.addTarget=function(i,a){let c;const f=a.target;if(c=El(f)?{documents:hT(i,f)}:{query:aE(i,f)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=aT(i,a.resumeToken);const y=nE(i,a.expectedCount);null!==y&&(c.expectedCount=y)}else if(a.snapshotVersion.compareTo(Et.min())>0){c.readTime=Qf(i,a.snapshotVersion.toTimestamp());const y=nE(i,a.expectedCount);null!==y&&(c.expectedCount=y)}return c}(this.serializer,e);const r=function fT(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=dm(this.serializer),t.removeTarget=e,this.Wo(t)}}class Lx extends rv{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function gx(n,e){return n&&n.length>0?(ft(void 0!==e),n.map(t=>function(r,i){let a=Dr(r.updateTime?r.updateTime:i);return a.isEqual(Et.min())&&(a=Dr(i)),new sx(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.cu(r,t)}return ft(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=dm(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hm(this.serializer,r))};this.Wo(t)}}class BE extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Se(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Se(ue.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.vo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Se(ue.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class Fx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(hr(t),this.mu=!1):Ve("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class qT{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,ye.Z)(function*(){var y;tu(c)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,ye.Z)(function*(E){const b=tt(E);b.vu.add(4),yield fh(b),b.bu.set("Unknown"),b.vu.delete(4),yield op(b)}),function(E){return y.apply(this,arguments)})(c))}))}),this.bu=new Fx(r,i)}}function op(n){return sv.apply(this,arguments)}function sv(){return sv=(0,ye.Z)(function*(n){if(tu(n))for(const e of n.Ru)yield e(!0)}),sv.apply(this,arguments)}function fh(n){return jE.apply(this,arguments)}function jE(){return jE=(0,ye.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),jE.apply(this,arguments)}function xm(n,e){const t=tt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Mm(t)?ov(t):up(t).Ko()&&Nm(t,e))}function Rm(n,e){const t=tt(n),r=up(t);t.Au.delete(e),r.Ko()&&uc(t,e),0===t.Au.size&&(r.Ko()?r.jo():tu(t)&&t.bu.set("Unknown"))}function Nm(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}up(n).su(e)}function uc(n,e){n.Vu.qt(e),up(n).iu(e)}function ov(n){n.Vu=new dx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),up(n).start(),n.bu.gu()}function Mm(n){return tu(n)&&!up(n).Uo()&&n.Au.size>0}function tu(n){return 0===tt(n).vu.size}function ZT(n){n.Vu=void 0}function VM(n){return av.apply(this,arguments)}function av(){return av=(0,ye.Z)(function*(n){n.Au.forEach((e,t)=>{Nm(n,e)})}),av.apply(this,arguments)}function Ux(n,e){return $E.apply(this,arguments)}function $E(){return $E=(0,ye.Z)(function*(n,e){ZT(n),Mm(n)?(n.bu.Iu(e),ov(n)):n.bu.set("Unknown")}),$E.apply(this,arguments)}function Vx(n,e,t){return HE.apply(this,arguments)}function HE(){return HE=(0,ye.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof X0&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,a){const c=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Pm(n,r)}else if(e instanceof Yf?n.Vu.Ht(e):e instanceof nT?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Et.min()))try{const r=yield BT(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Vu.ce(a);return c.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const E=i.Au.get(y);E&&i.Au.set(y,E.withResumeToken(f.resumeToken,a))}}),c.targetMismatches.forEach((f,y)=>{const E=i.Au.get(f);if(!E)return;i.Au.set(f,E.withResumeToken(Gr.EMPTY_BYTE_STRING,E.snapshotVersion)),uc(i,f);const b=new sc(E.target,f,y,E.sequenceNumber);Nm(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield Pm(n,r)}var r}),HE.apply(this,arguments)}function Pm(n,e,t){return KT.apply(this,arguments)}function KT(){return KT=(0,ye.Z)(function*(n,e,t){if(!Xu(e))throw e;n.vu.add(1),yield fh(n),n.bu.set("Offline"),t||(t=()=>BT(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield op(n)}))}),KT.apply(this,arguments)}function zE(n,e){return e().catch(t=>Pm(n,t,e))}function ap(n){return uv.apply(this,arguments)}function uv(){return uv=(0,ye.Z)(function*(n){const e=tt(n),t=ph(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;BM(e);)try{const i=yield FM(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,GE(e,i)}catch(i){yield Pm(e,i)}WE(e)&&qE(e)}),uv.apply(this,arguments)}function BM(n){return tu(n)&&n.Eu.length<10}function GE(n,e){n.Eu.push(e);const t=ph(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function WE(n){return tu(n)&&!ph(n).Uo()&&n.Eu.length>0}function qE(n){ph(n).start()}function Bx(n){return cv.apply(this,arguments)}function cv(){return cv=(0,ye.Z)(function*(n){ph(n).hu()}),cv.apply(this,arguments)}function YT(n){return Ml.apply(this,arguments)}function Ml(){return Ml=(0,ye.Z)(function*(n){const e=ph(n);for(const t of n.Eu)e.uu(t.mutations)}),Ml.apply(this,arguments)}function lv(n,e,t){return dv.apply(this,arguments)}function dv(){return dv=(0,ye.Z)(function*(n,e,t){const r=n.Eu.shift(),i=R_.from(r,e,t);yield zE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ap(n)}),dv.apply(this,arguments)}function QT(n,e){return ZE.apply(this,arguments)}function ZE(){return ZE=(0,ye.Z)(function*(n,e){var t;e&&ph(n).ou&&(yield(t=(0,ye.Z)(function*(r,i){if(Q0(a=i.code)&&a!==ue.ABORTED){const c=r.Eu.shift();ph(r).Qo(),yield zE(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ap(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),WE(n)&&qE(n)}),ZE.apply(this,arguments)}function JT(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,ye.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=tu(t);t.vu.add(3),yield fh(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield op(t)}),XT.apply(this,arguments)}function hv(n,e){return KE.apply(this,arguments)}function KE(){return KE=(0,ye.Z)(function*(n,e){const t=tt(n);e?(t.vu.delete(2),yield op(t)):e||(t.vu.add(2),yield fh(t),t.bu.set("Unknown"))}),KE.apply(this,arguments)}function up(n){return n.Su||(n.Su=function(e,t,r){const i=tt(e);return i.fu(),new kx(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:VM.bind(null,n),ao:Ux.bind(null,n),nu:Vx.bind(null,n)}),n.Ru.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Su.Qo(),Mm(n)?ov(n):n.bu.set("Unknown")):(yield n.Su.stop(),ZT(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function ph(n){return n.Du||(n.Du=function(e,t,r){const i=tt(e);return i.fu(),new Lx(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:Bx.bind(null,n),ao:QT.bind(null,n),au:YT.bind(null,n),cu:lv.bind(null,n)}),n.Ru.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Du.Qo(),yield ap(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class eb{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,f=new eb(e,t,c,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Om(n,e){if(hr("AsyncQueue",`${e}: ${n}`),Xu(n))return new Se(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class gh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=Dl(),this.sortedSet=new Nn(this.comparator)}static emptySet(e){return new gh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new gh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class tb{constructor(){this.Cu=new Nn(Qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):at():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class cp{constructor(e,t,r,i,a,c,f,y,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new cp(e,t,gh.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class jx{constructor(){this.Nu=void 0,this.listeners=[]}}class jM{constructor(){this.queries=new Cl(e=>V0(e),zf),this.onlineState="Unknown",this.ku=new Set}}function nb(n,e){return rb.apply(this,arguments)}function rb(){return rb=(0,ye.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new jx),i)try{a.Nu=yield t.onListen(r)}catch(c){const f=Om(c,`Initialization of query '${B0(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&YE(t)}),rb.apply(this,arguments)}function ib(n,e){return sb.apply(this,arguments)}function sb(){return sb=(0,ye.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),sb.apply(this,arguments)}function $x(n,e){const t=tt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.$u(i)&&(r=!0);c.Nu=i}}r&&YE(t)}function fv(n,e,t){const r=tt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function YE(n){n.ku.forEach(e=>{e.next()})}class QE{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new cp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=cp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class ob{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Pl{constructor(e){this.serializer=e}rr(e){return eu(this.serializer,e)}ur(e){return e.metadata.exists?sE(this.serializer,e.document,!1):Vn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Dr(e)}}class ab{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pv(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=an.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new Pl(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||zt()).add(a);t.set(c,f)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function UM(n,e,t,r){return ev.apply(this,arguments)}(e.localStore,new Pl(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield RE(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function pv(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class gv{constructor(e){this.key=e}}class ub{constructor(e){this.key=e}}class mv{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=zt(),this.mutatedKeys=zt(),this.tc=zD(e),this.ec=new gh(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new tb,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,E="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,x)=>{const P=i.get(b),B=Gf(this.query,x)?x:null,Y=!!P&&this.mutatedKeys.has(P.key),pe=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let xe=!1;P&&B?P.data.isEqual(B.data)?Y!==pe&&(r.track({type:3,doc:B}),xe=!0):this.rc(P,B)||(r.track({type:2,doc:B}),xe=!0,(y&&this.tc(B,y)>0||E&&this.tc(B,E)<0)&&(f=!0)):!P&&B?(r.track({type:0,doc:B}),xe=!0):P&&!B&&(r.track({type:1,doc:P}),xe=!0,(y||E)&&(f=!0)),xe&&(B?(c=c.add(B),a=pe?a.add(b):a.delete(b)):(c=c.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{ec:c,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((E,b)=>function(x,P){const B=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return B(x)-B(P)}(E.type,b.type)||this.tc(E.doc,b.doc)),this.oc(r);const c=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,y=f!==this.Xu;return this.Xu=f,0!==a.length||y?{snapshot:new cp(this.query,e.ec,i,a,e.mutatedKeys,0===f,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new tb,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=zt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new ub(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new gv(r))}),t}hc(e){this.Yu=e.ir,this.Zu=zt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return cp.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class JE{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yv{constructor(e){this.key=e,this.fc=!1}}class $M{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new Cl(f=>V0(f),zf),this._c=new Map,this.mc=new Set,this.gc=new Nn(Qe.comparator),this.yc=new Map,this.Ic=new Nl,this.Tc={},this.Ec=new Map,this.Ac=kr.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function HM(n,e){return cb.apply(this,arguments)}function cb(){return cb=(0,ye.Z)(function*(n,e){const t=Eb(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const c=yield Tm(t.localStore,gs(e)),f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield _v(t,e,r,"current"===f,c.resumeToken),t.isPrimaryClient&&xm(t.remoteStore,c)}return i}),cb.apply(this,arguments)}function _v(n,e,t,r,i){return XE.apply(this,arguments)}function XE(){return XE=(0,ye.Z)(function*(n,e,t,r,i){n.Rc=(x,P,B)=>{return(Y=(0,ye.Z)(function*(pe,xe,ut,It){let yt=xe.view.sc(ut);yt.zi&&(yt=yield xE(pe.localStore,xe.query,!1).then(({documents:cn})=>xe.view.sc(cn,yt)));const Mt=It&&It.targetChanges.get(xe.targetId),qt=xe.view.applyChanges(yt,pe.isPrimaryClient,Mt);return iI(pe,xe.targetId,qt.cc),qt.snapshot}),function(pe,xe,ut,It){return Y.apply(this,arguments)})(n,x,P,B);var Y};const a=yield xE(n.localStore,e,!0),c=new mv(e,a.ir),f=c.sc(a.documents),y=sh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),E=c.applyChanges(f,n.isPrimaryClient,y);iI(n,t,E.cc);const b=new JE(e,t,c);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),E.snapshot}),XE.apply(this,arguments)}function Hx(n,e){return eI.apply(this,arguments)}function eI(){return eI=(0,ye.Z)(function*(n,e){const t=tt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!zf(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield bm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Rm(t.remoteStore,r.targetId),lp(t,r.targetId)}).catch(qa))):(lp(t,r.targetId),yield bm(t.localStore,r.targetId,!0))}),eI.apply(this,arguments)}function vv(){return vv=(0,ye.Z)(function*(n,e,t){const r=Ib(n);try{const i=yield function(a,c){const f=tt(a),y=Fn.now(),E=c.reduce((P,B)=>P.add(B.key),zt());let b,x;return f.persistence.runTransaction("Locally write mutations","readwrite",P=>{let B=eo(),Y=zt();return f.Zi.getEntries(P,E).next(pe=>{B=pe,B.forEach((xe,ut)=>{ut.isValidDocument()||(Y=Y.add(xe))})}).next(()=>f.localDocuments.getOverlayedDocuments(P,B)).next(pe=>{b=pe;const xe=[];for(const ut of c){const It=ax(ut,b.get(ut.key).overlayedDocument);null!=It&&xe.push(new ic(ut.key,It,yl(It.value.mapValue),Jn.exists(!0)))}return f.mutationQueue.addMutationBatch(P,y,xe,c)}).next(pe=>{x=pe;const xe=pe.applyToLocalDocumentSet(b,Y);return f.documentOverlayCache.saveOverlays(P,pe.batchId,xe)})}).then(()=>({batchId:x.batchId,changes:GD(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,f){let y=a.Tc[a.currentUser.toKey()];y||(y=new Nn(kt)),y=y.insert(c,f),a.Tc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield nu(r,i.changes),yield ap(r.remoteStore)}catch(i){const a=Om(i,"Failed to persist write");t.reject(a)}}),vv.apply(this,arguments)}function tI(n,e){return wv.apply(this,arguments)}function wv(){return wv=(0,ye.Z)(function*(n,e){const t=tt(n);try{const r=yield function LM(n,e){const t=tt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((b,x)=>{const P=i.get(x);if(!P)return;f.push(t.Bs.removeMatchingKeys(a,b.removedDocuments,x).next(()=>t.Bs.addMatchingKeys(a,b.addedDocuments,x)));let B=P.withSequenceNumber(a.currentSequenceNumber);var Y,pe,xe;null!==e.targetMismatches.get(x)?B=B.withResumeToken(Gr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):b.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(b.resumeToken,r)),i=i.insert(x,B),pe=B,xe=b,(0===(Y=P).resumeToken.approximateByteSize()||pe.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=3e8||xe.addedDocuments.size+xe.modifiedDocuments.size+xe.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,B))});let y=eo(),E=zt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),f.push(AE(a,c,e.documentUpdates).next(b=>{y=b.nr,E=b.sr})),!r.isEqual(Et.min())){const b=t.Bs.getLastRemoteSnapshotVersion(a).next(x=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(b)}return ne.waitFor(f).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,E)).next(()=>y)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.yc.get(a);c&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?ft(c.fc):i.removedDocuments.size>0&&(ft(c.fc),c.fc=!1))}),yield nu(t,r,e)}catch(r){yield qa(r)}}),wv.apply(this,arguments)}function lb(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,c)=>{const f=c.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,c){const f=tt(a);f.onlineState=c;let y=!1;f.queries.forEach((E,b)=>{for(const x of b.listeners)x.Mu(c)&&(y=!0)}),y&&YE(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Gx(n,e,t){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,ye.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let c=new Nn(Qe.comparator);c=c.insert(a,Vn.newNoDocument(a,Et.min()));const f=zt().add(a),y=new k_(Et.min(),new Map,new Nn(kt),c,f);yield tI(r,y),r.gc=r.gc.remove(a),r.yc.delete(e),Iv(r)}else yield bm(r.localStore,e,!1).then(()=>lp(r,e,t)).catch(qa)}),Ev.apply(this,arguments)}function nI(n,e){return db.apply(this,arguments)}function db(){return db=(0,ye.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const i=yield function Ax(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,f,y,E){const b=y.batch,x=b.keys();let P=ne.resolve();return x.forEach(B=>{P=P.next(()=>E.getEntry(f,B)).next(Y=>{const pe=y.docVersions.get(B);ft(null!==pe),Y.version.compareTo(pe)<0&&(b.applyToRemoteDocument(Y,y),Y.isValidDocument()&&(Y.setReadTime(y.commitVersion),E.addEntry(Y)))})}),P.next(()=>c.mutationQueue.removeMutationBatch(f,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=zt();for(let y=0;y<c.mutationResults.length;++y)c.mutationResults[y].transformResults.length>0&&(f=f.add(c.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);pb(t,r,null),fb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nu(t,i)}catch(i){yield qa(i)}}),db.apply(this,arguments)}function hb(n,e,t){return km.apply(this,arguments)}function km(){return km=(0,ye.Z)(function*(n,e,t){const r=tt(n);try{const i=yield function(a,c){const f=tt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return f.mutationQueue.lookupMutationBatch(y,c).next(b=>(ft(null!==b),E=b.keys(),f.mutationQueue.removeMutationBatch(y,b))).next(()=>f.mutationQueue.performConsistencyCheck(y)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(y,E,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>f.localDocuments.getDocuments(y,E))})}(r.localStore,e);pb(r,e,t),fb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nu(r,i)}catch(i){yield qa(i)}}),km.apply(this,arguments)}function rI(){return rI=(0,ye.Z)(function*(n,e){const t=tt(n);tu(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=tt(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Om(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),rI.apply(this,arguments)}function fb(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function pb(n,e,t){const r=tt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function lp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||gb(n,r)})}function gb(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Rm(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Iv(n))}function iI(n,e,t){for(const r of t)r instanceof gv?(n.Ic.addReference(r.key,e),qx(n,r)):r instanceof ub?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||gb(n,r.key)):at()}function qx(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.mc.add(r),Iv(n))}function Iv(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Qe(an.fromString(e)),r=n.Ac.next();n.yc.set(r,new yv(t)),n.gc=n.gc.insert(t,r),xm(n.remoteStore,new sc(gs(eh(t.path)),r,"TargetPurposeLimboResolution",Xs.ct))}}function nu(n,e,t){return mb.apply(this,arguments)}function mb(){return mb=(0,ye.Z)(function*(n,e,t){const r=tt(n),i=[],a=[],c=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,y)=>{c.push(r.Rc(y,e,t).then(E=>{if((E||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,E?.fromCache?"not-current":"current"),E){i.push(E);const b=J_.Li(y.targetId,E);a.push(b)}}))}),yield Promise.all(c),r.dc.nu(i),yield(f=(0,ye.Z)(function*(y,E){const b=tt(y);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ne.forEach(E,P=>ne.forEach(P.Fi,B=>b.persistence.referenceDelegate.addReference(x,P.targetId,B)).next(()=>ne.forEach(P.Bi,B=>b.persistence.referenceDelegate.removeReference(x,P.targetId,B)))))}catch(x){if(!Xu(x))throw x;Ve("LocalStore","Failed to update sequence numbers: "+x)}for(const x of E){const P=x.targetId;if(!x.fromCache){const B=b.Ji.get(P),pe=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);b.Ji=b.Ji.insert(P,pe)}}}),function(y,E){return f.apply(this,arguments)})(r.localStore,a))}),mb.apply(this,arguments)}function Zx(n,e){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,ye.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield SE(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(f=>{f.reject(new Se(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nu(t,r.er)}var i}),Lm.apply(this,arguments)}function yb(n,e){const t=tt(n),r=t.yc.get(e);if(r&&r.fc)return zt().add(r.key);{let i=zt();const a=t._c.get(e);if(!a)return i;for(const c of a){const f=t.wc.get(c);i=i.unionWith(f.view.nc)}return i}}function _b(n,e){return sI.apply(this,arguments)}function sI(){return sI=(0,ye.Z)(function*(n,e){const t=tt(n),r=yield xE(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&iI(t,e.targetId,i.cc),i}),sI.apply(this,arguments)}function oI(n,e){return aI.apply(this,arguments)}function aI(){return aI=(0,ye.Z)(function*(n,e){const t=tt(n);return Rx(t.localStore,e).then(r=>nu(t,r))}),aI.apply(this,arguments)}function Kx(n,e,t,r){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,ye.Z)(function*(n,e,t,r){const i=tt(n),a=yield function(c,f){const y=tt(c),E=tt(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",b=>E.Sn(b,f).next(x=>x?y.localDocuments.getDocuments(b,x):ne.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield ap(i.remoteStore):"acknowledged"===t||"rejected"===t?(pb(i,e,r||null),fb(i,e),f=e,tt(tt(i.localStore).mutationQueue).Cn(f)):at(),yield nu(i,a)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),Cv.apply(this,arguments)}function Dv(){return Dv=(0,ye.Z)(function*(n,e){const t=tt(n);if(Eb(t),Ib(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Yx(t,r.toArray());t.vc=!0,yield hv(t.remoteStore,!0);for(const a of i)xm(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(lp(t,c),bm(t.localStore,c,!0))),Rm(t.remoteStore,c)}),yield i,yield Yx(t,r),function(a){const c=tt(a);c.yc.forEach((f,y)=>{Rm(c.remoteStore,y)}),c.Ic.Ts(),c.yc=new Map,c.gc=new Nn(Qe.comparator)}(t),t.vc=!1,yield hv(t.remoteStore,!1)}}),Dv.apply(this,arguments)}function Yx(n,e,t){return uI.apply(this,arguments)}function uI(){return uI=(0,ye.Z)(function*(n,e,t){const r=tt(n),i=[],a=[];for(const c of e){let f;const y=r._c.get(c);if(y&&0!==y.length){f=yield Tm(r.localStore,gs(y[0]));for(const E of y){const b=r.wc.get(E),x=yield _b(r,b);x.snapshot&&a.push(x.snapshot)}}else{const E=yield xx(r.localStore,c);f=yield Tm(r.localStore,E),yield _v(r,Fm(E),c,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),uI.apply(this,arguments)}function Fm(n){return k0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function zM(n){const e=tt(n);return tt(tt(e.localStore).persistence).$i()}function Qx(n,e,t,r){return wb.apply(this,arguments)}function wb(){return wb=(0,ye.Z)(function*(n,e,t,r){const i=tt(n);if(i.vc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield Rx(i.localStore,HD(a[0])),f=k_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Gr.EMPTY_BYTE_STRING);yield nu(i,c,f);break}case"rejected":yield bm(i.localStore,e,!0),lp(i,e,r);break;default:at()}}),wb.apply(this,arguments)}function GM(n,e,t){return cI.apply(this,arguments)}function cI(){return cI=(0,ye.Z)(function*(n,e,t){const r=Eb(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const a=yield xx(r.localStore,i),c=yield Tm(r.localStore,a);yield _v(r,Fm(a),c.targetId,!1,c.resumeToken),xm(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield bm(r.localStore,i,!1).then(()=>{Rm(r.remoteStore,i),lp(r,i)}).catch(qa))}}),cI.apply(this,arguments)}function Eb(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gx.bind(null,e),e.dc.nu=$x.bind(null,e.eventManager),e.dc.Pc=fv.bind(null,e.eventManager),e}function Ib(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hb.bind(null,e),e}class Tv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.serializer=Wr(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return bE(this.persistence,new UT,e.initialUser,this.serializer)}createPersistence(e){return new LT(Z_.zs,this.serializer)}createSharedClientState(e){return new Mx}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Cb extends Tv{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield Ib(r.Vc.syncEngine),yield ap(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return bE(this.persistence,new UT,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new z_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new wD(t,this.persistence);return new HA(e.asyncQueue,r)}createPersistence(e){const t=TE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new Y_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,GT(),UE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Mx}}class Xx extends Cb{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof LE&&(r.sharedClientState.syncEngine={jr:Kx.bind(null,i),zr:Qx.bind(null,i),Wr:GM.bind(null,i),$i:zM.bind(null,i),Qr:oI.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,ye.Z)(function*(c){yield function vb(n,e){return Dv.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=GT();if(!LE.D(t))throw new Se(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=TE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new LE(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Um{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>lb(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Zx.bind(null,r.syncEngine),yield hv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new jM}createDatastore(e){const t=Wr(e.databaseInfo.databaseId),r=new zT(e.databaseInfo);return new BE(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>lb(this.syncEngine,f,0),c=FE.D()?new FE:new Px,new qT(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,f,y,E){const b=new $M(r,i,a,c,f,y);return E&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=tt(t);Ve("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield fh(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function eR(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class lI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class tR{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Er,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new ob(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ye.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class qM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(a,c){const f=tt(a),y=dm(f.serializer)+"/documents",E={documents:c.map(B=>lm(f.serializer,B))},b=yield f.vo("BatchGetDocuments",y,E,c.length),x=new Map;b.forEach(B=>{const Y=function fx(n,e){return"found"in e?function(t,r){ft(!!r.found);const i=eu(t,r.found.name),a=Dr(r.found.updateTime),c=r.found.createTime?Dr(r.found.createTime):Et.min(),f=new hi({mapValue:{fields:r.found.fields}});return Vn.newFoundDocument(i,a,c,f)}(n,e):"missing"in e?function(t,r){ft(!!r.missing),ft(!!r.readTime);const i=eu(t,r.missing),a=Dr(r.readTime);return Vn.newNoDocument(i,a)}(n,e):at()}(f.serializer,B);x.set(Y.key.toString(),Y)});const P=[];return c.forEach(B=>{const Y=x.get(B.toString());ft(!!Y),P.push(Y)}),P}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Qe.fromPath(i);e.mutations.push(new Z0(a,e.precondition(a)))}),yield(r=(0,ye.Z)(function*(i,a){const c=tt(i),f=dm(c.serializer)+"/documents",y={writes:a.map(E=>hm(c.serializer,E))};yield c.Io("Commit",f,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Et.min())?Jn.exists(!1):Jn.updateTime(t):Jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Se(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jn.updateTime(t)}return Jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class s{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new VE(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ye.Z)(function*(){const t=new qM(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Vf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Q0(t)}return!1}}class o{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ti.UNAUTHENTICATED,this.clientId=yD.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ye.Z)(function*(f){Ve("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Om(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function u(n,e){return l.apply(this,arguments)}function l(){return l=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(a){r.isEqual(a)||(yield SE(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),l.apply(this,arguments)}function d(n,e){return p.apply(this,arguments)}function p(){return p=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield I(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>JT(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>JT(e.remoteStore,a)),n._onlineComponents=e}),p.apply(this,arguments)}function _(n){return"FirebaseError"===n.name?n.code===ue.FAILED_PRECONDITION||n.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function I(n){return D.apply(this,arguments)}function D(){return D=(0,ye.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield u(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!_(t))throw t;xo("Error using user provided cache. Falling back to memory cache: "+t),yield u(n,new Tv)}}else Ve("FirestoreClient","Using default OfflineComponentProvider"),yield u(n,new Tv);return n._offlineComponents}),D.apply(this,arguments)}function A(n){return M.apply(this,arguments)}function M(){return M=(0,ye.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield d(n,n._uninitializedComponentsProvider._online)):(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield d(n,new Um))),n._onlineComponents}),M.apply(this,arguments)}function U(n){return I(n).then(e=>e.persistence)}function W(n){return I(n).then(e=>e.localStore)}function J(n){return A(n).then(e=>e.remoteStore)}function ve(n){return A(n).then(e=>e.syncEngine)}function Ge(n){return pt.apply(this,arguments)}function pt(){return pt=(0,ye.Z)(function*(n){const e=yield A(n),t=e.eventManager;return t.onListen=HM.bind(null,e.syncEngine),t.onUnlisten=Hx.bind(null,e.syncEngine),t}),pt.apply(this,arguments)}function fn(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,c,f,y){const E=new lI({next:x=>{a.enqueueAndForget(()=>ib(i,b));const P=x.docs.has(c);!P&&x.fromCache?y.reject(new Se(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&x.fromCache&&f&&"server"===f.source?y.reject(new Se(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),b=new QE(eh(c.path),E,{includeMetadataChanges:!0,Ku:!0});return nb(i,b)}(yield Ge(n),n.asyncQueue,e,t,r)})),r.promise}function dI(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,c,f,y){const E=new lI({next:x=>{a.enqueueAndForget(()=>ib(i,b)),x.fromCache&&"server"===f.source?y.reject(new Se(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),b=new QE(c,E,{includeMetadataChanges:!0,Ku:!0});return nb(i,b)}(yield Ge(n),n.asyncQueue,e,t,r)})),r.promise}function ZM(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const KM=new Map;function nR(n,e,t){if(!t)throw new Se(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YM(n,e,t,r){if(!0===e&&!0===r)throw new Se(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QM(n){if(!Qe.isDocumentKey(n))throw new Se(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JM(n){if(Qe.isDocumentKey(n))throw new Se(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Db(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Db(n);throw new Se(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function XM(n,e){if(e<=0)throw new Se(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class eP{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=ZM(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Se(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Se(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Se(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Se(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new hD;switch(t.type){case"firstParty":return new BA(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Se(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=KM.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),KM.delete(e),t.terminate())}(this),Promise.resolve()}}class pr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pr(this.firestore,e,this._key)}}class ms{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ms(this.firestore,e,this._query)}}class Ol extends ms{constructor(e,t,r){super(e,t,eh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pr(this.firestore,null,new Qe(e))}withConverter(e){return new Ol(this.firestore,e,this._path)}}function nP(n,e,...t){if(n=(0,k.m9)(n),nR("collection","path",e),n instanceof hI){const r=an.fromString(e,...t);return JM(r),new Ol(n,null,r)}{if(!(n instanceof pr||n instanceof Ol))throw new Se(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return JM(r),new Ol(n.firestore,null,r)}}function Tb(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=yD.A()),nR("doc","path",e),n instanceof hI){const r=an.fromString(e,...t);return QM(r),new pr(n,null,new Qe(r))}{if(!(n instanceof pr||n instanceof Ol))throw new Se(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return QM(r),new pr(n.firestore,n instanceof Ol?n.converter:null,new Qe(r))}}function rP(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof pr||n instanceof Ol)&&(e instanceof pr||e instanceof Ol)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function rR(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof ms&&e instanceof ms&&n.firestore===e.firestore&&zf(n._query,e._query)&&n.converter===e.converter}class Bk{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new VE(this,"async_queue_retry"),this.Xc=()=>{const t=UE();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=UE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=UE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Er;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Xu(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,hr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=eb.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&at()}verifyOperationInProgress(){}sa(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function iR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class jk{constructor(){this._progressObserver={},this._taskCompletionResolver=new Er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class gr extends hI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Bk,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||iP(this),this._firestoreClient.terminate()}}function ni(n){return n._firestoreClient||iP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function iP(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new QA(n._databaseId,f,n._persistenceKey,(E=i).host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,ZM(E.experimentalLongPollingOptions),E.useFetchStreams));var f,E;n._firestoreClient=new o(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function sP(n,e,t){const r=new Er;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield u(n,t),yield d(n,e),r.resolve()}catch(i){const a=i;if(!_(a))throw a;xo("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function oP(n){if(n._initialized||n._terminated)throw new Se(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class kl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kl(Gr.fromBase64String(e))}catch(t){throw new Se(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kl(Gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class mh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vm{constructor(e){this._methodName=e}}class bb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}const Jk=/^__.*__$/;class Xk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ic(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kf(e,this.data,t,this.fieldTransforms)}}class aP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ic(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class Sb{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Sb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Rb(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(uP(this.ca)&&Jk.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class eL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Wr(e)}ya(e,t,r,i=!1){return new Sb({ca:e,methodName:t,ga:r,path:Qn.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bm(n){const e=n._freezeSettings(),t=Wr(n._databaseId);return new eL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ab(n,e,t,r,i,a={}){const c=n.ya(a.merge||a.mergeFields?2:0,e,t,i);uR("Data must be an object, but it was:",c,r);const f=dP(r,c);let y,E;if(a.merge)y=new ps(c.fieldMask),E=c.fieldTransforms;else if(a.mergeFields){const b=[];for(const x of a.mergeFields){const P=gI(e,x,t);if(!c.contains(P))throw new Se(ue.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);fP(b,P)||b.push(P)}y=new ps(b),E=c.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,E=c.fieldTransforms;return new Xk(new hi(f),y,E)}class pI extends Vm{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pI}}function cP(n,e,t){return new Sb({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class sR extends Vm{_toFieldTransform(e){return new qf(e.path,new Wf)}isEqual(e){return e instanceof sR}}class tL extends Vm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=cP(this,e,!0),r=this.pa.map(a=>jm(a,t)),i=new Tl(r);return new qf(e.path,i)}isEqual(e){return this===e}}class nL extends Vm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=cP(this,e,!0),r=this.pa.map(a=>jm(a,t)),i=new bl(r);return new qf(e.path,i)}isEqual(e){return this===e}}class rL extends Vm{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Sl(e.serializer,ZD(e.serializer,this.Ia));return new qf(e.path,t)}isEqual(e){return this===e}}function oR(n,e,t,r){const i=n.ya(1,e,t);uR("Data must be an object, but it was:",i,r);const a=[],c=hi.empty();ec(r,(y,E)=>{const b=xb(e,y,t);E=(0,k.m9)(E);const x=i.da(b);if(E instanceof pI)a.push(b);else{const P=jm(E,x);null!=P&&(a.push(b),c.set(b,P))}});const f=new ps(a);return new aP(c,f,i.fieldTransforms)}function aR(n,e,t,r,i,a){const c=n.ya(1,e,t),f=[gI(e,r,t)],y=[i];if(a.length%2!=0)throw new Se(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)f.push(gI(e,a[P])),y.push(a[P+1]);const E=[],b=hi.empty();for(let P=f.length-1;P>=0;--P)if(!fP(E,f[P])){const B=f[P];let Y=y[P];Y=(0,k.m9)(Y);const pe=c.da(B);if(Y instanceof pI)E.push(B);else{const xe=jm(Y,pe);null!=xe&&(E.push(B),b.set(B,xe))}}const x=new ps(E);return new aP(b,x,c.fieldTransforms)}function lP(n,e,t,r=!1){return jm(t,n.ya(r?4:3,e))}function jm(n,e){if(hP(n=(0,k.m9)(n)))return uR("Unsupported field value:",e,n),dP(n,e);if(n instanceof Vm)return function(t,r){if(!uP(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let f=jm(c,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ZD(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Fn.fromDate(t);return{timestampValue:Qf(r.serializer,i)}}if(t instanceof Fn){const i=new Fn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Qf(r.serializer,i)}}if(t instanceof bb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof kl)return{bytesValue:aT(r.serializer,t._byteString)};if(t instanceof pr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:uT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Db(t)}`)}(n,e)}function dP(n,e){const t={};return w0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ec(n,(r,i)=>{const a=jm(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function hP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Fn||n instanceof bb||n instanceof kl||n instanceof pr||n instanceof Vm)}function uR(n,e,t){if(!hP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Db(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function gI(n,e,t){if((e=(0,k.m9)(e))instanceof mh)return e._internalPath;if("string"==typeof e)return xb(n,e);throw Rb("Field path arguments must be of type string or ",n,!1,void 0,t)}const iL=new RegExp("[~\\*/\\[\\]]");function xb(n,e,t){if(e.search(iL)>=0)throw Rb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mh(...e.split("."))._internalPath}catch{throw Rb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rb(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(a||c)&&(y+=" (found",a&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Se(ue.INVALID_ARGUMENT,f+n+y)}function fP(n,e){return n.some(t=>t.isEqual(e))}class mI{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sL extends mI{data(){return super.data()}}function Nb(n,e){return"string"==typeof e?xb(n,e):e instanceof mh?e._internalPath:e._delegate._internalPath}function pP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Se(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cR{}class yI extends cR{}function dp(n,e,...t){let r=[];e instanceof cR&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof bv).length,c=i.filter(f=>f instanceof _I).length;if(a>1||a>0&&c>0)throw new Se(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class _I extends yI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _I(e,t,r)}_apply(e){const t=this._parse(e);return _P(e._query,t),new ms(e.firestore,e.converter,U0(e._query,t))}_parse(e){const t=Bm(e.firestore);return function(i,a,c,f,y,E,b){let x;if(y.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Se(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){yP(b,E);const P=[];for(const B of b)P.push(mP(f,i,B));x={arrayValue:{values:P}}}else x=mP(f,i,b)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||yP(b,E),x=lP(c,"where",b,"in"===E||"not-in"===E);return Qt.create(y,E,x)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class bv extends cR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Tn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const f of c)_P(a,f),a=U0(a,f)}(e._query,t),new ms(e.firestore,e.converter,U0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lR extends yI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lR(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Se(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Se(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new vl(i,a);return function(f,y){if(null===F0(f)){const E=Il(f);null!==E&&vP(0,E,y.field)}}(r,c),c}(e._query,this._field,this._direction);return new ms(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Ro(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Mb extends yI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Mb(e,t,r)}_apply(e){return new ms(e.firestore,e.converter,om(e._query,this._limit,this._limitType))}}class Pb extends yI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Pb(e,t,r)}_apply(e){const t=gP(e,this.type,this._docOrFields,this._inclusive);return new ms(e.firestore,e.converter,(i=t,new Ro((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Ob extends yI{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Ob(e,t,r)}_apply(e){const t=gP(e,this.type,this._docOrFields,this._inclusive);return new ms(e.firestore,e.converter,(i=t,new Ro((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function gP(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof mI)return function(i,a,c,f,y){if(!f)throw new Se(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const E=[];for(const b of nh(i))if(b.field.isKeyField())E.push(Qd(a,f.key));else{const x=f.data.field(b.field);if(C_(x))throw new Se(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const P=b.field.canonicalString();throw new Se(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}E.push(x)}return new _l(E,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Bm(n.firestore);return function(a,c,f,y,E,b){const x=a.explicitOrderBy;if(E.length>x.length)throw new Se(ue.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let B=0;B<E.length;B++){const Y=E[B];if(x[B].field.isKeyField()){if("string"!=typeof Y)throw new Se(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof Y}`);if(!th(a)&&-1!==Y.indexOf("/"))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${Y}' contains a slash.`);const pe=a.path.child(an.fromString(Y));if(!Qe.isDocumentKey(pe))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${pe}' is not because it contains an odd number of segments.`);const xe=new Qe(pe);P.push(Qd(c,xe))}else{const pe=lP(f,y,Y);P.push(pe)}}return new _l(P,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function mP(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Se(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!th(e)&&-1!==t.indexOf("/"))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!Qe.isDocumentKey(r))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qd(n,new Qe(r))}if(t instanceof pr)return Qd(n,t._key);throw new Se(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Db(t)}.`)}function yP(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _P(n,e){if(e.isInequality()){const r=Il(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=F0(n);null!==a&&vP(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Se(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function vP(n,e,t){if(!t.isEqual(e))throw new Se(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class dR{convertValue(e,t="none"){switch(gl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ec(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new bb(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=D_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(em(e));default:return null}}convertTimestamp(e){const t=tc(e);return new Fn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);ft(yT(r));const i=new fl(r.get(1),r.get(3)),a=new Qe(r.popFirst(5));return i.isEqual(t)||hr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function kb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pL extends dR{constructor(e){super(),this.firestore=e}convertBytes(e){return new kl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}class $m{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yh extends mI{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Nb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class vI extends yh{data(e={}){return super.data(e)}}class hp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new $m(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new vI(this._firestore,this._userDataWriter,r.key,r,new $m(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new vI(r._firestore,r._userDataWriter,c.doc.key,c.doc,new $m(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new vI(r._firestore,r._userDataWriter,c.doc.key,c.doc,new $m(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,E=-1;return 0!==c.type&&(y=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),E=a.indexOf(c.doc.key)),{type:mL(c.type),doc:f,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function EP(n,e){return n instanceof yh&&e instanceof yh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof hp&&e instanceof hp&&n._firestore===e._firestore&&rR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class fp extends dR{constructor(e){super(),this.firestore=e}convertBytes(e){return new kl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}function IP(n,e,t){n=un(n,pr);const r=un(n.firestore,gr),i=kb(n.converter,e,t);return Sv(r,[Ab(Bm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Jn.none())])}function CP(n,e,t,...r){n=un(n,pr);const i=un(n.firestore,gr),a=Bm(i);let c;return c="string"==typeof(e=(0,k.m9)(e))||e instanceof mh?aR(a,"updateDoc",n._key,e,t,r):oR(a,"updateDoc",n._key,e),Sv(i,[c.toMutation(n._key,Jn.exists(!0))])}function DP(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||iR(e[c])||(a=e[c],c++);const f={includeMetadataChanges:a.includeMetadataChanges};if(iR(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let y,E,b;if(n instanceof pr)E=un(n.firestore,gr),b=eh(n._key.path),y={next:x=>{e[c]&&e[c](hR(E,n,x))},error:e[c+1],complete:e[c+2]};else{const x=un(n,ms);E=un(x.firestore,gr),b=x._query;const P=new fp(E);y={next:B=>{e[c]&&e[c](new hp(E,P,x,B))},error:e[c+1],complete:e[c+2]},pP(n._query)}return function(x,P,B,Y){const pe=new lI(Y),xe=new QE(P,pe,B);return x.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return nb(yield Ge(x),xe)})),()=>{pe.Dc(),x.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return ib(yield Ge(x),xe)}))}}(ni(E),b,f,y)}function Sv(n,e){return function(t,r){const i=new Er;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function zx(n,e,t){return vv.apply(this,arguments)}(yield ve(t),r,i)})),i.promise}(ni(n),e)}function hR(n,e,t){const r=t.docs.get(e._key),i=new fp(n);return new yh(n,i,e._key,r,new $m(t.hasPendingWrites,t.fromCache),e.converter)}const OL={maxAttempts:5};class TP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bm(e)}set(e,t,r){this._verifyNotCommitted();const i=pp(e,this._firestore),a=kb(i.converter,t,r),c=Ab(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Jn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=pp(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof mh?aR(this._dataReader,"WriteBatch.update",a._key,t,r,i):oR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=pp(e,this._firestore);return this._mutations=this._mutations.concat(new rh(t._key,Jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pp(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Se(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class kL extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bm(e)}get(e){const t=pp(e,this._firestore),r=new pL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const a=i[0];if(a.isFoundDocument())return new mI(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new mI(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=pp(e,this._firestore),a=kb(i.converter,t,r),c=Ab(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=pp(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof mh?aR(this._dataReader,"Transaction.update",a._key,t,r,i):oR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=pp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=pp(e,this._firestore),r=new fp(this._firestore);return super.get(e).then(i=>new yh(this._firestore,r,t._key,i._document,new $m(!1,!1),t.converter))}}function fR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function SP(){if(typeof Uint8Array>"u")throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function AP(){if(!function RD(){return typeof atob<"u"}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Lf=Zs.SDK_VERSION,(0,Zs._registerComponent)(new Ba.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new gr(new UA(t.getProvider("auth-internal")),new pD(t.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Se(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(f.options.projectId,y)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Zs.registerVersion)(o0,"3.12.1",n),(0,Zs.registerVersion)(o0,"3.12.1","esm2017")}();class wI{constructor(e){this._delegate=e}static fromBase64String(e){return AP(),new wI(kl.fromBase64String(e))}static fromUint8Array(e){return SP(),new wI(kl.fromUint8Array(e))}toBase64(){return AP(),this._delegate.toBase64()}toUint8Array(){return SP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pR(n){return function zL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class GL{enableIndexedDbPersistence(e,t){return function Hk(n,e){oP(n=un(n,gr));const t=ni(n);if(t._uninitializedComponentsProvider)throw new Se(ue.FAILED_PRECONDITION,"SDK cache is already specified.");xo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Um;return sP(t,i,new Cb(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function zk(n){oP(n=un(n,gr));const e=ni(n);if(e._uninitializedComponentsProvider)throw new Se(ue.FAILED_PRECONDITION,"SDK cache is already specified.");xo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Um;return sP(e,r,new Xx(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Gk(n){if(n._initialized&&!n._terminated)throw new Se(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Er;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Za.D())return Promise.resolve();const i=r+"main";yield Za.delete(i)}),function(r){return t.apply(this,arguments)})(TE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class xP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function tP(n,e,t,r={}){var i;const a=(n=un(n,hI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&xo("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=ti.MOCK_USER;else{c=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Se(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ti(y)}n._authCredentials=new fD(new Wg(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function qk(n){return function be(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield U(n),t=yield J(n);return e.setNetworkEnabled(!0),function(r){const i=tt(r);return i.vu.delete(0),op(i)}(t)}))}(ni(n=un(n,gr)))}(this._delegate)}disableNetwork(){return function Zk(n){return function xt(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield U(n),t=yield J(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const a=tt(i);a.vu.add(0),yield fh(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ni(n=un(n,gr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,YM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Wk(n){return function(e){const t=new Er;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function Wx(n,e){return rI.apply(this,arguments)}(yield ve(e),t)})),t.promise}(ni(n=un(n,gr)))}(this._delegate)}onSnapshotsInSync(e){return function TL(n,e){return function kk(n,e){const t=new lI(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Ge(n),i=t,tt(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Ge(n),i=t,void tt(r).ku.delete(i);var r,i}))}}(ni(n=un(n,gr)),iR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Av(this,nP(this._delegate,e))}catch(t){throw to(t,"collection()","Firestore.collection()")}}doc(e){try{return new ru(this,Tb(this._delegate,e))}catch(t){throw to(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new no(this,function Vk(n,e){if(n=un(n,hI),nR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ms(n,null,(t=e,new Ro(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw to(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function LL(n,e,t){n=un(n,gr);const r=Object.assign(Object.assign({},OL),t);return function(i){if(i.maxAttempts<1)throw new Se(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const f=new Er;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const y=yield function Fe(n){return A(n).then(e=>e.datastore)}(i);new s(i.asyncQueue,y,c,a,f).run()})),f.promise}(ni(n),i=>e(new kL(n,i)),r)}(this._delegate,t=>e(new RP(this,t)))}batch(){return ni(this._delegate),new NP(new TP(this._delegate,e=>Sv(this._delegate,e)))}loadBundle(e){return function Kk(n,e){const t=ni(n=un(n,gr)),r=new jk;return function Lk(n,e,t,r){const i=function(a,c){let f;return f="string"==typeof a?P_().encode(a):a,y=function(y,E){if(y instanceof Uint8Array)return eR(y,E);if(y instanceof ArrayBuffer)return eR(new Uint8Array(y),E);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new tR(y,c);var y}(t,Wr(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function WM(n,e,t){const r=tt(n);var i;(i=(0,ye.Z)(function*(a,c,f){try{const y=yield c.getMetadata();if(yield function(P,B){const Y=tt(P),pe=Dr(B.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",xe=>Y.qs.getBundleMetadata(xe,B.id)).then(xe=>!!xe&&xe.createTime.compareTo(pe)>=0)}(a.localStore,y))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(P=y).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);f._updateProgress(pv(y));const E=new ab(y,a.localStore,c.serializer);let b=yield c.bc();for(;b;){const P=yield E.zu(b);P&&f._updateProgress(P),b=yield c.bc()}const x=yield E.complete();return yield nu(a,x.Ju,void 0),yield function(P,B){const Y=tt(P);return Y.persistence.runTransaction("Save bundle","readwrite",pe=>Y.qs.saveBundleMetadata(pe,B))}(a.localStore,y),f._completeWith(x.progress),Promise.resolve(x.Hu)}catch(y){return xo("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var P}),function(a,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ve(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Yk(n,e){return function Fk(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=tt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield W(n),e)}))}(ni(n=un(n,gr)),e).then(t=>t?new ms(n,null,t.query):null)}(this._delegate,e).then(t=>t?new no(this,t):null)}}class Lb extends dR{constructor(e){super(),this.firestore=e}convertBytes(e){return new wI(new kl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ru.forKey(t,this.firestore,null)}}class RP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Lb(e)}get(e){const t=zm(e);return this._delegate.get(t).then(r=>new EI(this._firestore,new yh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=zm(e);return r?(fR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=zm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=zm(e);return this._delegate.delete(t),this}}class NP{constructor(e){this._delegate=e}set(e,t,r){const i=zm(e);return r?(fR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=zm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=zm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new vI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new II(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Hm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Hm(e,new Lb(e),t),i.set(t,a)),a}}Hm.INSTANCES=new WeakMap;class ru{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Lb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ru(t,new pr(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new ru(t,new pr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Av(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Av(this.firestore,nP(this._delegate,e))}catch(t){throw to(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof pr&&rP(this._delegate,e)}set(e,t){t=fR("DocumentReference.set",t);try{return t?IP(this._delegate,e,t):IP(this._delegate,e)}catch(r){throw to(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?CP(this._delegate,e):CP(this._delegate,e,t,...r)}catch(i){throw to(i,"updateDoc()","DocumentReference.update()")}}delete(){return function CL(n){return Sv(un(n.firestore,gr),[new rh(n._key,Jn.none())])}(this._delegate)}onSnapshot(...e){const t=MP(e),r=PP(e,i=>new EI(this.firestore,new yh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return DP(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function _L(n){n=un(n,pr);const e=un(n.firestore,gr),t=ni(e),r=new fp(e);return function Kt(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,c){try{const f=yield function(y,E){const b=tt(y);return b.persistence.runTransaction("read document","readonly",x=>b.localDocuments.getDocument(x,E))}(i,a);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Se(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=Om(f,`Failed to get document '${a} from cache`);c.reject(y)}}),function(i,a,c){return r.apply(this,arguments)})(yield W(n),e,t);var r})),t.promise}(t,n._key).then(i=>new yh(e,r,n._key,i,new $m(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function vL(n){n=un(n,pr);const e=un(n.firestore,gr);return fn(ni(e),n._key,{source:"server"}).then(t=>hR(e,n,t))}(this._delegate):function yL(n){n=un(n,pr);const e=un(n.firestore,gr);return fn(ni(e),n._key).then(t=>hR(e,n,t))}(this._delegate),t.then(r=>new EI(this.firestore,new yh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ru(this.firestore,this._delegate.withConverter(e?Hm.getInstance(this.firestore,e):null))}}function to(n,e,t){return n.message=n.message.replace(e,t),n}function MP(n){for(const e of n)if("object"==typeof e&&!pR(e))return e;return{}}function PP(n,e){var t,r;let i;return i=pR(n[0])?n[0]:pR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class EI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ru(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return EP(this._delegate,e._delegate)}}class II extends EI{data(e){const t=this._delegate.data(e);return function dD(n,e){n||at()}(void 0!==t),t}}class no{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Lb(e)}where(e,t,r){try{return new no(this.firestore,dp(this._delegate,function oL(n,e,t){const r=e,i=Nb("where",n);return _I._create(i,r,t)}(e,t,r)))}catch(i){throw to(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new no(this.firestore,dp(this._delegate,function aL(n,e="asc"){const t=e,r=Nb("orderBy",n);return lR._create(r,t)}(e,t)))}catch(r){throw to(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new no(this.firestore,dp(this._delegate,function uL(n){return XM("limit",n),Mb._create("limit",n,"F")}(e)))}catch(t){throw to(t,"limit()","Query.limit()")}}limitToLast(e){try{return new no(this.firestore,dp(this._delegate,function cL(n){return XM("limitToLast",n),Mb._create("limitToLast",n,"L")}(e)))}catch(t){throw to(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new no(this.firestore,dp(this._delegate,function lL(...n){return Pb._create("startAt",n,!0)}(...e)))}catch(t){throw to(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new no(this.firestore,dp(this._delegate,function dL(...n){return Pb._create("startAfter",n,!1)}(...e)))}catch(t){throw to(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new no(this.firestore,dp(this._delegate,function hL(...n){return Ob._create("endBefore",n,!1)}(...e)))}catch(t){throw to(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new no(this.firestore,dp(this._delegate,function fL(...n){return Ob._create("endAt",n,!0)}(...e)))}catch(t){throw to(t,"endAt()","Query.endAt()")}}isEqual(e){return rR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function EL(n){n=un(n,ms);const e=un(n.firestore,gr),t=ni(e),r=new fp(e);return function ia(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,c){try{const f=yield xE(i,a,!0),y=new mv(a,f.ir),E=y.sc(f.documents),b=y.applyChanges(E,!1);c.resolve(b.snapshot)}catch(f){const y=Om(f,`Failed to execute query '${a} against cache`);c.reject(y)}}),function(i,a,c){return r.apply(this,arguments)})(yield W(n),e,t);var r})),t.promise}(t,n._query).then(i=>new hp(e,r,n,i))}(this._delegate):"server"===e?.source?function IL(n){n=un(n,ms);const e=un(n.firestore,gr),t=ni(e),r=new fp(e);return dI(t,n._query,{source:"server"}).then(i=>new hp(e,r,n,i))}(this._delegate):function wL(n){n=un(n,ms);const e=un(n.firestore,gr),t=ni(e),r=new fp(e);return pP(n._query),dI(t,n._query).then(i=>new hp(e,r,n,i))}(this._delegate),t.then(r=>new gR(this.firestore,new hp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=MP(e),r=PP(e,i=>new gR(this.firestore,new hp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return DP(this._delegate,t,r)}withConverter(e){return new no(this.firestore,this._delegate.withConverter(e?Hm.getInstance(this.firestore,e):null))}}class qL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new II(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new no(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new II(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new II(this._firestore,r))})}isEqual(e){return EP(this._delegate,e._delegate)}}class Av extends no{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ru(this.firestore,e):null}doc(e){try{return new ru(this.firestore,void 0===e?Tb(this._delegate):Tb(this._delegate,e))}catch(t){throw to(t,"doc()","CollectionReference.doc()")}}add(e){return function DL(n,e){const t=un(n.firestore,gr),r=Tb(n),i=kb(n.converter,e);return Sv(t,[Ab(Bm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ru(this.firestore,t))}isEqual(e){return rP(this._delegate,e._delegate)}withConverter(e){return new Av(this.firestore,this._delegate.withConverter(e?Hm.getInstance(this.firestore,e):null))}}function zm(n){return un(n,pr)}class mR{constructor(...e){this._delegate=new mh(...e)}static documentId(){return new mR(Qn.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof mh&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function UL(){return new sR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Gm(e)}static delete(){const e=function FL(){return new pI("deleteField")}();return e._methodName="FieldValue.delete",new Gm(e)}static arrayUnion(...e){const t=function VL(...n){return new tL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Gm(t)}static arrayRemove(...e){const t=function BL(...n){return new nL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Gm(t)}static increment(e){const t=function jL(n){return new rL("increment",n)}(e);return t._methodName="FieldValue.increment",new Gm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ZL={Firestore:xP,GeoPoint:bb,Timestamp:Fn,Blob:wI,Transaction:RP,WriteBatch:NP,DocumentReference:ru,DocumentSnapshot:EI,Query:no,QueryDocumentSnapshot:II,QuerySnapshot:gR,CollectionReference:Av,FieldPath:mR,FieldValue:Gm,setLogLevel:function WL(n){!function FA(n){ll.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function YL(n){(function KL(n,e){n.INTERNAL.registerComponent(new Ba.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ZL)))})(n,(e,t)=>new xP(e,t,new GL)),n.registerVersion("@firebase/firestore-compat","0.3.10")}(rA.Z);var yR=F(6451),Fb=F(5363),QL=F(6063);class JL extends Ai.x{constructor(e=1/0,t=1/0,r=QL.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)f=y;f&&r.splice(0,f+1)}}}var OP=F(3099);function kP(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,OP.B)({connector:()=>new JL(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function LP(n,e){return(0,xu.m)(e)?Kn(()=>n,e):Kn(()=>n)}var _R=F(9468);F(259);const wR=new Map,UP={activated:!1,tokenObservers:[]},rF={initialized:!1,enabled:!1};function qr(n){return wR.get(n)||Object.assign({},UP)}function Vb(){return rF}const ER="https://content-firebaseappcheck.googleapis.com/v1",aF="exchangeDebugToken",VP={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class cF{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function lF(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ys=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function IR(n){if(!qr(n).activated)throw ys.create("use-before-activation",{appName:n.name})}function $b(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const x=yield i.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,a)}catch(x){throw ys.create("fetch-network-error",{originalErrorMessage:x?.message})}if(200!==c.status)throw ys.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(x){throw ys.create("fetch-parse-error",{originalErrorMessage:x?.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const E=1e3*Number(y[1]),b=Date.now();return{token:f.token,expireTimeMillis:b+E,issuedAtTimeMillis:b}}),DR.apply(this,arguments)}function BP(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${ER}/projects/${t}/apps/${r}:${aF}?key=${i}`,body:{debug_token:e}}}const pF="firebase-app-check-database",gF=1,CI="firebase-app-check-store";let Hb=null;function TR(){return TR=(0,ye.Z)(function*(n,e){const r=(yield function $P(){return Hb||(Hb=new Promise((n,e)=>{try{const t=indexedDB.open(pF,gF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ys.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(CI,{keyPath:"compositeKey"})}}catch(t){e(ys.create("storage-open",{originalErrorMessage:t?.message}))}}),Hb)}()).transaction(CI,"readwrite"),a=r.objectStore(CI).put({compositeKey:n,value:e});return new Promise((c,f)=>{a.onsuccess=y=>{c()},r.onerror=y=>{var E;f(ys.create("storage-set",{originalErrorMessage:null===(E=y.target.error)||void 0===E?void 0:E.message}))}})}),TR.apply(this,arguments)}const DI=new Xo.Yd("@firebase/app-check");function AR(n,e){return(0,k.hl)()?function yF(n,e){return function HP(n,e){return TR.apply(this,arguments)}(function GP(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{DI.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function RR(){return Vb().enabled}function NR(){return MR.apply(this,arguments)}function MR(){return MR=(0,ye.Z)(function*(){const n=Vb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),MR.apply(this,arguments)}const CF={error:"UNKNOWN_ERROR"};function DF(n){return k.US.encodeString(JSON.stringify(n),!1)}function zb(n){return PR.apply(this,arguments)}function PR(){return PR=(0,ye.Z)(function*(n,e=!1){const t=n.app;IR(t);const r=qr(t);let a,i=r.token;if(i&&!xv(i)&&(r.token=void 0,i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(xv(y)?i=y:yield AR(t,void 0))}if(!e&&i&&xv(i))return{token:i.token};let f,c=!1;if(RR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=$b(BP(t,yield NR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const y=yield r.exchangeTokenPromise;return yield AR(t,y),r.token=y,{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield qr(t).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?DI.warn(y.message):DI.error(y),a=y}return i?a?f=xv(i)?{token:i.token,internalError:a}:KP(a):(f={token:i.token},r.token=i,yield AR(t,i)):f=KP(a),c&&function ZP(n,e){const t=qr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),PR.apply(this,arguments)}function OR(){return OR=(0,ye.Z)(function*(n){const e=n.app;IR(e);const{provider:t}=qr(e);if(RR()){const r=yield NR(),{token:i}=yield $b(BP(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),OR.apply(this,arguments)}function LR(n,e){const t=qr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function qP(n){const{app:e}=n,t=qr(e);let r=t.tokenRefresher;r||(r=function TF(n){const{app:e}=n;return new cF((0,ye.Z)(function*(){let r;if(r=qr(e).token?yield zb(n,!0):yield zb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=qr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},VP.RETRIAL_MIN_WAIT,VP.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function xv(n){return n.expireTimeMillis-Date.now()>0}function KP(n){return{token:DF(CF),error:n}}class bF{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=qr(this.app);for(const t of e)LR(this.app,t.next);return Promise.resolve()}}const r1="app-check-internal";!function BF(){(0,Zs._registerComponent)(new Ba.wA("app-check",n=>function SF(n,e){return new bF(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(r1).initialize()})),(0,Zs._registerComponent)(new Ba.wA(r1,n=>function AF(n){return{getToken:e=>zb(n,e),getLimitedUseToken:()=>function WP(n){return OR.apply(this,arguments)}(n),addTokenListener:e=>function kR(n,e,t,r){const{app:i}=n,a=qr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&xv(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),qP(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>qP(n))}(n,"INTERNAL",e),removeTokenListener:e=>LR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Zs.registerVersion)("@firebase/app-check","0.8.0")}();class Wb{constructor(){return(0,vn.vb)("app-check")}}typeof window<"u"&&window;const jR=new m.OlP("angularfire2.auth.use-emulator"),$R=new m.OlP("angularfire2.auth.settings"),HR=new m.OlP("angularfire2.auth.tenant-id"),zR=new m.OlP("angularfire2.auth.langugage-code"),GR=new m.OlP("angularfire2.auth.use-device-language"),WR=new m.OlP("angularfire.auth.persistence"),qR=(n,e,t,r,i,a,c,f)=>(0,Mi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),c)for(const[E,b]of Object.entries(c))y.settings[E]=b;return f&&y.setPersistence(f),y},[t,r,i,a,c,f]);let ZR=(()=>{class n{constructor(t,r,i,a,c,f,y,E,b,x,P,B){const Y=new Ai.x,pe=mt(void 0).pipe((0,Fb.Q)(c.outsideAngular),Kn(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,2644)))),(0,lt.U)(()=>(0,Mi.on)(t,a,r)),(0,lt.U)(xe=>qR(xe,a,f,E,b,x,y,P)),kP({bufferSize:1,refCount:!1}));if(cu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{pe.pipe(cs()).subscribe();const ut=pe.pipe(Kn(Mt=>Mt.getRedirectResult().then(qt=>qt,()=>null)),vn.iC,kP({bufferSize:1,refCount:!1})),It=pe.pipe(Kn(Mt=>new zi.y(qt=>({unsubscribe:a.runOutsideAngular(()=>Mt.onAuthStateChanged(cn=>qt.next(cn),cn=>qt.error(cn),()=>qt.complete()))})))),yt=pe.pipe(Kn(Mt=>new zi.y(qt=>({unsubscribe:a.runOutsideAngular(()=>Mt.onIdTokenChanged(cn=>qt.next(cn),cn=>qt.error(cn),()=>qt.complete()))}))));this.authState=ut.pipe(LP(It),(0,_R.R)(c.outsideAngular),(0,Fb.Q)(c.insideAngular)),this.user=ut.pipe(LP(yt),(0,_R.R)(c.outsideAngular),(0,Fb.Q)(c.insideAngular)),this.idToken=this.user.pipe(Kn(Mt=>Mt?(0,Rn.D)(Mt.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(Kn(Mt=>Mt?(0,Rn.D)(Mt.getIdTokenResult()):mt(null))),this.credential=(0,yR.T)(ut,Y,this.authState.pipe(jr(Mt=>!Mt))).pipe((0,lt.U)(Mt=>Mt?.user?Mt:null),(0,_R.R)(c.outsideAngular),(0,Fb.Q)(c.insideAngular))}return(0,Mi.pX)(this,pe,a,{spy:{apply:(xe,ut,It)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&It.then(yt=>Y.next(yt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Mi.Dh),m.LFG(Mi.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(vn.HU),m.LFG(jR,8),m.LFG($R,8),m.LFG(HR,8),m.LFG(zR,8),m.LFG(GR,8),m.LFG(WR,8),m.LFG(Wb,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function s1(n,e){return function WF(n,e=Vy.z){return new zi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function KR(n,e){return s1(n,e).pipe((0,lt.U)(t=>({payload:t,type:"query"})))}function qb(n,e){return KR(n,e).pipe(us(void 0),_f(),(0,lt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const y=i.find(b=>b.doc.ref.isEqual(c.ref)),E=t?.payload.docs.find(b=>b.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&E&&JSON.stringify(E.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),a}))}function o1(n,e,t){return qb(n,t).pipe(Eo((r,i)=>function ZF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function KF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),vf(),(0,lt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function YR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function a1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class u1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,lt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(us(void 0),_f(),jr(([r,i])=>i.length>0||!r),(0,lt.U)(([r,i])=>i),vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Eo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=a1(e);return o1(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return KR(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),vn.iC)}get(e){return(0,Rn.D)(this.query.get(e)).pipe(vn.iC)}add(e){return this.ref.add(e)}doc(e){return new c1(this.ref.doc(e),this.afs)}}class c1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=h1(r,t);return new u1(i,a,this.afs)}snapshotChanges(){return function qF(n,e){return s1(n,e).pipe(us(void 0),_f(),(0,lt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,lt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Rn.D)(this.ref.get(e)).pipe(vn.iC)}}class YF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qb(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),jr(t=>t.length>0),vn.iC):qb(this.query,this.afs.schedulers.outsideAngular).pipe(vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Eo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=a1(e);return o1(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return KR(this.query,this.afs.schedulers.outsideAngular).pipe((0,lt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),vn.iC)}get(e){return(0,Rn.D)(this.query.get(e)).pipe(vn.iC)}}const l1=new m.OlP("angularfire2.enableFirestorePersistence"),d1=new m.OlP("angularfire2.firestore.persistenceSettings"),QF=new m.OlP("angularfire2.firestore.settings"),JF=new m.OlP("angularfire2.firestore.use-emulator");function h1(n,e=(t=>t)){return{query:e(n),ref:n}}let QR=(()=>{class n{constructor(t,r,i,a,c,f,y,E,b,x,P,B,Y,pe,xe,ut,It){this.schedulers=y;const yt=(0,Mi.on)(t,f,r),Mt=b;x&&qR(yt,f,P,Y,pe,xe,B,ut),[this.firestore,this.persistenceEnabled$]=(0,Mi.cc)(`${yt.name}.firestore`,"AngularFirestore",yt.name,()=>{const qt=f.runOutsideAngular(()=>yt.firestore());if(a&&qt.settings(a),Mt&&qt.useEmulator(...Mt),i&&!cu(c)){const cn=()=>{try{return(0,Rn.D)(qt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(Ls){return typeof console<"u"&&console.warn(Ls),mt(!1)}};return[qt,f.runOutsideAngular(cn)]}return[qt,mt(!1)]},[a,Mt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=h1(i,r),f=this.schedulers.ngZone.run(()=>a);return new u1(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new YF(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new c1(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Mi.Dh),m.LFG(Mi.xv,8),m.LFG(l1,8),m.LFG(QF,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(vn.HU),m.LFG(d1,8),m.LFG(JF,8),m.LFG(ZR,8),m.LFG(jR,8),m.LFG($R,8),m.LFG(HR,8),m.LFG(zR,8),m.LFG(GR,8),m.LFG(WR,8),m.LFG(Wb,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),XF=(()=>{class n{constructor(){_g.Z.registerVersion("angularfire",vn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:l1,useValue:!0},{provide:d1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[QR]}),n})(),JR=(()=>{class n{constructor(t){this.afs=t}loadFeatured(){return this.afs.collection("posts",t=>t.where("isFeatured","==",!0).limit(4)).snapshotChanges().pipe((0,lt.U)(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,data:i}})))}loadLatest(){return this.afs.collection("posts",t=>t.orderBy("createdAt")).snapshotChanges().pipe((0,lt.U)(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,data:i}})))}loadCategoryPosts(t){return this.afs.collection("posts",r=>r.where("category.categoryId","==",t)).snapshotChanges().pipe((0,lt.U)(r=>r.map(i=>{const a=i.payload.doc.data();return{id:i.payload.doc.id,data:a}})))}loadPost(t){return this.afs.doc(`posts/${t}`).valueChanges()}loadSimilar(t){return this.afs.collection("posts",r=>r.where("category.categoryId","==",t).limit(6)).snapshotChanges().pipe((0,lt.U)(r=>r.map(i=>{const a=i.payload.doc.data();return{id:i.payload.doc.id,data:a}})))}countViews(t){const r={views:_g.Z.firestore.FieldValue.increment(1)};this.afs.doc(`posts/${t}`).update(r).then(()=>{console.log("Views Value Incremented")})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(QR))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const e2=function(n){return["/post",n]};function t2(n,e){if(1&n&&(m.TgZ(0,"div",1),m._UZ(1,"img",2),m.TgZ(2,"div",3)(3,"small",4),m._uU(4),m.qZA(),m.TgZ(5,"small",5),m._uU(6,"Featured"),m.qZA(),m.TgZ(7,"small",6),m._uU(8),m.qZA(),m.TgZ(9,"h5",7),m._uU(10),m.qZA(),m.TgZ(11,"p"),m._uU(12),m.qZA(),m.TgZ(13,"small",8),m._uU(14),m.qZA()()()),2&n){const t=m.oxw();m.Q6J("routerLink",m.VKq(7,e2,t.postData.id)),m.xp6(1),m.s9C("src",t.postData.data.postImgPath,m.LSH),m.xp6(3),m.hij(" ",t.postData.data.category.category," "),m.xp6(4),m.hij("Views-",t.postData.data.views,""),m.xp6(2),m.Oqu(t.postData.data.title),m.xp6(2),m.hij(" ",t.postData.data.excerpt," "),m.xp6(2),m.hij(" ",t.postData.data.createdAt," ")}}let XR=(()=>{class n{constructor(){}ngOnInit(){console.log("In PostCardComponent"),console.log(this.postData)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-post-card"]],inputs:{postData:"postData"},decls:1,vars:1,consts:[["class","card shadow-effect mt-2",3,"routerLink",4,"ngIf"],[1,"card","shadow-effect","mt-2",3,"routerLink"],["alt","post-img","height","300px",1,"card-img-top",3,"src"],[1,"card-body"],[1,"bg-light","text-danger","text-center"],[1,"bg-light","text-success","text-center","ml-3"],[1,"bg-light","text-info","text-center","ml-3"],[1,"mt-1"],[1,"bg-light","text-warning","text-center"]],template:function(t,r){1&t&&m.YNc(0,t2,15,9,"div",0),2&t&&m.Q6J("ngIf",r.postData)},dependencies:[Bs,Gu],styles:[".card[_ngcontent-%COMP%]{max-width:400px;min-height:500px;transition:all .5ms ease-in-out .5ms}.card[_ngcontent-%COMP%]:hover{scale:1.1;box-shadow:3px 5px 33px 10px #4772fe4d}"]}),n})();function n2(n,e){if(1&n&&(m.TgZ(0,"div",9),m._UZ(1,"app-post-card",10),m.qZA()),2&n){const t=e.$implicit;m.xp6(1),m.Q6J("postData",t)}}function r2(n,e){if(1&n&&(m.TgZ(0,"div",11),m._UZ(1,"app-post-card",10),m.qZA()),2&n){const t=e.$implicit;m.xp6(1),m.Q6J("postData",t)}}let i2=(()=>{class n{constructor(t){this.postService=t,this.featuredArrayList=[],this.latestPostArrayList=[]}ngOnInit(){console.log("In intilization of Home Component"),this.postService.loadFeatured().subscribe(t=>{this.featuredArrayList=t}),this.postService.loadLatest().subscribe(t=>{this.latestPostArrayList=t})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(JR))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home"]],decls:18,vars:2,consts:[[1,"featured-section"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","text-center","mt-5"],[1,"text-white"],["class","col-lg-3 mt-3",4,"ngFor","ngForOf"],[1,"normal-posts","container","mt-5"],[1,"col-md-12","text-center"],["class","col-md-4 mt-3",4,"ngFor","ngForOf"],[1,"col-lg-3","mt-3"],[3,"postData"],[1,"col-md-4","mt-3"]],template:function(t,r){1&t&&(m.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),m._uU(5,"Featured Posts"),m.qZA(),m.TgZ(6,"p",4),m._uU(7," You can view the things that interested more poeple here. "),m.qZA()()(),m.TgZ(8,"div",2),m.YNc(9,n2,2,1,"div",5),m.qZA()()(),m.TgZ(10,"section",6)(11,"div",7)(12,"h2"),m._uU(13,"Latest Posts"),m.qZA(),m.TgZ(14,"p"),m._uU(15,"Freshly posted memories and travel destinations are posted here"),m.qZA()(),m.TgZ(16,"div",2),m.YNc(17,r2,2,1,"div",8),m.qZA()()),2&t&&(m.xp6(9),m.Q6J("ngForOf",r.featuredArrayList),m.xp6(8),m.Q6J("ngForOf",r.latestPostArrayList))},dependencies:[Oo,XR],styles:[".featured-section[_ngcontent-%COMP%]{padding-bottom:130px;padding-left:130px;padding-right:130px;background-color:var(--primary-color)}"]}),n})();function s2(n,e){if(1&n&&(m.TgZ(0,"div",7),m._UZ(1,"app-post-card",8),m.qZA()),2&n){const t=e.$implicit;m.xp6(1),m.Q6J("postData",t)}}function o2(n,e){if(1&n&&(m.TgZ(0,"div",5),m.YNc(1,s2,2,1,"div",6),m.qZA()),2&n){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",t.categoryPostList)}}let a2=(()=>{class n{constructor(t,r){this.postService=t,this.route=r,this.categoryPostList=[]}ngOnInit(){this.route.params.subscribe(t=>{this.categoryid=t.categoryid,this.categoryName=t.categoryName,this.postService.loadCategoryPosts(this.categoryid).subscribe(i=>{this.categoryPostList=i})})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(JR),m.Y36(Rs))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-single-category"]],decls:8,vars:2,consts:[[1,"background-theme","p-5"],[1,"container"],[1,"text-white"],[1,"container","mt-5","mb-5"],["class","row",4,"ngIf"],[1,"row"],["class","col-md-4 mb-5",4,"ngFor","ngForOf"],[1,"col-md-4","mb-5"],[3,"postData"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),m._uU(3),m.qZA(),m.TgZ(4,"p",2),m._uU(5," Lorem ipsum dolor sit amet consectetur adipisicing elit. Alias nemo reiciendis distinctio ipsa aliquam voluptatum odio nihil? Expedita, et repellendus. "),m.qZA()()(),m.TgZ(6,"div",3),m.YNc(7,o2,2,1,"div",4),m.qZA()),2&t&&(m.xp6(3),m.Oqu(r.categoryName),m.xp6(4),m.Q6J("ngIf",r.categoryPostList))},dependencies:[Oo,Bs,XR]}),n})(),u2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-comment-form"]],decls:17,vars:0,consts:[[1,"card","mt-5","shadow-effect"],[1,"card-body"],["action",""],[1,"form-group"],["for",""],["type","text","placeholder","Enter Your Name",1,"form-control","shadow-effect"],["placeholder","Add your comment here ","id","","cols","30","rows","10",1,"form-control","shadow-effect"],[1,"btn","btn-info","btn-theme"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"h4"),m._uU(3,"Leave a Comment"),m.qZA(),m.TgZ(4,"p"),m._uU(5," Lorem ipsum dolor, sit amet consectetur adipisicing elit. Corrupti, placeat. "),m.qZA(),m.TgZ(6,"form",2)(7,"div",3)(8,"label",4),m._uU(9,"Name"),m.qZA(),m._UZ(10,"input",5),m.qZA(),m.TgZ(11,"div",3)(12,"label",4),m._uU(13,"Comment"),m.qZA(),m._UZ(14,"textarea",6),m.qZA(),m.TgZ(15,"button",7),m._uU(16,"Add a comment"),m.qZA()()()())}}),n})(),c2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-comments-list"]],decls:40,vars:0,consts:[[1,"card","mt-5","mb-5","pb-5","shadow-effect"],[1,"card-body"],[1,"mt-3","mb-3"],[1,"comment-box","mt-3"],[1,"mb-0"],[1,"text-danger"],["href","#",1,"mt-1"],["href","#",1,"mt-1","ml-3"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),m._uU(3,"Comments (15,625)"),m.qZA(),m.TgZ(4,"div",3)(5,"h6",4),m._uU(6,"John Doe"),m.qZA(),m.TgZ(7,"small",5),m._uU(8,"LAST UPDATED - SEP 20,2023"),m.qZA(),m.TgZ(9,"div",2),m._uU(10," Lorem ipsum dolor sit amet consectetur adipisicing elit. Optio architecto pariatur eius veritatis quaerat fugit ducimus repellendus iusto omnis facilis. "),m.qZA(),m.TgZ(11,"a",6),m._uU(12,"Reply"),m.qZA(),m.TgZ(13,"a",7),m._uU(14,"View Reply "),m.qZA(),m._UZ(15,"hr"),m.qZA(),m.TgZ(16,"div",3)(17,"h6",4),m._uU(18,"John Doe"),m.qZA(),m.TgZ(19,"small",5),m._uU(20,"LAST UPDATED - SEP 20,2023"),m.qZA(),m.TgZ(21,"div",2),m._uU(22," Lorem ipsum dolor sit amet consectetur adipisicing elit. Optio architecto pariatur eius veritatis quaerat fugit ducimus repellendus iusto omnis facilis. "),m.qZA(),m.TgZ(23,"a",6),m._uU(24,"Reply"),m.qZA(),m.TgZ(25,"a",7),m._uU(26,"View Reply "),m.qZA(),m._UZ(27,"hr"),m.qZA(),m.TgZ(28,"div",3)(29,"h6",4),m._uU(30,"John Doe"),m.qZA(),m.TgZ(31,"small",5),m._uU(32,"LAST UPDATED - SEP 20,2023"),m.qZA(),m.TgZ(33,"div",2),m._uU(34," Lorem ipsum dolor sit amet consectetur adipisicing elit. Optio architecto pariatur eius veritatis quaerat fugit ducimus repellendus iusto omnis facilis. "),m.qZA(),m.TgZ(35,"a",6),m._uU(36,"Reply"),m.qZA(),m.TgZ(37,"a",7),m._uU(38,"View Reply "),m.qZA(),m._UZ(39,"hr"),m.qZA()()())},styles:[".comment-box[_ngcontent-%COMP%]{padding:15px 35px;background-color:#f0f0f0}"]}),n})();function l2(n,e){1&n&&(m.TgZ(0,"small",13),m._uU(1," Featured "),m.qZA())}function d2(n,e){if(1&n&&(m.TgZ(0,"div",5),m._UZ(1,"img",6),m.TgZ(2,"div",7)(3,"small",8),m._uU(4),m.qZA(),m.YNc(5,l2,2,0,"small",9),m.TgZ(6,"small",10),m._uU(7),m.qZA(),m.TgZ(8,"small",11),m._uU(9),m.qZA(),m.TgZ(10,"h1",12),m._uU(11),m.qZA(),m.TgZ(12,"p")(13,"b")(14,"i"),m._uU(15),m.qZA()()(),m.TgZ(16,"p"),m._uU(17," Lorem ipsum dolor sit amet consectetur adipisicing elit. Totam aperiam perspiciatis reprehenderit repudiandae, vero distinctio non corrupti tempora inventore qui ut odio accusantium voluptate iure beatae rerum error cumque earum. Ipsa, sit itaque doloremque minus, commodi accusantium, aperiam maxime ex inventore dolor fugit? Porro placeat minus nulla optio reiciendis nihil voluptatibus quia ducimus! Quas quibusdam officia sapiente tempora distinctio magni, accusantium quia, laboriosam voluptatum magnam dolore delectus laudantium quae est neque inventore nostrum ab veniam eaque cum consequatur blanditiis! Suscipit mollitia laborum quam quia qui eaque, rerum necessitatibus recusandae perferendis, animi sit! Non rem voluptate blanditiis, et iure minima corrupti inventore quod animi, quam placeat sed exercitationem repellendus veniam dicta beatae modi doloremque laboriosam magnam dolorum quasi impedit saepe atque. Pariatur, cumque repudiandae sint, officia magnam, exercitationem quis quaerat saepe corrupti minus placeat eius magni. Voluptatem nesciunt quia adipisci ipsum, autem sint perspiciatis iste distinctio in culpa dolores, eveniet vel? "),m.qZA()()()),2&n){const t=m.oxw();m.xp6(1),m.s9C("src",t.postContent.postImgPath,m.LSH),m.xp6(3),m.hij(" ",t.postContent.category.category," "),m.xp6(1),m.Q6J("ngIf",t.postContent.isFeatured),m.xp6(2),m.hij(" Views- ",t.postContent.views,""),m.xp6(2),m.Oqu(t.postContent.createdAt),m.xp6(2),m.Oqu(t.postContent.title),m.xp6(4),m.hij(" ",t.postContent.excerpt," ")}}function h2(n,e){if(1&n&&(m.ynx(0),m._UZ(1,"app-post-card",16),m.BQk()),2&n){const t=e.$implicit;m.xp6(1),m.Q6J("postData",t)}}function f2(n,e){if(1&n&&(m.TgZ(0,"div",14),m.YNc(1,h2,2,1,"ng-container",15),m.qZA()),2&n){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",t.similarPostsData)}}const p2=[{path:"",component:i2},{path:"category/:categoryName/:categoryid",component:a2},{path:"terms-conditions",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-terms-and-conditions"]],decls:14,vars:0,consts:[[1,"mt-5"],[1,"container","mt-5","mb-5","p-5","background-theme"],[1,"text-white","text-center"],[1,"mt-5","p-5","bg-secondary-theme"],[1,"text-center"],[1,"btn","btn-sm","btn-info","mt-5","btn-theme"]],template:function(t,r){1&t&&(m.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),m._uU(3,"Terms and Conditions"),m.qZA(),m.TgZ(4,"div",3)(5,"p"),m._uU(6," Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore delectus totam aliquam rem. Suscipit provident ratione repellendus excepturi odit optio, saepe doloremque eligendi tempora fugit voluptatum ab quos ipsa, minus explicabo alias nesciunt obcaecati cum maxime laboriosam nostrum possimus corporis non? Dicta officiis, quae voluptates laborum quidem cupiditate. Ea, consequuntur. "),m.qZA(),m.TgZ(7,"p"),m._uU(8," Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore delectus totam aliquam rem. Suscipit provident ratione repellendus excepturi odit optio, saepe doloremque eligendi tempora fugit voluptatum ab quos ipsa, minus explicabo alias nesciunt obcaecati cum maxime laboriosam nostrum possimus corporis non? Dicta officiis, quae voluptates laborum quidem cupiditate. Ea, consequuntur. "),m.qZA(),m.TgZ(9,"p"),m._uU(10," Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore delectus totam aliquam rem. Suscipit provident ratione repellendus excepturi odit optio, saepe doloremque eligendi tempora fugit voluptatum ab quos ipsa, minus explicabo alias nesciunt obcaecati cum maxime laboriosam nostrum possimus corporis non? Dicta officiis, quae voluptates laborum quidem cupiditate. Ea, consequuntur. "),m.qZA(),m.TgZ(11,"div",4)(12,"button",5),m._uU(13,"Back to Home"),m.qZA()()()()())}}),n})()},{path:"contact",component:yg},{path:"about",component:yw},{path:"post/:id",component:(()=>{class n{constructor(t,r){this.postService=t,this.route=r,this.similarPostsData=[]}ngOnInit(){this.route.params.subscribe(t=>{this.postId=t.id,this.updateViewCount(),console.log("In Single Post Component"),this.postService.loadPost(t.id).subscribe(r=>{this.postContent=r,console.log(this.postContent),this.loadSimilarPosts(this.postContent.category.categoryId)})})}loadSimilarPosts(t){this.postService.loadSimilar(t).subscribe(r=>{this.similarPostsData=r})}updateViewCount(){console.log("In update views count"),this.postService.countViews(this.postId)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(JR),m.Y36(Rs))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-single-post"]],decls:7,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-9"],["class","card shadow-effect",4,"ngIf"],["class","col-md-3",4,"ngIf"],[1,"card","shadow-effect"],["alt","single-post-img",1,"card-img-top","img-fluid",3,"src"],[1,"card-body"],[1,"bg-light","text-center","text-danger"],["class","bg-light text-center text-success ml-2",4,"ngIf"],[1,"bg-light","text-center","text-info","ml-2"],[1,"bg-light","text-center","text-warning","ml-2"],[1,"mt-3","mb-3"],[1,"bg-light","text-center","text-success","ml-2"],[1,"col-md-3"],[4,"ngFor","ngForOf"],[3,"postData"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2),m.YNc(3,d2,18,7,"div",3),m._UZ(4,"app-comment-form")(5,"app-comments-list"),m.qZA(),m.YNc(6,f2,2,1,"div",4),m.qZA()()),2&t&&(m.xp6(3),m.Q6J("ngIf",r.postContent),m.xp6(3),m.Q6J("ngIf",r.similarPostsData))},dependencies:[Oo,Bs,u2,c2,XR]}),n})()}];let g2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Uy.forRoot(p2),Uy]}),n})(),m2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-header"]],decls:4,vars:0,consts:[[1,"navbar","navbar-expand-lg","fixed-top","bg-white"],[1,"container","justify-content-center"],["href","#",1,"site-logo"]],template:function(t,r){1&t&&(m.TgZ(0,"header",0)(1,"div",1)(2,"a",2),m._uU(3,"ANG-BLOG"),m.qZA()()())},styles:["header[_ngcontent-%COMP%]{height:100px}.site-logo[_ngcontent-%COMP%]{font-size:1.5em}"]}),n})(),y2=(()=>{class n{constructor(t){this.afs=t}loadData(){return this.afs.collection("categories").snapshotChanges().pipe((0,lt.U)(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,data:i}})))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(QR))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _2=function(n,e){return["/category",n,e]};function v2(n,e){if(1&n&&(m.TgZ(0,"li",6)(1,"a",7),m._uU(2),m.qZA()()),2&n){const t=e.$implicit;m.xp6(1),m.Q6J("routerLink",m.WLB(2,_2,t.data.category,t.id)),m.xp6(1),m.hij(" ",t.data.category,"")}}function w2(n,e){if(1&n&&(m.TgZ(0,"ul",4),m.YNc(1,v2,3,5,"li",5),m.qZA()),2&n){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",t.categoryList)}}let E2=(()=>{class n{constructor(t){this.categoryService=t,this.categoryList=[]}ngOnInit(){this.categoryService.loadData().subscribe(t=>{console.log("In Categories nav bar component"),console.log(t),this.categoryList=t})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(y2))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-category-navbar"]],decls:4,vars:1,consts:[[1,"navbar","navbar-expand-lg","fixed-top"],[1,"container"],[1,"collapse","navbar-collapse","justify-content-center"],["class","navbar-nav",4,"ngIf"],[1,"navbar-nav"],["class","nav-item ml-3",4,"ngFor","ngForOf"],[1,"nav-item","ml-3"],[1,"nav-link",3,"routerLink"]],template:function(t,r){1&t&&(m.TgZ(0,"nav",0)(1,"div",1)(2,"div",2),m.YNc(3,w2,2,1,"ul",3),m.qZA()()()),2&t&&(m.xp6(3),m.Q6J("ngIf",r.categoryList))},dependencies:[Oo,Bs,Gu],styles:["nav[_ngcontent-%COMP%]{margin-top:100px;height:50px;background-color:var(--navbar-footer-color)}.nav-link[_ngcontent-%COMP%]{text-transform:uppercase}"]}),n})(),I2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-footer"]],decls:22,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-12","text-center"],[1,"site-logo"],[1,"nav","justify-content-center"],[1,"nav-item"],["href","",1,"nav-link"],[1,"mb-2","mt-2"]],template:function(t,r){1&t&&(m.TgZ(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),m._uU(5,"ANG-BLOG"),m.qZA(),m.TgZ(6,"div")(7,"ul",4)(8,"li",5)(9,"a",6),m._uU(10,"Home"),m.qZA()(),m.TgZ(11,"li",5)(12,"a",6),m._uU(13,"About"),m.qZA()(),m.TgZ(14,"li",5)(15,"a",6),m._uU(16,"Terms And Conditions"),m.qZA()(),m.TgZ(17,"li",5)(18,"a",6),m._uU(19,"Contact"),m.qZA()()()(),m.TgZ(20,"p",7),m._uU(21,"Copyright \xa9 2023 Blog Site"),m.qZA()()()()())},styles:["footer[_ngcontent-%COMP%]{height:130px;padding:15px;background-color:var(--navbar-footer-color)}.site-logo[_ngcontent-%COMP%]{font-size:1.2em}"]}),n})(),C2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-subscription"]],decls:14,vars:0,consts:[[1,"card","shadow-effect"],[1,"card-body"],[1,"mt-3","mb-5","text-center"],[1,"m-auto","subs-text"],["action","",1,"form-inline","mb-5","mt-5"],[1,"form-group","col-md-5"],["type","text","placeholder","Enter Your Name",1,"form-control","shadow-effect"],["type","email","placeholder","Enter your email",1,"form-control","shadow-effect"],[1,"col-md-2"],[1,"btn","btn-info","btn-block","btn-theme"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),m._uU(3,"SUBSRICPTION FORM"),m.qZA(),m.TgZ(4,"p",3),m._uU(5," Lorem ipsum dolor sit amet consectetur adipisicing elit. Praesentium, molestiae. "),m.qZA(),m.TgZ(6,"form",4)(7,"div",5),m._UZ(8,"input",6),m.qZA(),m.TgZ(9,"div",5),m._UZ(10,"input",7),m.qZA(),m.TgZ(11,"div",8)(12,"button",9),m._uU(13,"SUBSCRIBE"),m.qZA()()()()())},styles:[".card[_ngcontent-%COMP%]{background-color:var(--secondary-color);width:1200px}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]{width:100%}.subs-text[_ngcontent-%COMP%]{width:500px}"]}),n})(),D2=(()=>{class n{constructor(){this.title="AngularBlogApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-body"],[1,"container","mt-5","mb-5"],[1,"row","justify-content-center"]],template:function(t,r){1&t&&(m._UZ(0,"app-header")(1,"app-category-navbar"),m.TgZ(2,"div",0),m._UZ(3,"router-outlet"),m.qZA(),m.TgZ(4,"div",1)(5,"div",2),m._UZ(6,"app-subscription"),m.qZA()(),m._UZ(7,"app-footer"))},dependencies:[Ad,m2,E2,I2,C2],styles:[".app-body[_ngcontent-%COMP%]{margin-top:150px;min-height:35vh}"]}),n})();var T2=F(5032);const f1="@firebase/database";let eN="";function g1(n){eN=n}class A2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class x2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const m1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new A2(e)}}catch{}return new x2},Wm=m1("localStorage"),tN=m1("sessionStorage"),Rv=new Xo.Yd("@firebase/database"),y1=function(){let n=1;return function(){return n++}}(),_1=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},TI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=TI.apply(null,r):e+="object"==typeof r?(0,k.Wl)(r):r,e+=" "}return e};let qm=null,v1=!0;const w1=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Rv.logLevel=Xo.in.VERBOSE,qm=Rv.log.bind(Rv),e&&tN.set("logging_enabled",!0)):"function"==typeof n?qm=n:(qm=null,tN.remove("logging_enabled"))},Xi=function(...n){if(!0===v1&&(v1=!1,null===qm&&!0===tN.get("logging_enabled")&&w1(!0)),qm){const e=TI.apply(null,n);qm(e)}},bI=function(n){return function(...e){Xi(n,...e)}},nN=function(...n){const e="FIREBASE INTERNAL ERROR: "+TI(...n);Rv.error(e)},Ll=function(...n){const e=`FIREBASE FATAL ERROR: ${TI(...n)}`;throw Rv.error(e),new Error(e)},ks=function(...n){const e="FIREBASE WARNING: "+TI(...n);Rv.warn(e)},Zb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},gp="[MIN_NAME]",_h="[MAX_NAME]",Zm=function(n,e){if(n===e)return 0;if(n===gp||e===_h)return-1;if(e===gp||n===_h)return 1;{const t=C1(n),r=C1(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},M2=function(n,e){return n===e?0:n<e?-1:1},SI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Wl)(e))},rN=function(n){if("object"!=typeof n||null===n)return(0,k.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Wl)(e[r]),t+=":",t+=rN(n[e[r]]);return t+="}",t},E1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function es(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const I1=function(n){(0,k.hu)(!Zb(n),"Invalid JSON number");const r=1023;let i,a,c,f,y;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,c=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const E=[];for(y=52;y;y-=1)E.push(c%2?1:0),c=Math.floor(c/2);for(y=11;y;y-=1)E.push(a%2?1:0),a=Math.floor(a/2);E.push(i?1:0),E.reverse();const b=E.join("");let x="";for(y=0;y<64;y+=8){let P=parseInt(b.substr(y,8),2).toString(16);1===P.length&&(P="0"+P),x+=P}return x.toLowerCase()},L2=new RegExp("^-?(0*)\\d{1,10}$"),C1=function(n){if(L2.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Nv=function(n){try{n()}catch(e){setTimeout(()=>{throw ks("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},AI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class B2{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ks(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class j2{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Xi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ks(e)}}let xI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const A1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,N1="websocket",M1="long_polling";class sN{constructor(e,t,r,i,a=!1,c="",f=!1,y=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=y,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function P1(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===N1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==M1)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function $2(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return es(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class H2{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const oN={},aN={};function uN(n){const e=n.toString();return oN[e]||(oN[e]=new H2),oN[e]}class G2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Nv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class mp{constructor(e,t,r,i,a,c,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bI(e),this.stats_=uN(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),P1(t,M1,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new G2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cN((...a)=>{const[c,f,y,E,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=f,this.password=y;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&A1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){mp.forceAllow_=!0}static forceDisallow(){mp.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!mp.forceAllow_&&(mp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=E1(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class cN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=y1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=cN.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){Xi("frame writing exception"),f.stack&&Xi(f.stack),Xi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Xi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Xi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Yb=null;typeof MozWebSocket<"u"?Yb=MozWebSocket:typeof WebSocket<"u"&&(Yb=WebSocket);let Mv=(()=>{class n{constructor(t,r,i,a,c,f,y){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bI(this.connId),this.stats_=uN(r),this.connURL=n.connectionURL_(r,f,y,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const f={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&A1.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),c&&(f.p=c),P1(t,N1,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wm.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${eN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,f=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new Yb(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Yb&&!n.forceDisallow_}static previouslyFailed(){return Wm.isInMemoryStorage||!0===Wm.get("previous_websocket_failure")}markConnectionHealthy(){Wm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=E1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),B1=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[mp,Mv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Mv&&Mv.isAvailable();let i=r&&!Mv.previouslyFailed();if(t.webSocketOnly&&(r||ks("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Mv];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class q1{constructor(e,t,r,i,a,c,f,y,E,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=y,this.onKill_=E,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bI("c:"+this.id+":"),this.transportManager_=new B1(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=AI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=SI("t",e),r=SI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=SI("t",e),r=SI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=SI("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?nN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ks("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),AI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):AI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Z1{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class K1{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Qb extends K1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Qb}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class bn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function mn(){return new bn("")}function Jt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function yp(n){return n.pieces_.length-n.pieceNum_}function Bn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new bn(n.pieces_,e)}function dN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function RI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function J1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new bn(e,0)}function Tr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof bn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new bn(t,0)}function Xt(n){return n.pieceNum_>=n.pieces_.length}function ro(n,e){const t=Jt(n),r=Jt(e);if(null===t)return e;if(t===r)return ro(Bn(n),Bn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function fU(n,e){const t=RI(n,0),r=RI(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Zm(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function hN(n,e){if(yp(n)!==yp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function iu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(yp(n)>yp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class pU{constructor(e,t){this.errorPrefix_=t,this.parts_=RI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);X1(this)}}function X1(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Km(n))}function Km(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class fN extends K1{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new fN}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const NI=1e3;let Xb,Ym=(()=>{class n extends Z1{constructor(t,r,i,a,c,f,y,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=f,this.appCheckTokenProvider_=y,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=bI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=NI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Qb.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,k.Wl)(c)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const y=f.d;"ok"===f.s?r.resolve(y):r.reject(y)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+c),this.listens.has(f)||this.listens.set(f,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(f).has(c),"listen() called twice for same path/queryId.");const y={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(c,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,y=>{const E=y.d,b=y.s;n.warnOnListenWarnings_(E,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",y),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ks(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,f=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const f={p:r,d:i};void 0!==c&&(f.h=c),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):nN("Unrecognized action received from server: "+(0,k.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=NI,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=NI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=NI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ye.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let y=!1,E=null;const b=function(){E?E.close():(y=!0,a())};t.realtime_={close:b,sendRequest:function(B){(0,k.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(B)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,Y]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);y?Xi("getToken() completed but was canceled"):(Xi("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=Y&&Y.token,E=new q1(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,pe=>{ks(pe+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(B){t.log_("Failed to get token: "+B),y||(t.repoInfo_.nodeAdmin&&ks(B),b())}}})()}interrupt(t){Xi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Xi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=NI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>rN(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new bn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Xi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Xi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+eN.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Qb.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class rn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new rn(e,t)}}class Jb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new rn(gp,e),i=new rn(gp,t);return 0!==this.compare(r,i)}minPost(){return rn.MIN}}class nO extends Jb{static get __EMPTY_NODE(){return Xb}static set __EMPTY_NODE(e){Xb=e}compare(e,t){return Zm(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return rn.MIN}maxPost(){return new rn(_h,Xb)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new rn(e,Xb)}toString(){return".key"}}const Fl=new nO;class eS{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let gN,cc=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??No.EMPTY_NODE,this.right=c??No.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return No.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return No.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class No{constructor(e,t=No.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new No(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,cc.BLACK,null,null))}remove(e){return new No(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,cc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new eS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new eS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new eS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new eS(this.root_,null,this.comparator_,!0,e)}}function IU(n,e){return Zm(n.name,e.name)}function pN(n,e){return Zm(n,e)}No.EMPTY_NODE=new class EU{copy(e,t,r,i,a){return this}insert(e,t,r){return new cc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const rO=function(n){return"number"==typeof n?"number:"+I1(n):"string:"+n},iO=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===gN||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===gN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sO,oO,aO,Pv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),iO(this.priorityNode_)}static set __childrenNodeConstructor(t){sO=t}static get __childrenNodeConstructor(){return sO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Xt(t)?this:".priority"===Jt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Jt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===yp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Bn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+rO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?I1(this.value_):this.value_,this.lazyHash_=_1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Xn=new class bU extends Jb{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Zm(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return rn.MIN}maxPost(){return new rn(_h,new Pv("[PRIORITY-POST]",aO))}makePost(e,t){const r=oO(e);return new rn(t,new Pv("[PRIORITY-POST]",r))}toString(){return".priority"}},SU=Math.log(2);class AU{constructor(e){this.count=parseInt(Math.log(e+1)/SU,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tS=function(n,e,t,r){n.sort(e);const i=function(y,E){const b=E-y;let x,P;if(0===b)return null;if(1===b)return x=n[y],P=t?t(x):x,new cc(P,x.node,cc.BLACK,null,null);{const B=parseInt(b/2,10)+y,Y=i(y,B),pe=i(B+1,E);return x=n[B],P=t?t(x):x,new cc(P,x.node,cc.BLACK,Y,pe)}},f=function(y){let E=null,b=null,x=n.length;const P=function(Y,pe){const xe=x-Y,ut=x;x-=Y;const It=i(xe+1,ut),yt=n[xe],Mt=t?t(yt):yt;B(new cc(Mt,yt.node,pe,null,It))},B=function(Y){E?(E.left=Y,E=Y):(b=Y,E=Y)};for(let Y=0;Y<y.count;++Y){const pe=y.nextBitIsOne(),xe=Math.pow(2,y.count-(Y+1));pe?P(xe,cc.BLACK):(P(xe,cc.BLACK),P(xe,cc.RED))}return b}(new AU(n.length));return new No(r||e,f)};let mN;const Ov={};class vh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(Ov&&Xn,"ChildrenNode.ts has not been loaded"),mN=mN||new vh({".priority":Ov},{".priority":Xn}),mN}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof No?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Fl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(rn.Wrap);let f,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();f=i?tS(r,e.getCompare()):Ov;const y=e.toString(),E=Object.assign({},this.indexSet_);E[y]=e;const b=Object.assign({},this.indexes_);return b[y]=f,new vh(b,E)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const c=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(c,"Missing index implementation for "+a),i===Ov){if(c.isDefinedOn(e.node)){const f=[],y=t.getIterator(rn.Wrap);let E=y.getNext();for(;E;)E.name!==e.name&&f.push(E),E=y.getNext();return f.push(e),tS(f,c.getCompare())}return Ov}{const f=t.get(e.name);let y=i;return f&&(y=y.remove(new rn(e.name,f))),y.insert(e,e.node)}});return new vh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===Ov)return i;{const a=t.get(e.name);return a?i.remove(new rn(e.name,a)):i}});return new vh(r,this.indexSet_)}}let MI,Wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&iO(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return MI||(MI=new n(new No(pN),null,vh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||MI}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?MI:r}}getChild(t){const r=Jt(t);return null===r?this:this.getImmediateChild(r).getChild(Bn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new rn(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?MI:this.priorityNode_;return new n(a,f,c)}}updateChild(t,r){const i=Jt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Jt(t)||1===yp(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Bn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(Xn,(f,y)=>{r[f]=y.val(t),i++,c&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):c=!1}),!t&&c&&a<2*i){const f=[];for(const y in r)f[y]=r[y];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+rO(this.getPriority().val())+":"),this.forEachChild(Xn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":_1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new rn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new rn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new rn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,rn.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,rn.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===PI?-1:0}withIndex(t){if(t===Fl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Fl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Xn),a=r.getIterator(Xn);let c=i.getNext(),f=a.getNext();for(;c&&f;){if(c.name!==f.name||!c.node.equals(f.node))return!1;c=i.getNext(),f=a.getNext()}return null===c&&null===f}return!1}return!1}}resolveIndex_(t){return t===Fl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const PI=new class xU extends Wt{constructor(){super(new No(pN),Wt.EMPTY_NODE,vh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(rn,{MIN:{value:new rn(gp,Wt.EMPTY_NODE)},MAX:{value:new rn(_h,PI)}}),nO.__EMPTY_NODE=Wt.EMPTY_NODE,Pv.__childrenNodeConstructor=Wt,function CU(n){gN=n}(PI),function TU(n){aO=n}(PI);const RU=!0;function Lr(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Pv(n,Lr(e));if(n instanceof Array||!RU){let t=Wt.EMPTY_NODE;return es(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Lr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Lr(e))}{const t=[];let r=!1;if(es(n,(c,f)=>{if("."!==c.substring(0,1)){const y=Lr(f);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new rn(c,y)))}}),0===t.length)return Wt.EMPTY_NODE;const a=tS(t,IU,c=>c.name,pN);if(r){const c=tS(t,Xn.getCompare());return new Wt(a,Lr(e),new vh({".priority":c},{".priority":Xn}))}return new Wt(a,Lr(e),vh.Default)}}!function DU(n){oO=n}(Lr);class yN extends Jb{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Xt(e)&&".priority"!==Jt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Zm(e.name,t.name):a}makePost(e,t){const r=Lr(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new rn(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,PI);return new rn(_h,e)}toString(){return RI(this.indexPath_,0).join("/")}}const _N=new class NU extends Jb{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Zm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return rn.MIN}maxPost(){return rn.MAX}makePost(e,t){const r=Lr(e);return new rn(t,r)}toString(){return".value"}};function uO(n){return{type:"value",snapshotNode:n}}function kv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function OI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function kI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class vN{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(OI(t,f)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(kv(t,r)):c.trackChildChange(kI(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Xn,(i,a)=>{t.hasChild(i)||r.trackChildChange(OI(i,a))}),t.isLeafNode()||t.forEachChild(Xn,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(kI(i,a,c))}else r.trackChildChange(kv(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class LI{constructor(e){this.indexedFilter_=new vN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=LI.getStartPost_(e),this.endPost_=LI.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,c){return this.matches(new rn(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const a=this;return t.forEachChild(Xn,(c,f)=>{a.matches(new rn(c,f))||(i=i.updateImmediateChild(c,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class PU{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new LI(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new rn(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Wt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),c++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;a.hasNext();){const f=a.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:i=i.updateImmediateChild(f.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const x=this.index_.getCompare();c=(P,B)=>x(B,P)}else c=this.index_.getCompare();const f=e;(0,k.hu)(f.numChildren()===this.limit_,"");const y=new rn(t,r),E=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),b=this.rangedFilter_.matches(y);if(f.hasChild(t)){const x=f.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=P&&(P.name===t||f.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const B=null==P?1:c(P,y);if(b&&!r.isEmpty()&&B>=0)return a?.trackChildChange(kI(t,r,x)),f.updateImmediateChild(t,r);{a?.trackChildChange(OI(t,x));const pe=f.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(kv(P.name,P.node)),pe.updateImmediateChild(P.name,P.node)):pe}}return r.isEmpty()?e:b&&c(E,y)>=0?(null!=a&&(a.trackChildChange(OI(E.name,E.node)),a.trackChildChange(kv(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(E.name,Wt.EMPTY_NODE)):e}}class nS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_h}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xn}copy(){const e=new nS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function wN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function EN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function rS(n,e){const t=n.copy();return t.index_=e,t}function cO(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Xn?t="$priority":n.index_===_N?t="$value":n.index_===Fl?t="$key":((0,k.hu)(n.index_ instanceof yN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,k.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,k.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function lO(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Xn&&(e.i=n.index_.toString()),e}class iS extends Z1{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=bI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=iS.getListenId_(e,r),f={};this.listens_[c]=f;const y=cO(e._queryParams);this.restRequest_(a+".json",y,(E,b)=>{let x=b;if(404===E&&(x=null,E=null),null===E&&this.onDataUpdate_(a,x,!1,r),(0,k.DV)(this.listens_,c)===f){let P;P=E?401===E?"permission_denied":"rest_error:"+E:"ok",i(P,null)}})}unlisten(e,t){const r=iS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=cO(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,c)=>{let f=c;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let y=null;if(f.status>=200&&f.status<300){try{y=(0,k.cI)(f.responseText)}catch{ks("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,y)}else 401!==f.status&&404!==f.status&&ks("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}class VU{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function sS(){return{value:null,children:new Map}}function Lv(n,e,t){if(Xt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Jt(e);n.children.has(r)||n.children.set(r,sS()),Lv(n.children.get(r),e=Bn(e),t)}}function IN(n,e){if(Xt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Xn,(r,i)=>{Lv(n,new bn(r),i)}),IN(n,e)}}if(n.children.size>0){const t=Jt(e);return e=Bn(e),n.children.has(t)&&IN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function CN(n,e,t){null!==n.value?t(e,n.value):function BU(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{CN(i,new bn(e.toString()+"/"+r),t)})}class jU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&es(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class zU{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new jU(e);const r=1e4+2e4*Math.random();AI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;es(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),AI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var gi=(()=>((gi=gi||{})[gi.OVERWRITE=0]="OVERWRITE",gi[gi.MERGE=1]="MERGE",gi[gi.ACK_USER_WRITE=2]="ACK_USER_WRITE",gi[gi.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",gi))();function bN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class oS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=gi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Xt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new bn(e));return new oS(mn(),t,this.revert)}}return(0,k.hu)(Jt(this.path)===e,"operationForChild called for unrelated child."),new oS(Bn(this.path),this.affectedTree,this.revert)}}class FI{constructor(e,t){this.source=e,this.path=t,this.type=gi.LISTEN_COMPLETE}operationForChild(e){return Xt(this.path)?new FI(this.source,mn()):new FI(this.source,Bn(this.path))}}class Qm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=gi.OVERWRITE}operationForChild(e){return Xt(this.path)?new Qm(this.source,mn(),this.snap.getImmediateChild(e)):new Qm(this.source,Bn(this.path),this.snap)}}class Fv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=gi.MERGE}operationForChild(e){if(Xt(this.path)){const t=this.children.subtree(new bn(e));return t.isEmpty()?null:t.value?new Qm(this.source,mn(),t.value):new Fv(this.source,mn(),t)}return(0,k.hu)(Jt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Fv(this.source,Bn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _p{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Jt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class GU{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function UI(n,e,t,r,i,a){const c=r.filter(f=>f.type===t);c.sort((f,y)=>function ZU(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new rn(e.childName,e.snapshotNode),i=new rn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,y)),c.forEach(f=>{const y=function qU(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(E=>{E.respondsTo(f.type)&&e.push(E.createEvent(y,n.query_))})})}function aS(n,e){return{eventCache:n,serverCache:e}}function VI(n,e,t,r){return aS(new _p(e,t,r),n.serverCache)}function hO(n,e,t,r){return aS(n.eventCache,new _p(e,t,r))}function uS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Jm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let SN;class er{constructor(e,t=(()=>(SN||(SN=new No(M2)),SN))()){this.value=e,this.children=t}static fromObject(e){let t=new er(null);return es(e,(r,i)=>{t=t.set(new bn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:mn(),value:this.value};if(Xt(e))return null;{const r=Jt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Bn(e),t);return null!=a?{path:Tr(new bn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xt(e))return this;{const t=Jt(e),r=this.children.get(t);return null!==r?r.subtree(Bn(e)):new er(null)}}set(e,t){if(Xt(e))return new er(t,this.children);{const r=Jt(e),a=(this.children.get(r)||new er(null)).set(Bn(e),t),c=this.children.insert(r,a);return new er(this.value,c)}}remove(e){if(Xt(e))return this.children.isEmpty()?new er(null):new er(null,this.children);{const t=Jt(e),r=this.children.get(t);if(r){const i=r.remove(Bn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new er(null):new er(this.value,a)}return this}}get(e){if(Xt(e))return this.value;{const t=Jt(e),r=this.children.get(t);return r?r.get(Bn(e)):null}}setTree(e,t){if(Xt(e))return t;{const r=Jt(e),a=(this.children.get(r)||new er(null)).setTree(Bn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new er(this.value,c)}}fold(e){return this.fold_(mn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Tr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,mn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Xt(e))return null;{const a=Jt(e),c=this.children.get(a);return c?c.findOnPath_(Bn(e),Tr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,mn(),t)}foreachOnPath_(e,t,r){if(Xt(e))return this;{this.value&&r(t,this.value);const i=Jt(e),a=this.children.get(i);return a?a.foreachOnPath_(Bn(e),Tr(t,i),r):new er(null)}}foreach(e){this.foreach_(mn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Tr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class lc{constructor(e){this.writeTree_=e}static empty(){return new lc(new er(null))}}function BI(n,e,t){if(Xt(e))return new lc(new er(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=ro(i,e);return a=a.updateChild(c,t),new lc(n.writeTree_.set(i,a))}{const i=new er(t),a=n.writeTree_.setTree(e,i);return new lc(a)}}}function AN(n,e,t){let r=n;return es(t,(i,a)=>{r=BI(r,Tr(e,i),a)}),r}function fO(n,e){if(Xt(e))return lc.empty();{const t=n.writeTree_.setTree(e,new er(null));return new lc(t)}}function xN(n,e){return null!=Xm(n,e)}function Xm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ro(t.path,e)):null}function pO(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Xn,(r,i)=>{e.push(new rn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new rn(r,i.value))}),e}function vp(n,e){if(Xt(e))return n;{const t=Xm(n,e);return new lc(null!=t?new er(t):n.writeTree_.subtree(e))}}function RN(n){return n.writeTree_.isEmpty()}function Uv(n,e){return gO(mn(),n.writeTree_,e)}function gO(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=gO(Tr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Tr(n,".priority"),r)),t}}function cS(n,e){return wO(e,n)}function eV(n,e){if(n.snap)return iu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&iu(Tr(n.path,t),e))return!0;return!1}function nV(n){return n.visible}function mO(n,e,t){let r=lc.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let f;if(a.snap)iu(t,c)?(f=ro(t,c),r=BI(r,f,a.snap)):iu(c,t)&&(f=ro(c,t),r=BI(r,mn(),a.snap.getChild(f)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(iu(t,c))f=ro(t,c),r=AN(r,f,a.children);else if(iu(c,t))if(f=ro(c,t),Xt(f))r=AN(r,mn(),a.children);else{const y=(0,k.DV)(a.children,Jt(f));if(y){const E=y.getChild(Bn(f));r=BI(r,mn(),E)}}}}}return r}function yO(n,e,t,r,i){if(r||i){const a=vp(n.visibleWrites,e);return!i&&RN(a)?t:i||null!=t||xN(a,mn())?Uv(mO(n.allWrites,function(E){return(E.visible||i)&&(!r||!~r.indexOf(E.writeId))&&(iu(E.path,e)||iu(e,E.path))},e),t||Wt.EMPTY_NODE):null}{const a=Xm(n.visibleWrites,e);if(null!=a)return a;{const c=vp(n.visibleWrites,e);return RN(c)?t:null!=t||xN(c,mn())?Uv(c,t||Wt.EMPTY_NODE):null}}}function lS(n,e,t,r){return yO(n.writeTree,n.treePath,e,t,r)}function NN(n,e){return function rV(n,e,t){let r=Wt.EMPTY_NODE;const i=Xm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xn,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=vp(n.visibleWrites,e);return t.forEachChild(Xn,(c,f)=>{const y=Uv(vp(a,new bn(c)),f);r=r.updateImmediateChild(c,y)}),pO(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return pO(vp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function _O(n,e,t,r){return function iV(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Tr(e,t);if(xN(n.visibleWrites,a))return null;{const c=vp(n.visibleWrites,a);return RN(c)?i.getChild(t):Uv(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function dS(n,e){return function oV(n,e){return Xm(n.visibleWrites,e)}(n.writeTree,Tr(n.treePath,e))}function MN(n,e,t){return function sV(n,e,t,r){const i=Tr(e,t),a=Xm(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Uv(vp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function vO(n,e){return wO(Tr(n.treePath,e),n.writeTree)}function wO(n,e){return{treePath:n,writeTree:e}}class lV{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,kI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,OI(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,kv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,kI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const EO=new class dV{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class PN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new _p(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return MN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Jm(this.viewCache_),a=function cV(n,e,t,r,i,a){return function aV(n,e,t,r,i,a,c){let f;const y=vp(n.visibleWrites,e),E=Xm(y,mn());if(null!=E)f=E;else{if(null==t)return[];f=Uv(y,t)}if(f=f.withIndex(c),f.isEmpty()||f.isLeafNode())return[];{const b=[],x=c.getCompare(),P=a?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let B=P.getNext();for(;B&&b.length<i;)0!==x(B,r)&&b.push(B),B=P.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function IO(n,e,t,r,i,a){const c=e.eventCache;if(null!=dS(r,t))return e;{let f,y;if(Xt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=Jm(e),x=NN(r,E instanceof Wt?E:Wt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),x,a)}else{const E=lS(r,Jm(e));f=n.filter.updateFullNode(e.eventCache.getNode(),E,a)}else{const E=Jt(t);if(".priority"===E){(0,k.hu)(1===yp(t),"Can't have a priority with additional path components");const b=c.getNode();y=e.serverCache.getNode();const x=_O(r,t,b,y);f=null!=x?n.filter.updatePriority(b,x):c.getNode()}else{const b=Bn(t);let x;if(c.isCompleteForChild(E)){y=e.serverCache.getNode();const P=_O(r,t,c.getNode(),y);x=null!=P?c.getNode().getImmediateChild(E).updateChild(b,P):c.getNode().getImmediateChild(E)}else x=MN(r,E,e.serverCache);f=null!=x?n.filter.updateChild(c.getNode(),E,x,b,i,a):c.getNode()}}return VI(e,f,c.isFullyInitialized()||Xt(t),n.filter.filtersNodes())}}function hS(n,e,t,r,i,a,c,f){const y=e.serverCache;let E;const b=c?n.filter:n.filter.getIndexedFilter();if(Xt(t))E=b.updateFullNode(y.getNode(),r,null);else if(b.filtersNodes()&&!y.isFiltered()){const B=y.getNode().updateChild(t,r);E=b.updateFullNode(y.getNode(),B,null)}else{const B=Jt(t);if(!y.isCompleteForPath(t)&&yp(t)>1)return e;const Y=Bn(t),xe=y.getNode().getImmediateChild(B).updateChild(Y,r);E=".priority"===B?b.updatePriority(y.getNode(),xe):b.updateChild(y.getNode(),B,xe,Y,EO,null)}const x=hO(e,E,y.isFullyInitialized()||Xt(t),b.filtersNodes());return IO(n,x,t,i,new PN(i,x,a),f)}function ON(n,e,t,r,i,a,c){const f=e.eventCache;let y,E;const b=new PN(i,e,a);if(Xt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,c),y=VI(e,E,!0,n.filter.filtersNodes());else{const x=Jt(t);if(".priority"===x)E=n.filter.updatePriority(e.eventCache.getNode(),r),y=VI(e,E,f.isFullyInitialized(),f.isFiltered());else{const P=Bn(t),B=f.getNode().getImmediateChild(x);let Y;if(Xt(P))Y=r;else{const pe=b.getCompleteChild(x);Y=null!=pe?".priority"===dN(P)&&pe.getChild(J1(P)).isEmpty()?pe:pe.updateChild(P,r):Wt.EMPTY_NODE}y=B.equals(Y)?e:VI(e,n.filter.updateChild(f.getNode(),x,Y,P,b,c),f.isFullyInitialized(),n.filter.filtersNodes())}}return y}function CO(n,e){return n.eventCache.isCompleteForChild(e)}function DO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function kN(n,e,t,r,i,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,y=e;E=Xt(t)?r:new er(null).setTree(t,r);const b=e.serverCache.getNode();return E.children.inorderTraversal((x,P)=>{if(b.hasChild(x)){const Y=DO(0,e.serverCache.getNode().getImmediateChild(x),P);y=hS(n,y,new bn(x),Y,i,a,c,f)}}),E.children.inorderTraversal((x,P)=>{const B=!e.serverCache.isCompleteForChild(x)&&null===P.value;if(!b.hasChild(x)&&!B){const pe=DO(0,e.serverCache.getNode().getImmediateChild(x),P);y=hS(n,y,new bn(x),pe,i,a,c,f)}}),y}class wV{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new vN(r.getIndex()),a=function OU(n){return n.loadsAllData()?new vN(n.getIndex()):n.hasLimit()?new PU(n):new LI(n)}(r);this.processor_=function hV(n){return{filter:n}}(a);const c=t.serverCache,f=t.eventCache,y=i.updateFullNode(Wt.EMPTY_NODE,c.getNode(),null),E=a.updateFullNode(Wt.EMPTY_NODE,f.getNode(),null),b=new _p(y,c.isFullyInitialized(),i.filtersNodes()),x=new _p(E,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=aS(x,b),this.eventGenerator_=new GU(this.query_)}get query(){return this.query_}}function CV(n,e){const t=Jm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Xt(e)&&!t.getImmediateChild(Jt(e)).isEmpty())?t.getChild(e):null}function TO(n){return 0===n.eventRegistrations_.length}function bO(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function SO(n,e,t,r){e.type===gi.MERGE&&null!==e.source.queryId&&((0,k.hu)(Jm(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(uS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function pV(n,e,t,r,i){const a=new lV;let c,f;if(t.type===gi.OVERWRITE){const E=t;E.source.fromUser?c=ON(n,e,E.path,E.snap,r,i,a):((0,k.hu)(E.source.fromServer,"Unknown source."),f=E.source.tagged||e.serverCache.isFiltered()&&!Xt(E.path),c=hS(n,e,E.path,E.snap,r,i,f,a))}else if(t.type===gi.MERGE){const E=t;E.source.fromUser?c=function mV(n,e,t,r,i,a,c){let f=e;return r.foreach((y,E)=>{const b=Tr(t,y);CO(e,Jt(b))&&(f=ON(n,f,b,E,i,a,c))}),r.foreach((y,E)=>{const b=Tr(t,y);CO(e,Jt(b))||(f=ON(n,f,b,E,i,a,c))}),f}(n,e,E.path,E.children,r,i,a):((0,k.hu)(E.source.fromServer,"Unknown source."),f=E.source.tagged||e.serverCache.isFiltered(),c=kN(n,e,E.path,E.children,r,i,f,a))}else if(t.type===gi.ACK_USER_WRITE){const E=t;c=E.revert?function vV(n,e,t,r,i,a){let c;if(null!=dS(r,t))return e;{const f=new PN(r,e,i),y=e.eventCache.getNode();let E;if(Xt(t)||".priority"===Jt(t)){let b;if(e.serverCache.isFullyInitialized())b=lS(r,Jm(e));else{const x=e.serverCache.getNode();(0,k.hu)(x instanceof Wt,"serverChildren would be complete if leaf node"),b=NN(r,x)}E=n.filter.updateFullNode(y,b,a)}else{const b=Jt(t);let x=MN(r,b,e.serverCache);null==x&&e.serverCache.isCompleteForChild(b)&&(x=y.getImmediateChild(b)),E=null!=x?n.filter.updateChild(y,b,x,Bn(t),f,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(y,b,Wt.EMPTY_NODE,Bn(t),f,a):y,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=lS(r,Jm(e)),c.isLeafNode()&&(E=n.filter.updateFullNode(E,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=dS(r,mn()),VI(e,E,c,n.filter.filtersNodes())}}(n,e,E.path,r,i,a):function yV(n,e,t,r,i,a,c){if(null!=dS(i,t))return e;const f=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(Xt(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return hS(n,e,t,y.getNode().getChild(t),i,a,f,c);if(Xt(t)){let E=new er(null);return y.getNode().forEachChild(Fl,(b,x)=>{E=E.set(new bn(b),x)}),kN(n,e,t,E,i,a,f,c)}return e}{let E=new er(null);return r.foreach((b,x)=>{const P=Tr(t,b);y.isCompleteForPath(P)&&(E=E.set(b,y.getNode().getChild(P)))}),kN(n,e,t,E,i,a,f,c)}}(n,e,E.path,E.affectedTree,r,i,a)}else{if(t.type!==gi.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);c=function _V(n,e,t,r,i){const a=e.serverCache;return IO(n,hO(e,a.getNode(),a.isFullyInitialized()||Xt(t),a.isFiltered()),t,r,EO,i)}(n,e,t.path,r,a)}const y=a.getChanges();return function gV(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=uS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(uO(uS(e)))}}(e,c,y),{viewCache:c,changes:y}}(n.processor_,i,e,t,r);return function fV(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,AO(n,a.changes,a.viewCache.eventCache.getNode(),null)}function AO(n,e,t,r){return function WU(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function MU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),UI(n,i,"child_removed",e,r,t),UI(n,i,"child_added",e,r,t),UI(n,i,"child_moved",a,r,t),UI(n,i,"child_changed",e,r,t),UI(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let fS,gS;class xO{constructor(){this.views=new Map}}function LN(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),SO(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(SO(c,e,t,r));return a}}function RO(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let f=lS(t,i?r:null),y=!1;f?y=!0:r instanceof Wt?(f=NN(t,r),y=!1):(f=Wt.EMPTY_NODE,y=!1);const E=aS(new _p(f,y,!1),new _p(r,i,!1));return new wV(e,E)}return c}function NO(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function wp(n,e){let t=null;for(const r of n.views.values())t=t||CV(r,e);return t}function MO(n,e){return e._queryParams.loadsAllData()?pS(n):n.views.get(e._queryIdentifier)}function PO(n,e){return null!=MO(n,e)}function Ep(n){return null!=pS(n)}function pS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let PV=1;class OO{constructor(e){this.listenProvider_=e,this.syncPointTree_=new er(null),this.pendingWriteTree_=function uV(){return{visibleWrites:lc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function FN(n,e,t,r,i){return function YU(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=BI(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Vv(n,new Qm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ip(n,e,t=!1){const r=function JU(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function XU(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=t&&eV(f,r.path)?i=!1:iu(r.path,f.path)&&(a=!0)),c--}return!!i&&(a?(function tV(n){n.visibleWrites=mO(n.allWrites,nV,mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=fO(n.visibleWrites,r.path):es(r.children,y=>{n.visibleWrites=fO(n.visibleWrites,Tr(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let a=new er(null);return null!=r.snap?a=a.set(mn(),!0):es(r.children,c=>{a=a.set(new bn(c),!0)}),Vv(n,new oS(r.path,a,t))}return[]}function jI(n,e,t){return Vv(n,new Qm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function mS(n,e,t,r,i=!1){const a=e._path,c=n.syncPointTree_.get(a);let f=[];if(c&&("default"===e._queryIdentifier||PO(c,e))){const y=function RV(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const f=Ep(n);if("default"===i)for(const[y,E]of n.views.entries())c=c.concat(bO(E,t,r)),TO(E)&&(n.views.delete(y),E.query._queryParams.loadsAllData()||a.push(E.query));else{const y=n.views.get(i);y&&(c=c.concat(bO(y,t,r)),TO(y)&&(n.views.delete(i),y.query._queryParams.loadsAllData()||a.push(y.query)))}return f&&!Ep(n)&&a.push(new(function SV(){return(0,k.hu)(fS,"Reference.ts has not been loaded"),fS}())(e._repo,e._path)),{removed:a,events:c}}(c,e,t,r);(function AV(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const E=y.removed;if(f=y.events,!i){const b=-1!==E.findIndex(P=>P._queryParams.loadsAllData()),x=n.syncPointTree_.findOnPath(a,(P,B)=>Ep(B));if(b&&!x){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const B=function BV(n){return n.fold((e,t,r)=>{if(t&&Ep(t))return[pS(t)];{let i=[];return t&&(i=NO(t)),es(r,(a,c)=>{i=i.concat(c)}),i}})}(P);for(let Y=0;Y<B.length;++Y){const pe=B[Y],xe=pe.query,ut=UO(n,pe);n.listenProvider_.startListening(HI(xe),$I(n,xe),ut.hashFn,ut.onComplete)}}}!x&&E.length>0&&!r&&(b?n.listenProvider_.stopListening(HI(e),null):E.forEach(P=>{const B=n.queryToTagMap.get(_S(P));n.listenProvider_.stopListening(HI(P),B)}))}!function jV(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=_S(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,E)}return f}function kO(n,e,t,r){const i=VN(n,r);if(null!=i){const a=BN(i),c=a.path,f=a.queryId,y=ro(c,e);return jN(n,c,new Qm(bN(f),y,t))}return[]}function UN(n,e,t,r=!1){const i=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(i,(P,B)=>{const Y=ro(P,i);a=a||wp(B,Y),c=c||Ep(B)});let y,f=n.syncPointTree_.get(i);f?(c=c||Ep(f),a=a||wp(f,mn())):(f=new xO,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?y=!0:(y=!1,a=Wt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((B,Y)=>{const pe=wp(Y,mn());pe&&(a=a.updateImmediateChild(B,pe))}));const E=PO(f,e);if(!E&&!e._queryParams.loadsAllData()){const P=_S(e);(0,k.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const B=function $V(){return PV++}();n.queryToTagMap.set(P,B),n.tagToQueryMap.set(B,P)}let x=function xV(n,e,t,r,i,a){const c=RO(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function DV(n,e){n.eventRegistrations_.push(e)}(c,t),function TV(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Xn,(a,c)=>{r.push(kv(a,c))}),t.isFullyInitialized()&&r.push(uO(t.getNode())),AO(n,r,t.getNode(),e)}(c,t)}(f,e,t,cS(n.pendingWriteTree_,i),a,y);if(!E&&!c&&!r){const P=MO(f,e);x=x.concat(function HV(n,e,t){const r=e._path,i=$I(n,e),a=UO(n,t),c=n.listenProvider_.startListening(HI(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Ep(f.value),"If we're adding a query, it shouldn't be shadowed");else{const y=f.fold((E,b,x)=>{if(!Xt(E)&&b&&Ep(b))return[pS(b).query];{let P=[];return b&&(P=P.concat(NO(b).map(B=>B.query))),es(x,(B,Y)=>{P=P.concat(Y)}),P}});for(let E=0;E<y.length;++E){const b=y[E];n.listenProvider_.stopListening(HI(b),$I(n,b))}}return c}(n,e,P))}return x}function yS(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,f)=>{const E=wp(f,ro(c,e));if(E)return E});return yO(i,e,a,t,!0)}function Vv(n,e){return LO(e,n.syncPointTree_,null,cS(n.pendingWriteTree_,mn()))}function LO(n,e,t,r){if(Xt(n.path))return FO(n,e,t,r);{const i=e.get(mn());null==t&&null!=i&&(t=wp(i,mn()));let a=[];const c=Jt(n.path),f=n.operationForChild(c),y=e.children.get(c);if(y&&f){const E=t?t.getImmediateChild(c):null,b=vO(r,c);a=a.concat(LO(f,y,E,b))}return i&&(a=a.concat(LN(i,n,r,t))),a}}function FO(n,e,t,r){const i=e.get(mn());null==t&&null!=i&&(t=wp(i,mn()));let a=[];return e.children.inorderTraversal((c,f)=>{const y=t?t.getImmediateChild(c):null,E=vO(r,c),b=n.operationForChild(c);b&&(a=a.concat(FO(b,f,y,E)))}),i&&(a=a.concat(LN(i,n,r,t))),a}function UO(n,e){const t=e.query,r=$I(n,t);return{hashFn:()=>(function EV(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function FV(n,e,t){const r=VN(n,t);if(r){const i=BN(r),a=i.path,c=i.queryId,f=ro(a,e);return jN(n,a,new FI(bN(c),f))}return[]}(n,t._path,r):function LV(n,e){return Vv(n,new FI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function k2(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return mS(n,t,null,a)}}}}function $I(n,e){const t=_S(e);return n.queryToTagMap.get(t)}function _S(n){return n._path.toString()+"$"+n._queryIdentifier}function VN(n,e){return n.tagToQueryMap.get(e)}function BN(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new bn(n.substr(0,e))}}function jN(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),LN(r,t,cS(n.pendingWriteTree_,e),null)}function HI(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function MV(){return(0,k.hu)(gS,"Reference.ts has not been loaded"),gS}())(n._repo,n._path):n}class $N{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new $N(t)}node(){return this.node_}}class HN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Tr(this.path_,e);return new HN(this.syncTree_,t)}node(){return yS(this.syncTree_,this.path_)}}const zV=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},VO=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?GV(n[".sv"],e,t):"object"==typeof n[".sv"]?WV(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},GV=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},WV=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},BO=function(n,e,t,r){return GN(e,new HN(t,n),r)},zN=function(n,e,t){return GN(n,new $N(e),t)};function GN(n,e,t){const r=n.getPriority().val(),i=VO(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,f=VO(c.getValue(),e,t);return f!==c.getValue()||i!==c.getPriority().val()?new Pv(f,Lr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new Pv(i))),c.forEachChild(Xn,(f,y)=>{const E=GN(y,e.getImmediateChild(f),t);E!==y&&(a=a.updateImmediateChild(f,E))}),a}}class WN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function vS(n,e){let t=e instanceof bn?e:new bn(e),r=n,i=Jt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new WN(i,r,a),t=Bn(t),i=Jt(t)}return r}function ey(n){return n.node.value}function qN(n,e){n.node.value=e,ZN(n)}function jO(n){return n.node.childCount>0}function wS(n,e){es(n.node.children,(t,r)=>{e(new WN(t,n,r))})}function $O(n,e,t,r){t&&!r&&e(n),wS(n,i=>{$O(i,e,!0,r)}),t&&r&&e(n)}function zI(n){return new bn(null===n.parent?n.name:zI(n.parent)+"/"+n.name)}function ZN(n){null!==n.parent&&function KV(n,e,t){const r=function qV(n){return void 0===ey(n)&&!jO(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,ZN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,ZN(n))}(n.parent,n.name,n)}const YV=/[\[\].#$\/\u0000-\u001F\u007F]/,QV=/[\[\].#$\u0000-\u001F\u007F]/,KN=10485760,ES=function(n){return"string"==typeof n&&0!==n.length&&!YV.test(n)},HO=function(n){return"string"==typeof n&&0!==n.length&&!QV.test(n)},GI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Zb(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Ul=function(n,e,t,r){r&&void 0===e||WI((0,k.gK)(n,"value"),e,t)},WI=function(n,e,t){const r=t instanceof bn?new pU(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Km(r));if("function"==typeof e)throw new Error(n+"contains a function "+Km(r)+" with contents = "+e.toString());if(Zb(e))throw new Error(n+"contains "+e.toString()+" "+Km(r));if("string"==typeof e&&e.length>KN/3&&(0,k.ug)(e)>KN)throw new Error(n+"contains a string greater than "+KN+" utf8 bytes "+Km(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(es(e,(c,f)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!ES(c)))throw new Error(n+" contains an invalid key ("+c+") "+Km(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function gU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),X1(n)})(r,c),WI(n,f,r),function mU(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Km(r)+" in addition to actual children.")}},zO=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];es(e,(c,f)=>{const y=new bn(c);if(WI(i,f,Tr(t,y)),".priority"===dN(y)&&!GI(f))throw new Error(i+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=RI(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!ES(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(fU);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&iu(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},YN=function(n,e,t){if(!t||void 0!==e){if(Zb(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!GI(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},qI=function(n,e,t,r){if(!(r&&void 0===t||ES(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ZI=function(n,e,t,r){if(!(r&&void 0===t||HO(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},eB=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ZI(n,e,t,r)},su=function(n,e){if(".info"===Jt(e))throw new Error(n+" failed = Can't modify data under /.info/")},GO=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ES(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),HO(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class tB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function IS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!hN(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function WO(n,e,t){IS(n,t),qO(n,r=>hN(r,e))}function sa(n,e,t){IS(n,t),qO(n,r=>iu(r,e)||iu(e,r))}function qO(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(nB(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function nB(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();qm&&Xi("event: "+t.toString()),Nv(r)}}}const ZO="repo_interrupt",rB=25;class iB{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sS(),this.transactionQueueTree_=new WN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function KO(n){const t=n.infoData_.getNode(new bn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function KI(n){return zV({timestamp:KO(n)})}function YO(n,e,t,r,i){n.dataUpdateCount++;const a=new bn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const y=(0,k.UI)(t,E=>Lr(E));c=function UV(n,e,t,r){const i=VN(n,r);if(i){const a=BN(i),c=a.path,f=a.queryId,y=ro(c,e),E=er.fromObject(t);return jN(n,c,new Fv(bN(f),y,E))}return[]}(n.serverSyncTree_,a,y,i)}else{const y=Lr(t);c=kO(n.serverSyncTree_,a,y,i)}else if(r){const y=(0,k.UI)(t,E=>Lr(E));c=function kV(n,e,t){const r=er.fromObject(t);return Vv(n,new Fv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,y)}else{const y=Lr(t);c=jI(n.serverSyncTree_,a,y)}let f=a;c.length>0&&(f=jv(n,a)),sa(n.eventQueue_,f,c)}function QO(n,e){QN(n,"connected",e),!1===e&&function cB(n){Bv(n,"onDisconnectEvents");const e=KI(n),t=sS();CN(n.onDisconnect_,mn(),(i,a)=>{const c=BO(i,a,n.serverSyncTree_,e);Lv(t,i,c)});let r=[];CN(t,mn(),(i,a)=>{r=r.concat(jI(n.serverSyncTree_,i,a));const c=tM(n,i);jv(n,c)}),n.onDisconnect_=sS(),sa(n.eventQueue_,mn(),r)}(n)}function QN(n,e,t){const r=new bn("/.info/"+e),i=Lr(t);n.infoData_.updateSnapshot(r,i);const a=jI(n.infoSyncTree_,r,i);sa(n.eventQueue_,r,a)}function CS(n){return n.nextWriteId_++}function JN(n,e,t,r,i){Bv(n,"set",{path:e.toString(),value:t,priority:r});const a=KI(n),c=Lr(t,r),f=yS(n.serverSyncTree_,e),y=zN(c,f,a),E=CS(n),b=FN(n.serverSyncTree_,e,y,E,!0);IS(n.eventQueue_,b),n.server_.put(e.toString(),c.val(!0),(P,B)=>{const Y="ok"===P;Y||ks("set at "+e+" failed: "+P);const pe=Ip(n.serverSyncTree_,E,!Y);sa(n.eventQueue_,e,pe),Cp(0,i,P,B)});const x=tM(n,e);jv(n,x),sa(n.eventQueue_,x,[])}function lB(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&IN(n.onDisconnect_,e),Cp(0,t,r,i)})}function JO(n,e,t,r){const i=Lr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&Lv(n.onDisconnect_,e,i),Cp(0,r,a,c)})}function XN(n,e,t){let r;r=".info"===Jt(e._path)?mS(n.infoSyncTree_,e,t):mS(n.serverSyncTree_,e,t),WO(n.eventQueue_,e._path,r)}function XO(n){n.persistentConnection_&&n.persistentConnection_.interrupt(ZO)}function Bv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Xi(t,...e)}function Cp(n,e,t,r){e&&Nv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function eM(n,e,t){return yS(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function DS(n,e=n.transactionQueueTree_){if(e||TS(n,e),ey(e)){const t=tk(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function mB(n,e,t){const r=t.map(E=>E.currentWriteId),i=eM(n,e,r);let a=i;const c=i.hash();for(let E=0;E<t.length;E++){const b=t[E];(0,k.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const x=ro(e,b.path);a=a.updateChild(x,b.currentOutputSnapshotRaw)}const f=a.val(!0),y=e;n.server_.put(y.toString(),f,E=>{Bv(n,"transaction put response",{path:y.toString(),status:E});let b=[];if("ok"===E){const x=[];for(let P=0;P<t.length;P++)t[P].status=2,b=b.concat(Ip(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&x.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();TS(n,vS(n.transactionQueueTree_,e)),DS(n,n.transactionQueueTree_),sa(n.eventQueue_,e,b);for(let P=0;P<x.length;P++)Nv(x[P])}else{if("datastale"===E)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{ks("transaction at "+y.toString()+" failed: "+E);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=E}jv(n,e)}},c)}(n,zI(e),t)}else jO(e)&&wS(e,t=>{DS(n,t)})}function jv(n,e){const t=ek(n,e),r=zI(t);return function yB(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const y=e[f],E=ro(t,y.path);let x,b=!1;if((0,k.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)b=!0,x=y.abortReason,i=i.concat(Ip(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=rB)b=!0,x="maxretry",i=i.concat(Ip(n.serverSyncTree_,y.currentWriteId,!0));else{const P=eM(n,y.path,c);y.currentInputSnapshot=P;const B=e[f].update(P.val());if(void 0!==B){WI("transaction failed: Data returned ",B,y.path);let Y=Lr(B);"object"==typeof B&&null!=B&&(0,k.r3)(B,".priority")||(Y=Y.updatePriority(P.getPriority()));const xe=y.currentWriteId,ut=KI(n),It=zN(Y,P,ut);y.currentOutputSnapshotRaw=Y,y.currentOutputSnapshotResolved=It,y.currentWriteId=CS(n),c.splice(c.indexOf(xe),1),i=i.concat(FN(n.serverSyncTree_,y.path,It,y.currentWriteId,y.applyLocally)),i=i.concat(Ip(n.serverSyncTree_,xe,!0))}else b=!0,x="nodata",i=i.concat(Ip(n.serverSyncTree_,y.currentWriteId,!0))}sa(n.eventQueue_,t,i),i=[],b&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===x?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(x),!1,null)))}TS(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Nv(r[f]);DS(n,n.transactionQueueTree_)}(n,tk(n,t),r),r}function ek(n,e){let t,r=n.transactionQueueTree_;for(t=Jt(e);null!==t&&void 0===ey(r);)r=vS(r,t),t=Jt(e=Bn(e));return r}function tk(n,e){const t=[];return nk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function nk(n,e,t){const r=ey(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);wS(e,i=>{nk(n,i,t)})}function TS(n,e){const t=ey(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,qN(e,t.length>0?t:void 0)}wS(e,r=>{TS(n,r)})}function tM(n,e){const t=zI(ek(n,e)),r=vS(n.transactionQueueTree_,e);return function ZV(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{nM(n,i)}),nM(n,r),$O(r,i=>{nM(n,i)}),t}function nM(n,e){const t=ey(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,k.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,k.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Ip(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?qN(e,void 0):t.length=a+1,sa(n.eventQueue_,zI(e),i);for(let c=0;c<r.length;c++)Nv(r[c])}}const rM=function(n,e){const t=wB(n),r=t.namespace;return"firebase.com"===t.domain&&Ll(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ll("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ks("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new sN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new bn(t.pathString)}},wB=function(n){let e="",t="",r="",i="",a="",c=!0,f="https",y=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(f=n.substring(0,E-1),n=n.substring(E+2));let b=n.indexOf("/");-1===b&&(b=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(b,x)),b<x&&(i=function _B(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,x)));const P=function vB(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ks(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));E=e.indexOf(":"),E>=0?(c="https"===f||"wss"===f,y=parseInt(e.substring(E+1),10)):E=e.length;const B=e.slice(0,E);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:c,scheme:f,pathString:i,namespace:a}},rk="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",EB=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=rk.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=rk.charAt(e[i]);return(0,k.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class ik{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Wl)(this.snapshot.exportVal())}}class sk{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class iM{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ok{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return lB(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){su("OnDisconnect.remove",this._path);const e=new k.BH;return JO(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){su("OnDisconnect.set",this._path),Ul("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return JO(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){su("OnDisconnect.setWithPriority",this._path),Ul("OnDisconnect.setWithPriority",e,this._path,!1),YN("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function dB(n,e,t,r,i){const a=Lr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,f)=>{"ok"===c&&Lv(n.onDisconnect_,e,a),Cp(0,i,c,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){su("OnDisconnect.update",this._path),zO("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function hB(n,e,t,r){if((0,k.xb)(t))return Xi("onDisconnect().update() called with empty data.  Don't do anything."),void Cp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&es(t,(c,f)=>{const y=Lr(f);Lv(n.onDisconnect_,Tr(e,c),y)}),Cp(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Mo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Xt(this._path)?null:dN(this._path)}get ref(){return new ou(this._repo,this._path)}get _queryIdentifier(){const e=lO(this._queryParams),t=rN(e);return"{}"===t?"default":t}get _queryObject(){return lO(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof Mo))return!1;const t=this._repo===e._repo,r=hN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function hU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function bS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Dp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Fl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==gp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==_h)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Xn){if(null!=e&&!GI(e)||null!=t&&!GI(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof yN||n.getIndex()===_N,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function SS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ou extends Mo{constructor(e,t){super(e,t,new nS,!1)}get parent(){const e=J1(this._path);return null===e?null:new ou(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ty{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new bn(e),r=ny(this.ref,e);return new ty(this._node.getChild(t),r,Xn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new ty(i,ny(this.ref,r),Xn)))}hasChild(e){const t=new bn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ak(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?ny(n._root,e):n._root}function uk(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=rM(e,n._repo.repoInfo_.nodeAdmin);GO("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ll("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),ak(n,t.path.toString())}function ny(n,e){return null===Jt((n=(0,k.m9)(n))._path)?eB("child","path",e,!1):ZI("child","path",e,!1),new ou(n._repo,Tr(n._path,e))}function sM(n,e){n=(0,k.m9)(n),su("set",n._path),Ul("set",e,n._path,!1);const t=new k.BH;return JN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function bB(n,e){zO("update",e,n._path,!1);const t=new k.BH;return function uB(n,e,t,r){Bv(n,"update",{path:e.toString(),value:t});let i=!0;const a=KI(n),c={};if(es(t,(f,y)=>{i=!1,c[f]=BO(Tr(e,f),Lr(y),n.serverSyncTree_,a)}),i)Xi("update() called with empty data.  Don't do anything."),Cp(0,r,"ok",void 0);else{const f=CS(n),y=function OV(n,e,t,r){!function QU(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=AN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=er.fromObject(t);return Vv(n,new Fv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,f);IS(n.eventQueue_,y),n.server_.merge(e.toString(),t,(E,b)=>{const x="ok"===E;x||ks("update at "+e+" failed: "+E);const P=Ip(n.serverSyncTree_,f,!x),B=P.length>0?jv(n,e):e;sa(n.eventQueue_,B,P),Cp(0,r,E,b)}),es(t,E=>{const b=tM(n,Tr(e,E));jv(n,b)}),sa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function SB(n){n=(0,k.m9)(n);const e=new iM(()=>{}),t=new YI(e);return function aB(n,e,t){const r=function VV(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,b)=>{const x=ro(E,t);r=r||wp(b,x)});let i=n.syncPointTree_.get(t);i?r=r||wp(i,mn()):(i=new xO,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new _p(r,!0,!1):null;return function IV(n){return uS(n.viewCache_)}(RO(i,e,cS(n.pendingWriteTree_,e._path),a?c.getNode():Wt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Lr(i).withIndex(e._queryParams.getIndex());let c;if(UN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=jI(n.serverSyncTree_,e._path,a);else{const f=$I(n.serverSyncTree_,e);c=kO(n.serverSyncTree_,e._path,a,f)}return sa(n.eventQueue_,e._path,c),mS(n.serverSyncTree_,e,t,null,!0),a},i=>(Bv(n,"get for query "+(0,k.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new ty(r,new ou(n._repo,n._path),n._queryParams.getIndex()))}class YI{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new ik("value",this,new ty(e.snapshotNode,new ou(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new sk(this,e,t):null}matches(e){return e instanceof YI&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class AS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new sk(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=ny(new ou(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new ik(e.type,this,new ty(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof AS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function QI(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const y=t,E=(b,x)=>{XN(n._repo,n,f),y(b,x)};E.userCallback=t.userCallback,E.context=t.context,t=E}const c=new iM(t,a||void 0),f="value"===e?new YI(c):new AS(e,c);return function fB(n,e,t){let r;r=".info"===Jt(e._path)?UN(n.infoSyncTree_,e,t):UN(n.serverSyncTree_,e,t),WO(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>XN(n._repo,n,f)}function oM(n,e,t,r){return QI(n,"value",e,t,r)}function ck(n,e,t,r){return QI(n,"child_added",e,t,r)}function lk(n,e,t,r){return QI(n,"child_changed",e,t,r)}function dk(n,e,t,r){return QI(n,"child_moved",e,t,r)}function hk(n,e,t,r){return QI(n,"child_removed",e,t,r)}function fk(n,e,t){let r=null;const i=t?new iM(t):null;"value"===e?r=new YI(i):e&&(r=new AS(e,i)),XN(n._repo,n,r)}class dc{}class pk extends dc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ul("endAt",this._value,e._path,!0);const t=EN(e._queryParams,this._value,this._key);if(SS(t),Dp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class xB extends dc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ul("endBefore",this._value,e._path,!1);const t=function UU(n,e,t){let r;return r=EN(n,e,n.index_===Fl||t?t:gp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(SS(t),Dp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class gk extends dc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ul("startAt",this._value,e._path,!0);const t=wN(e._queryParams,this._value,this._key);if(SS(t),Dp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class MB extends dc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ul("startAfter",this._value,e._path,!1);const t=function FU(n,e,t){let r;return r=wN(n,e,n.index_===Fl||t?t:_h),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(SS(t),Dp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Mo(e._repo,e._path,t,e._orderByCalled)}}class OB extends dc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Mo(e._repo,e._path,function kU(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class LB extends dc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Mo(e._repo,e._path,function LU(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class UB extends dc{constructor(e){super(),this._path=e}_apply(e){bS(e,"orderByChild");const t=new bn(this._path);if(Xt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new yN(t),i=rS(e._queryParams,r);return Dp(i),new Mo(e._repo,e._path,i,!0)}}class BB extends dc{_apply(e){bS(e,"orderByKey");const t=rS(e._queryParams,Fl);return Dp(t),new Mo(e._repo,e._path,t,!0)}}class $B extends dc{_apply(e){bS(e,"orderByPriority");const t=rS(e._queryParams,Xn);return Dp(t),new Mo(e._repo,e._path,t,!0)}}class zB extends dc{_apply(e){bS(e,"orderByValue");const t=rS(e._queryParams,_N);return Dp(t),new Mo(e._repo,e._path,t,!0)}}class WB extends dc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ul("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new pk(this._value,this._key)._apply(new gk(this._value,this._key)._apply(e))}}function hc(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function bV(n){(0,k.hu)(!fS,"__referenceConstructor has already been defined"),fS=n})(ou),function NV(n){(0,k.hu)(!gS,"__referenceConstructor has already been defined"),gS=n}(ou);const aM={};function yk(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Ll("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,E,c=rM(a,i),f=c.repoInfo;typeof process<"u"&&process.env&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(y=!0,a=`http://${E}?ns=${f.namespace}`,c=rM(a,i),f=c.repoInfo):y=!c.repoInfo.secure;const b=i&&y?new xI(xI.OWNER):new j2(n.name,n.options,e);GO("Invalid Firebase Database URL",c),Xt(c.path)||Ll("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function QB(n,e,t,r){let i=aM[e.name];i||(i={},aM[e.name]=i);let a=i[n.toURLString()];return a&&Ll("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new iB(n,false,t,r),i[n.toURLString()]=a,a}(f,n,b,new B2(n.name,t));return new XB(x,n)}class XB{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function sB(n,e,t){if(n.stats_=uN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new iS(n.repoInfo_,(r,i,a,c)=>{YO(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>QO(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ym(n.repoInfo_,e,(r,i,a,c)=>{YO(n,r,i,a,c)},r=>{QO(n,r)},r=>{!function oB(n,e){es(e,(t,r)=>{QN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function z2(n,e){const t=n.toString();return aN[t]||(aN[t]=e()),aN[t]}(n.repoInfo_,()=>new zU(n.stats_,n.server_)),n.infoData_=new VU,n.infoSyncTree_=new OO({startListening:(r,i,a,c)=>{let f=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(f=jI(n.infoSyncTree_,r._path,y),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),QN(n,"connected",!1),n.serverSyncTree_=new OO({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(f,y)=>{const E=c(f,y);sa(n.eventQueue_,r._path,E)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ou(this._repo,mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function YB(n,e){const t=aM[e];(!t||t[n.key]!==n)&&Ll(`Database ${e}(${n.repoInfo_}) has already been deleted.`),XO(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ll("Cannot call "+e+" on a deleted database.")}}function _k(){B1.IS_TRANSPORT_INITIALIZED&&ks("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function ej(){_k(),mp.forceDisallow()}function tj(){_k(),Mv.forceDisallow(),mp.forceAllow()}function ij(n,e){w1(n,e)}const oj={".sv":"timestamp"};class cj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ym.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ym.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function sj(n){g1(Zs.SDK_VERSION),(0,Zs._registerComponent)(new Ba.wA("database",(e,{instanceIdentifier:t})=>yk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Zs.registerVersion)(f1,"0.14.4",n),(0,Zs.registerVersion)(f1,"0.14.4","esm2017")}();const fj=new Xo.Yd("@firebase/database-compat"),wk=function(n){fj.warn("FIREBASE WARNING: "+n)};class mj{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,wk("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class yj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Tp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),ZI("DataSnapshot.child","path",e,!1),new Tp(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ZI("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Tp(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new oa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class _s{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const c=_s.getCancelAndContextArgs_("Query.on",r,i),f=(E,b)=>{t.call(c.context,new Tp(this.database,E),b)};f.userCallback=t,f.context=c.context;const y=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return oM(this._delegate,f,y),t;case"child_added":return ck(this._delegate,f,y),t;case"child_removed":return hk(this._delegate,f,y),t;case"child_changed":return lk(this._delegate,f,y),t;case"child_moved":return dk(this._delegate,f,y),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,fk(this._delegate,e,i)}else fk(this._delegate,e)}get(){return SB(this._delegate).then(e=>new Tp(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=_s.getCancelAndContextArgs_("Query.once",r,i),c=new k.BH,f=(E,b)=>{const x=new Tp(this.database,E);t&&t.call(a.context,x,b),c.resolve(x)};f.userCallback=t,f.context=a.context;const y=E=>{a.cancel&&a.cancel.call(a.context,E),c.reject(E)};switch(e){case"value":oM(this._delegate,f,y,{onlyOnce:!0});break;case"child_added":ck(this._delegate,f,y,{onlyOnce:!0});break;case"child_removed":hk(this._delegate,f,y,{onlyOnce:!0});break;case"child_changed":lk(this._delegate,f,y,{onlyOnce:!0});break;case"child_moved":dk(this._delegate,f,y,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new _s(this.database,hc(this._delegate,function kB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new OB(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new _s(this.database,hc(this._delegate,function FB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new LB(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new _s(this.database,hc(this._delegate,function VB(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ZI("orderByChild","path",n,!1),new UB(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new _s(this.database,hc(this._delegate,function jB(){return new BB}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new _s(this.database,hc(this._delegate,function HB(){return new $B}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new _s(this.database,hc(this._delegate,function GB(){return new zB}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new _s(this.database,hc(this._delegate,function NB(n=null,e){return qI("startAt","key",e,!0),new gk(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new _s(this.database,hc(this._delegate,function PB(n,e){return qI("startAfter","key",e,!0),new MB(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new _s(this.database,hc(this._delegate,function AB(n,e){return qI("endAt","key",e,!0),new pk(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new _s(this.database,hc(this._delegate,function RB(n,e){return qI("endBefore","key",e,!0),new xB(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new _s(this.database,hc(this._delegate,function qB(n,e){return qI("equalTo","key",e,!0),new WB(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof _s))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new oa(this.database,new ou(this._delegate._repo,this._delegate._path))}}class oa extends _s{constructor(e,t){super(e,new Mo(t._repo,t._path,new nS,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new oa(this.database,ny(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new oa(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new oa(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=sM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,wk("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}su("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=bB(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function TB(n,e,t){if(su("setWithPriority",n._path),Ul("setWithPriority",e,n._path,!1),YN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return JN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function CB(n){return su("remove",n._path),sM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function lj(n,e,t){var r;if(n=(0,k.m9)(n),su("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new k.BH,f=oM(n,()=>{});return function gB(n,e,t,r,i,a){Bv(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:y1(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=eM(n,e,void 0);c.currentInputSnapshot=f;const y=c.update(f.val());if(void 0===y)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{WI("transaction failed: Data returned ",y,c.path),c.status=0;const E=vS(n.transactionQueueTree_,e),b=ey(E)||[];let x;b.push(c),qN(E,b),"object"==typeof y&&null!==y&&(0,k.r3)(y,".priority")?(x=(0,k.DV)(y,".priority"),(0,k.hu)(GI(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(yS(n.serverSyncTree_,e)||Wt.EMPTY_NODE).getPriority().val();const P=KI(n),B=Lr(y,x),Y=zN(B,f,P);c.currentOutputSnapshotRaw=B,c.currentOutputSnapshotResolved=Y,c.currentWriteId=CS(n);const pe=FN(n.serverSyncTree_,e,Y,c.currentWriteId,c.applyLocally);sa(n.eventQueue_,e,pe),DS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,E,b)=>{let x=null;y?a.reject(y):(x=new ty(b,new ou(n._repo,n._path),Xn),a.resolve(new cj(E,x)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new yj(a.committed,new Tp(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function DB(n,e){n=(0,k.m9)(n),su("setPriority",n._path),YN("setPriority",e,!1);const t=new k.BH;return JN(n._repo,Tr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function IB(n,e){n=(0,k.m9)(n),su("push",n._path),Ul("push",e,n._path,!0);const t=KO(n._repo),r=EB(t),i=ny(n,r),a=ny(n,r);let c;return c=null!=e?sM(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new oa(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new oa(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return su("Reference.onDisconnect",this._delegate._path),new mj(new ok(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class JI{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:ej,forceLongPolling:tj}}useEmulator(e,t,r={}){!function vk(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ll("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ll('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new xI(xI.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new xI(c)}!function KB(n,e,t,r){n.repoInfo_=new sN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof oa){const t=uk(this._delegate,e.toString());return new oa(this,t)}{const t=ak(this._delegate,e);return new oa(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=uk(this._delegate,e);return new oa(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function nj(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),XO(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function rj(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function pB(n){n.persistentConnection_&&n.persistentConnection_.resume(ZO)}(n._repo)}(this._delegate)}}JI.ServerValue={TIMESTAMP:function aj(){return oj}(),increment:n=>function uj(n){return{".sv":{increment:n}}}(n)};var vj=Object.freeze({__proto__:null,initStandalone:function _j({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){g1(t);const c=new Ba.zt("auth-internal",new Ba.H0("database-standalone"));return c.setComponent(new Ba.wA("auth-internal",()=>r,"PRIVATE")),{instance:new JI(yk(n,c,void 0,e,a),n),namespace:i}}});const wj=JI.ServerValue;function Ek(n){return null==n}function Ik(n){return"function"==typeof n.set}function Ck(n,e){return Ik(e)?e:n.ref(e)}function Dk(n,e){if(function Ij(n){return"string"==typeof n}(n))return e.stringCase();if(Ik(n))return e.firebaseCase();if(function Cj(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function XI(n,e,t="on",r=Vy.z){return new zi.y(i=>{let a=null;return a=n[t](e,(c,f)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,lt.U)(i=>{const{snapshot:a,prevKey:c}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:c,key:f}}),(0,OP.B)())}function Tk(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function bj(n,e){const{payload:t,prevKey:r,key:i}=e,a=Tk(n,i),c=function Tj(n,e){if(Ek(e))return 0;{const t=Tk(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(y=>{const E={payload:y,type:"value",prevKey:f,key:y.key};return f=y.key,n=[...n,E],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,f),n}return n;default:return n}}function bk(n){return(Ek(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Sk(n,e,t){return function Dj(n,e,t){return XI(n,"value","once",t).pipe(Kn(r=>{const i=[mt(r)];return e.forEach(a=>i.push(XI(n,a,"on",t))),(0,yR.T)(...i).pipe(Eo(bj,[]))}),vf())}(n,e=bk(e),t)}function Ak(n,e,t){const r=(e=bk(e)).map(i=>XI(n,i,"on",t));return(0,yR.T)(...r)}function xk(n,e){return function(r,i){return Dk(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Rj(n){return function(t){return t?Dk(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Rk(n,e){return function(){return XI(n,"value","on",e)}}!function Ej(n){n.INTERNAL.registerComponent(new Ba.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new JI(i,r)},"PUBLIC").setServiceProps({Reference:oa,Query:_s,Database:JI,DataSnapshot:Tp,enableLogging:ij,INTERNAL:vj,ServerValue:wj}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(rA.Z);const Pj=new m.OlP("angularfire2.realtimeDatabaseURL"),Oj=new m.OlP("angularfire2.database.use-emulator");let kj=(()=>{class n{constructor(t,r,i,a,c,f,y,E,b,x,P,B,Y,pe,xe){this.schedulers=f;const ut=y,It=(0,Mi.on)(t,c,r);E&&qR(It,c,b,P,B,Y,x,pe),this.database=(0,Mi.cc)(`${It.name}.database.${i}`,"AngularFireDatabase",It.name,()=>{const yt=c.runOutsideAngular(()=>It.database(i||void 0));return ut&&yt.useEmulator(...ut),yt},[ut])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Ck(this.database,t));let a=i;return r&&(a=r(i)),function Nj(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:xk(r,"update"),set:xk(r,"set"),push:i=>r.push(i),remove:Rj(r),snapshotChanges:i=>Sk(n,i,t).pipe(vn.iC),stateChanges:i=>Ak(n,i,t).pipe(vn.iC),auditTrail:i=>function Sj(n,e,t){return function xj(n,e,t){return function Aj(n,e){return XI(n,"value","on",e).pipe((0,lt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function b2(...n){const e=(0,yo.jO)(n);return(0,ur.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),f=!1;for(let y=0;y<i;y++)(0,Ou.Xf)(n[y]).subscribe((0,ar.x)(r,E=>{a[y]=E,!f&&!c[y]&&(c[y]=!0,(f=c.every(Ws.y))&&(c=null))},T2.Z));t.subscribe((0,ar.x)(r,y=>{if(f){const E=[y,...a];r.next(e?e(...E):E)}}))})}(e),(0,lt.U)(([i,a])=>{const c=i.lastKeyToLoad,f=a.map(y=>y.key);return{actions:a,lastKeyToLoad:c,loadedKeys:f}}),function S2(n){return(0,ur.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,ar.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,lt.U)(i=>i.actions))}(n,Ak(n,e).pipe(Eo((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(vn.iC),valueChanges:(i,a)=>Sk(n,i,t).pipe((0,lt.U)(f=>f.map(y=>a&&a.idField?Object.assign(Object.assign({},y.payload.val()),{[a.idField]:y.key}):y.payload.val())),vn.iC)}}(a,this)}object(t){return function Mj(n,e){return{query:n,snapshotChanges:()=>Rk(n,e.schedulers.outsideAngular)().pipe(vn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Rk(n,e.schedulers.outsideAngular)().pipe(vn.iC,(0,lt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Ck(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Mi.Dh),m.LFG(Mi.xv,8),m.LFG(Pj,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(vn.HU),m.LFG(Oj,8),m.LFG(ZR,8),m.LFG(jR,8),m.LFG($R,8),m.LFG(HR,8),m.LFG(zR,8),m.LFG(GR,8),m.LFG(WR,8),m.LFG(Wb,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Lj=(()=>{class n{constructor(){_g.Z.registerVersion("angularfire",vn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[kj]}),n})(),Fj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[D2]}),n.\u0275inj=m.cJS({imports:[Cu,g2,XF,Mi.hO.initializeApp(pd_fireBaseConfig),Lj]}),n})();Rc().bootstrapModule(Fj).catch(n=>console.error(n))},9751:(_t,Ae,F)=>{F.d(Ae,{y:()=>Ie});var m=F(930),Q=F(727),L=F(8822),se=F(9635),ie=F(2416),oe=F(576),me=F(2806);let Ie=(()=>{class Z{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const nt=new Z;return nt.source=this,nt.operator=Te,nt}subscribe(Te,nt,vt){const ce=function z(Z){return Z&&Z instanceof m.Lv||function G(Z){return Z&&(0,oe.m)(Z.next)&&(0,oe.m)(Z.error)&&(0,oe.m)(Z.complete)}(Z)&&(0,Q.Nn)(Z)}(Te)?Te:new m.Hp(Te,nt,vt);return(0,me.x)(()=>{const{operator:Ue,source:Oe}=this;ce.add(Ue?Ue.call(ce,Oe):Oe?this._subscribe(ce):this._trySubscribe(ce))}),ce}_trySubscribe(Te){try{return this._subscribe(Te)}catch(nt){Te.error(nt)}}forEach(Te,nt){return new(nt=he(nt))((vt,ce)=>{const Ue=new m.Hp({next:Oe=>{try{Te(Oe)}catch(ze){ce(ze),Ue.unsubscribe()}},error:ce,complete:vt});this.subscribe(Ue)})}_subscribe(Te){var nt;return null===(nt=this.source)||void 0===nt?void 0:nt.subscribe(Te)}[L.L](){return this}pipe(...Te){return(0,se.U)(Te)(this)}toPromise(Te){return new(Te=he(Te))((nt,vt)=>{let ce;this.subscribe(Ue=>ce=Ue,Ue=>vt(Ue),()=>nt(ce))})}}return Z.create=je=>new Z(je),Z})();function he(Z){var je;return null!==(je=Z??ie.config.Promise)&&void 0!==je?je:Promise}},7579:(_t,Ae,F)=>{F.d(Ae,{x:()=>me});var m=F(9751),Q=F(727);const se=(0,F(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=F(8737),oe=F(2806);let me=(()=>{class he extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const Z=new Ie(this,this);return Z.operator=z,Z}_throwIfClosed(){if(this.closed)throw new se}next(z){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(z)}})}error(z){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:Z}=this;for(;Z.length;)Z.shift().error(z)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:Z,isStopped:je,observers:Te}=this;return Z||je?Q.Lc:(this.currentObservers=null,Te.push(z),new Q.w0(()=>{this.currentObservers=null,(0,ie.P)(Te,z)}))}_checkFinalizedStatuses(z){const{hasError:Z,thrownError:je,isStopped:Te}=this;Z?z.error(je):Te&&z.complete()}asObservable(){const z=new m.y;return z.source=this,z}}return he.create=(G,z)=>new Ie(G,z),he})();class Ie extends me{constructor(G,z){super(),this.destination=G,this.source=z}next(G){var z,Z;null===(Z=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===Z||Z.call(z,G)}error(G){var z,Z;null===(Z=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===Z||Z.call(z,G)}complete(){var G,z;null===(z=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===z||z.call(G)}_subscribe(G){var z,Z;return null!==(Z=null===(z=this.source)||void 0===z?void 0:z.subscribe(G))&&void 0!==Z?Z:Q.Lc}}},930:(_t,Ae,F)=>{F.d(Ae,{Hp:()=>vt,Lv:()=>Z});var m=F(576),Q=F(727),L=F(2416),se=F(7849),ie=F(5032);const oe=he("C",void 0,void 0);function he(ke,we,fe){return{kind:ke,value:we,error:fe}}var G=F(3410),z=F(2806);class Z extends Q.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,Q.Nn)(we)&&we.add(this)):this.destination=ze}static create(we,fe,Ne){return new vt(we,fe,Ne)}next(we){this.isStopped?Oe(function Ie(ke){return he("N",ke,void 0)}(we),this):this._next(we)}error(we){this.isStopped?Oe(function me(ke){return he("E",void 0,ke)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?Oe(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Te(ke,we){return je.call(ke,we)}class nt{constructor(we){this.partialObserver=we}next(we){const{partialObserver:fe}=this;if(fe.next)try{fe.next(we)}catch(Ne){ce(Ne)}}error(we){const{partialObserver:fe}=this;if(fe.error)try{fe.error(we)}catch(Ne){ce(Ne)}else ce(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(fe){ce(fe)}}}class vt extends Z{constructor(we,fe,Ne){let Ee;if(super(),(0,m.m)(we)||!we)Ee={next:we??void 0,error:fe??void 0,complete:Ne??void 0};else{let $e;this&&L.config.useDeprecatedNextContext?($e=Object.create(we),$e.unsubscribe=()=>this.unsubscribe(),Ee={next:we.next&&Te(we.next,$e),error:we.error&&Te(we.error,$e),complete:we.complete&&Te(we.complete,$e)}):Ee=we}this.destination=new nt(Ee)}}function ce(ke){L.config.useDeprecatedSynchronousErrorHandling?(0,z.O)(ke):(0,se.h)(ke)}function Oe(ke,we){const{onStoppedNotification:fe}=L.config;fe&&G.z.setTimeout(()=>fe(ke,we))}const ze={closed:!0,next:ie.Z,error:function Ue(ke){throw ke},complete:ie.Z}},727:(_t,Ae,F)=>{F.d(Ae,{Lc:()=>oe,w0:()=>ie,Nn:()=>me});var m=F(576);const L=(0,F(3888).d)(he=>function(z){he(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((Z,je)=>`${je+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var se=F(8737);class ie{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Te of z)Te.remove(this);else z.remove(this);const{initialTeardown:Z}=this;if((0,m.m)(Z))try{Z()}catch(Te){G=Te instanceof L?Te.errors:[Te]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Te of je)try{Ie(Te)}catch(nt){G=G??[],nt instanceof L?G=[...G,...nt.errors]:G.push(nt)}}if(G)throw new L(G)}}add(G){var z;if(G&&G!==this)if(this.closed)Ie(G);else{if(G instanceof ie){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(G)}}_hasParent(G){const{_parentage:z}=this;return z===G||Array.isArray(z)&&z.includes(G)}_addParent(G){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(G),z):z?[z,G]:G}_removeParent(G){const{_parentage:z}=this;z===G?this._parentage=null:Array.isArray(z)&&(0,se.P)(z,G)}remove(G){const{_finalizers:z}=this;z&&(0,se.P)(z,G),G instanceof ie&&G._removeParent(this)}}ie.EMPTY=(()=>{const he=new ie;return he.closed=!0,he})();const oe=ie.EMPTY;function me(he){return he instanceof ie||he&&"closed"in he&&(0,m.m)(he.remove)&&(0,m.m)(he.add)&&(0,m.m)(he.unsubscribe)}function Ie(he){(0,m.m)(he)?he():he.unsubscribe()}},2416:(_t,Ae,F)=>{F.d(Ae,{config:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(_t,Ae,F)=>{F.d(Ae,{E:()=>Q});const Q=new(F(9751).y)(ie=>ie.complete())},8996:(_t,Ae,F)=>{F.d(Ae,{D:()=>we});var m=F(8421),Q=F(5363),L=F(9468),oe=F(9751),Ie=F(2202),he=F(576),G=F(9672);function Z(fe,Ne){if(!fe)throw new Error("Iterable cannot be null");return new oe.y(Ee=>{(0,G.f)(Ee,Ne,()=>{const $e=fe[Symbol.asyncIterator]();(0,G.f)(Ee,Ne,()=>{$e.next().then(re=>{re.done?Ee.complete():Ee.next(re.value)})},0,!0)})})}var je=F(3670),Te=F(8239),nt=F(1144),vt=F(6495),ce=F(2206),Ue=F(4532),Oe=F(3260);function we(fe,Ne){return Ne?function ke(fe,Ne){if(null!=fe){if((0,je.c)(fe))return function se(fe,Ne){return(0,m.Xf)(fe).pipe((0,L.R)(Ne),(0,Q.Q)(Ne))}(fe,Ne);if((0,nt.z)(fe))return function me(fe,Ne){return new oe.y(Ee=>{let $e=0;return Ne.schedule(function(){$e===fe.length?Ee.complete():(Ee.next(fe[$e++]),Ee.closed||this.schedule())})})}(fe,Ne);if((0,Te.t)(fe))return function ie(fe,Ne){return(0,m.Xf)(fe).pipe((0,L.R)(Ne),(0,Q.Q)(Ne))}(fe,Ne);if((0,ce.D)(fe))return Z(fe,Ne);if((0,vt.T)(fe))return function z(fe,Ne){return new oe.y(Ee=>{let $e;return(0,G.f)(Ee,Ne,()=>{$e=fe[Ie.h](),(0,G.f)(Ee,Ne,()=>{let re,Ke;try{({value:re,done:Ke}=$e.next())}catch(Yt){return void Ee.error(Yt)}Ke?Ee.complete():Ee.next(re)},0,!0)}),()=>(0,he.m)($e?.return)&&$e.return()})}(fe,Ne);if((0,Oe.L)(fe))return function ze(fe,Ne){return Z((0,Oe.Q)(fe),Ne)}(fe,Ne)}throw(0,Ue.z)(fe)}(fe,Ne):(0,m.Xf)(fe)}},8421:(_t,Ae,F)=>{F.d(Ae,{Xf:()=>je});var m=F(655),Q=F(1144),L=F(8239),se=F(9751),ie=F(3670),oe=F(2206),me=F(4532),Ie=F(6495),he=F(3260),G=F(576),z=F(7849),Z=F(8822);function je(ke){if(ke instanceof se.y)return ke;if(null!=ke){if((0,ie.c)(ke))return function Te(ke){return new se.y(we=>{const fe=ke[Z.L]();if((0,G.m)(fe.subscribe))return fe.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,Q.z)(ke))return function nt(ke){return new se.y(we=>{for(let fe=0;fe<ke.length&&!we.closed;fe++)we.next(ke[fe]);we.complete()})}(ke);if((0,L.t)(ke))return function vt(ke){return new se.y(we=>{ke.then(fe=>{we.closed||(we.next(fe),we.complete())},fe=>we.error(fe)).then(null,z.h)})}(ke);if((0,oe.D)(ke))return Ue(ke);if((0,Ie.T)(ke))return function ce(ke){return new se.y(we=>{for(const fe of ke)if(we.next(fe),we.closed)return;we.complete()})}(ke);if((0,he.L)(ke))return function Oe(ke){return Ue((0,he.Q)(ke))}(ke)}throw(0,me.z)(ke)}function Ue(ke){return new se.y(we=>{(function ze(ke,we){var fe,Ne,Ee,$e;return(0,m.mG)(this,void 0,void 0,function*(){try{for(fe=(0,m.KL)(ke);!(Ne=yield fe.next()).done;)if(we.next(Ne.value),we.closed)return}catch(re){Ee={error:re}}finally{try{Ne&&!Ne.done&&($e=fe.return)&&(yield $e.call(fe))}finally{if(Ee)throw Ee.error}}we.complete()})})(ke,we).catch(fe=>we.error(fe))})}},6451:(_t,Ae,F)=>{F.d(Ae,{T:()=>oe});var m=F(8189),Q=F(8421),L=F(515),se=F(7669),ie=F(8996);function oe(...me){const Ie=(0,se.yG)(me),he=(0,se._6)(me,1/0),G=me;return G.length?1===G.length?(0,Q.Xf)(G[0]):(0,m.J)(he)((0,ie.D)(G,Ie)):L.E}},5403:(_t,Ae,F)=>{F.d(Ae,{x:()=>Q});var m=F(930);function Q(se,ie,oe,me,Ie){return new L(se,ie,oe,me,Ie)}class L extends m.Lv{constructor(ie,oe,me,Ie,he,G){super(ie),this.onFinalize=he,this.shouldUnsubscribe=G,this._next=oe?function(z){try{oe(z)}catch(Z){ie.error(Z)}}:super._next,this._error=Ie?function(z){try{Ie(z)}catch(Z){ie.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(z){ie.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(_t,Ae,F)=>{F.d(Ae,{U:()=>L});var m=F(4482),Q=F(5403);function L(se,ie){return(0,m.e)((oe,me)=>{let Ie=0;oe.subscribe((0,Q.x)(me,he=>{me.next(se.call(ie,he,Ie++))}))})}},8189:(_t,Ae,F)=>{F.d(Ae,{J:()=>L});var m=F(5577),Q=F(4671);function L(se=1/0){return(0,m.z)(Q.y,se)}},5577:(_t,Ae,F)=>{F.d(Ae,{z:()=>Ie});var m=F(4004),Q=F(8421),L=F(4482),se=F(9672),ie=F(5403),me=F(576);function Ie(he,G,z=1/0){return(0,me.m)(G)?Ie((Z,je)=>(0,m.U)((Te,nt)=>G(Z,Te,je,nt))((0,Q.Xf)(he(Z,je))),z):("number"==typeof G&&(z=G),(0,L.e)((Z,je)=>function oe(he,G,z,Z,je,Te,nt,vt){const ce=[];let Ue=0,Oe=0,ze=!1;const ke=()=>{ze&&!ce.length&&!Ue&&G.complete()},we=Ne=>Ue<Z?fe(Ne):ce.push(Ne),fe=Ne=>{Te&&G.next(Ne),Ue++;let Ee=!1;(0,Q.Xf)(z(Ne,Oe++)).subscribe((0,ie.x)(G,$e=>{je?.($e),Te?we($e):G.next($e)},()=>{Ee=!0},void 0,()=>{if(Ee)try{for(Ue--;ce.length&&Ue<Z;){const $e=ce.shift();nt?(0,se.f)(G,nt,()=>fe($e)):fe($e)}ke()}catch($e){G.error($e)}}))};return he.subscribe((0,ie.x)(G,we,()=>{ze=!0,ke()})),()=>{vt?.()}}(Z,je,he,z)))}},5363:(_t,Ae,F)=>{F.d(Ae,{Q:()=>se});var m=F(9672),Q=F(4482),L=F(5403);function se(ie,oe=0){return(0,Q.e)((me,Ie)=>{me.subscribe((0,L.x)(Ie,he=>(0,m.f)(Ie,ie,()=>Ie.next(he),oe),()=>(0,m.f)(Ie,ie,()=>Ie.complete(),oe),he=>(0,m.f)(Ie,ie,()=>Ie.error(he),oe)))})}},3099:(_t,Ae,F)=>{F.d(Ae,{B:()=>ie});var m=F(8421),Q=F(7579),L=F(930),se=F(4482);function ie(me={}){const{connector:Ie=(()=>new Q.x),resetOnError:he=!0,resetOnComplete:G=!0,resetOnRefCountZero:z=!0}=me;return Z=>{let je,Te,nt,vt=0,ce=!1,Ue=!1;const Oe=()=>{Te?.unsubscribe(),Te=void 0},ze=()=>{Oe(),je=nt=void 0,ce=Ue=!1},ke=()=>{const we=je;ze(),we?.unsubscribe()};return(0,se.e)((we,fe)=>{vt++,!Ue&&!ce&&Oe();const Ne=nt=nt??Ie();fe.add(()=>{vt--,0===vt&&!Ue&&!ce&&(Te=oe(ke,z))}),Ne.subscribe(fe),!je&&vt>0&&(je=new L.Hp({next:Ee=>Ne.next(Ee),error:Ee=>{Ue=!0,Oe(),Te=oe(ze,he,Ee),Ne.error(Ee)},complete:()=>{ce=!0,Oe(),Te=oe(ze,G),Ne.complete()}}),(0,m.Xf)(we).subscribe(je))})(Z)}}function oe(me,Ie,...he){if(!0===Ie)return void me();if(!1===Ie)return;const G=new L.Hp({next:()=>{G.unsubscribe(),me()}});return(0,m.Xf)(Ie(...he)).subscribe(G)}},9468:(_t,Ae,F)=>{F.d(Ae,{R:()=>Q});var m=F(4482);function Q(L,se=0){return(0,m.e)((ie,oe)=>{oe.add(L.schedule(()=>ie.subscribe(oe),se))})}},8505:(_t,Ae,F)=>{F.d(Ae,{b:()=>ie});var m=F(576),Q=F(4482),L=F(5403),se=F(4671);function ie(oe,me,Ie){const he=(0,m.m)(oe)||me||Ie?{next:oe,error:me,complete:Ie}:oe;return he?(0,Q.e)((G,z)=>{var Z;null===(Z=he.subscribe)||void 0===Z||Z.call(he);let je=!0;G.subscribe((0,L.x)(z,Te=>{var nt;null===(nt=he.next)||void 0===nt||nt.call(he,Te),z.next(Te)},()=>{var Te;je=!1,null===(Te=he.complete)||void 0===Te||Te.call(he),z.complete()},Te=>{var nt;je=!1,null===(nt=he.error)||void 0===nt||nt.call(he,Te),z.error(Te)},()=>{var Te,nt;je&&(null===(Te=he.unsubscribe)||void 0===Te||Te.call(he)),null===(nt=he.finalize)||void 0===nt||nt.call(he)}))}):se.y}},4408:(_t,Ae,F)=>{F.d(Ae,{o:()=>ie});var m=F(727);class Q extends m.w0{constructor(me,Ie){super()}schedule(me,Ie=0){return this}}const L={setInterval(oe,me,...Ie){const{delegate:he}=L;return he?.setInterval?he.setInterval(oe,me,...Ie):setInterval(oe,me,...Ie)},clearInterval(oe){const{delegate:me}=L;return(me?.clearInterval||clearInterval)(oe)},delegate:void 0};var se=F(8737);class ie extends Q{constructor(me,Ie){super(me,Ie),this.scheduler=me,this.work=Ie,this.pending=!1}schedule(me,Ie=0){var he;if(this.closed)return this;this.state=me;const G=this.id,z=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(z,G,Ie)),this.pending=!0,this.delay=Ie,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(z,this.id,Ie),this}requestAsyncId(me,Ie,he=0){return L.setInterval(me.flush.bind(me,this),he)}recycleAsyncId(me,Ie,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return Ie;null!=Ie&&L.clearInterval(Ie)}execute(me,Ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(me,Ie);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,Ie){let G,he=!1;try{this.work(me)}catch(z){he=!0,G=z||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:me,scheduler:Ie}=this,{actions:he}=Ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(he,this),null!=me&&(this.id=this.recycleAsyncId(Ie,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(_t,Ae,F)=>{F.d(Ae,{v:()=>L});var m=F(6063);class Q{constructor(ie,oe=Q.now){this.schedulerActionCtor=ie,this.now=oe}schedule(ie,oe=0,me){return new this.schedulerActionCtor(this,ie).schedule(me,oe)}}Q.now=m.l.now;class L extends Q{constructor(ie,oe=Q.now){super(ie,oe),this.actions=[],this._active=!1}flush(ie){const{actions:oe}=this;if(this._active)return void oe.push(ie);let me;this._active=!0;do{if(me=ie.execute(ie.state,ie.delay))break}while(ie=oe.shift());if(this._active=!1,me){for(;ie=oe.shift();)ie.unsubscribe();throw me}}}},4986:(_t,Ae,F)=>{F.d(Ae,{z:()=>L});var m=F(4408);const L=new(F(7565).v)(m.o)},6063:(_t,Ae,F)=>{F.d(Ae,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(_t,Ae,F)=>{F.d(Ae,{z:()=>m});const m={setTimeout(Q,L,...se){const{delegate:ie}=m;return ie?.setTimeout?ie.setTimeout(Q,L,...se):setTimeout(Q,L,...se)},clearTimeout(Q){const{delegate:L}=m;return(L?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(_t,Ae,F)=>{F.d(Ae,{h:()=>Q});const Q=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_t,Ae,F)=>{F.d(Ae,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(_t,Ae,F)=>{F.d(Ae,{_6:()=>oe,jO:()=>se,yG:()=>ie});var m=F(576);function L(me){return me[me.length-1]}function se(me){return(0,m.m)(L(me))?me.pop():void 0}function ie(me){return function Q(me){return me&&(0,m.m)(me.schedule)}(L(me))?me.pop():void 0}function oe(me,Ie){return"number"==typeof L(me)?me.pop():Ie}},8737:(_t,Ae,F)=>{function m(Q,L){if(Q){const se=Q.indexOf(L);0<=se&&Q.splice(se,1)}}F.d(Ae,{P:()=>m})},3888:(_t,Ae,F)=>{function m(Q){const se=Q(ie=>{Error.call(ie),ie.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}F.d(Ae,{d:()=>m})},2806:(_t,Ae,F)=>{F.d(Ae,{O:()=>se,x:()=>L});var m=F(2416);let Q=null;function L(ie){if(m.config.useDeprecatedSynchronousErrorHandling){const oe=!Q;if(oe&&(Q={errorThrown:!1,error:null}),ie(),oe){const{errorThrown:me,error:Ie}=Q;if(Q=null,me)throw Ie}}else ie()}function se(ie){m.config.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ie)}},9672:(_t,Ae,F)=>{function m(Q,L,se,ie=0,oe=!1){const me=L.schedule(function(){se(),oe?Q.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(Q.add(me),!oe)return me}F.d(Ae,{f:()=>m})},4671:(_t,Ae,F)=>{function m(Q){return Q}F.d(Ae,{y:()=>m})},1144:(_t,Ae,F)=>{F.d(Ae,{z:()=>m});const m=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(_t,Ae,F)=>{F.d(Ae,{D:()=>Q});var m=F(576);function Q(L){return Symbol.asyncIterator&&(0,m.m)(L?.[Symbol.asyncIterator])}},576:(_t,Ae,F)=>{function m(Q){return"function"==typeof Q}F.d(Ae,{m:()=>m})},3670:(_t,Ae,F)=>{F.d(Ae,{c:()=>L});var m=F(8822),Q=F(576);function L(se){return(0,Q.m)(se[m.L])}},6495:(_t,Ae,F)=>{F.d(Ae,{T:()=>L});var m=F(2202),Q=F(576);function L(se){return(0,Q.m)(se?.[m.h])}},8239:(_t,Ae,F)=>{F.d(Ae,{t:()=>Q});var m=F(576);function Q(L){return(0,m.m)(L?.then)}},3260:(_t,Ae,F)=>{F.d(Ae,{L:()=>se,Q:()=>L});var m=F(655),Q=F(576);function L(ie){return(0,m.FC)(this,arguments,function*(){const me=ie.getReader();try{for(;;){const{value:Ie,done:he}=yield(0,m.qq)(me.read());if(he)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(Ie)}}finally{me.releaseLock()}})}function se(ie){return(0,Q.m)(ie?.getReader)}},4482:(_t,Ae,F)=>{F.d(Ae,{A:()=>Q,e:()=>L});var m=F(576);function Q(se){return(0,m.m)(se?.lift)}function L(se){return ie=>{if(Q(ie))return ie.lift(function(oe){try{return se(oe,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(_t,Ae,F)=>{function m(){}F.d(Ae,{Z:()=>m})},9635:(_t,Ae,F)=>{F.d(Ae,{U:()=>L,z:()=>Q});var m=F(4671);function Q(...se){return L(se)}function L(se){return 0===se.length?m.y:1===se.length?se[0]:function(oe){return se.reduce((me,Ie)=>Ie(me),oe)}}},7849:(_t,Ae,F)=>{F.d(Ae,{h:()=>L});var m=F(2416),Q=F(3410);function L(se){Q.z.setTimeout(()=>{const{onUnhandledError:ie}=m.config;if(!ie)throw se;ie(se)})}},4532:(_t,Ae,F)=>{function m(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ae,{z:()=>m})},655:(_t,Ae,F)=>{function se(le,_e){var Ce={};for(var Me in le)Object.prototype.hasOwnProperty.call(le,Me)&&_e.indexOf(Me)<0&&(Ce[Me]=le[Me]);if(null!=le&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(Me=Object.getOwnPropertySymbols(le);We<Me.length;We++)_e.indexOf(Me[We])<0&&Object.prototype.propertyIsEnumerable.call(le,Me[We])&&(Ce[Me[We]]=le[Me[We]])}return Ce}function Z(le,_e,Ce,Me){return new(Ce||(Ce=Promise))(function(Le,qe){function it(Nt){try{wt(Me.next(Nt))}catch(pn){qe(pn)}}function Ft(Nt){try{wt(Me.throw(Nt))}catch(pn){qe(pn)}}function wt(Nt){Nt.done?Le(Nt.value):function We(Le){return Le instanceof Ce?Le:new Ce(function(qe){qe(Le)})}(Nt.value).then(it,Ft)}wt((Me=Me.apply(le,_e||[])).next())})}function ke(le){return this instanceof ke?(this.v=le,this):new ke(le)}function we(le,_e,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,Me=Ce.apply(le,_e||[]),Le=[];return We={},qe("next"),qe("throw"),qe("return"),We[Symbol.asyncIterator]=function(){return this},We;function qe(Gt){Me[Gt]&&(We[Gt]=function(gn){return new Promise(function(Sr,Zr){Le.push([Gt,gn,Sr,Zr])>1||it(Gt,gn)})})}function it(Gt,gn){try{!function Ft(Gt){Gt.value instanceof ke?Promise.resolve(Gt.value.v).then(wt,Nt):pn(Le[0][2],Gt)}(Me[Gt](gn))}catch(Sr){pn(Le[0][3],Sr)}}function wt(Gt){it("next",Gt)}function Nt(Gt){it("throw",Gt)}function pn(Gt,gn){Gt(gn),Le.shift(),Le.length&&it(Le[0][0],Le[0][1])}}function Ne(le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,_e=le[Symbol.asyncIterator];return _e?_e.call(le):(le=function vt(le){var _e="function"==typeof Symbol&&Symbol.iterator,Ce=_e&&le[_e],Me=0;if(Ce)return Ce.call(le);if(le&&"number"==typeof le.length)return{next:function(){return le&&Me>=le.length&&(le=void 0),{value:le&&le[Me++],done:!le}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(le),Ce={},Me("next"),Me("throw"),Me("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function Me(Le){Ce[Le]=le[Le]&&function(qe){return new Promise(function(it,Ft){!function We(Le,qe,it,Ft){Promise.resolve(Ft).then(function(wt){Le({value:wt,done:it})},qe)}(it,Ft,(qe=le[Le](qe)).done,qe.value)})}}}F.d(Ae,{FC:()=>we,KL:()=>Ne,_T:()=>se,mG:()=>Z,qq:()=>ke})},2223:(_t,Ae,F)=>{F.d(Ae,{$8M:()=>Kn,$WT:()=>ko,$Z:()=>UC,AFp:()=>CC,AaK:()=>Ie,BQk:()=>Wg,CRH:()=>yE,D6c:()=>cI,EJc:()=>NE,F4k:()=>pD,FYo:()=>Ig,FiY:()=>St,GfV:()=>NC,HDt:()=>vb,JOm:()=>$r,LFG:()=>ln,LSH:()=>gf,Lbi:()=>gw,Lck:()=>cm,MMx:()=>eE,NdJ:()=>gD,Ojb:()=>nA,OlP:()=>hn,Oqu:()=>Mn,P3R:()=>gC,PXZ:()=>$E,Q6J:()=>Ve,QGY:()=>__,Qsj:()=>ja,R0b:()=>Wr,RDi:()=>MS,Rgc:()=>tp,SBq:()=>wg,Sil:()=>kE,Suo:()=>Li,TTD:()=>Ic,TgZ:()=>Ff,VKq:()=>iE,WLB:()=>sE,X6Q:()=>up,XFs:()=>gt,Xpm:()=>Bs,Xts:()=>Gu,Y36:()=>Df,YKP:()=>O_,YNc:()=>qd,Yjl:()=>uo,Yz7:()=>Nt,Z0I:()=>Sr,ZZ4:()=>nI,_UZ:()=>ft,_c5:()=>lp,_uU:()=>w0,aQg:()=>km,c2e:()=>tv,cJS:()=>Gt,cg1:()=>vl,dDg:()=>jE,dqk:()=>Xe,eFA:()=>zE,eJc:()=>z_,eoX:()=>xm,f3M:()=>Ot,g9A:()=>DC,h0i:()=>ih,hGG:()=>gb,hij:()=>Xg,iGM:()=>mE,ifc:()=>ee,ip1:()=>ev,jDz:()=>tE,kL8:()=>x0,lG2:()=>Sp,lqb:()=>Kc,lri:()=>sv,n5z:()=>ku,oAB:()=>ao,oxw:()=>Fn,q4F:()=>Pd,qFp:()=>tR,qLn:()=>Yc,qZA:()=>at,rWj:()=>fh,s9C:()=>c0,sBO:()=>tb,s_b:()=>U_,soG:()=>Sm,tb:()=>tu,tp0:()=>lr,uIk:()=>Nf,vHH:()=>ce,vpe:()=>Ji,wAp:()=>Dt,xp6:()=>Aw,ynx:()=>Er,z2F:()=>Ml,zSh:()=>Fy,zs3:()=>Qc});var m=F(7579),Q=F(727),L=F(9751),se=F(6451),ie=F(3099);function oe(s){for(let o in s)if(s[o]===oe)return o;throw Error("Could not find renamed property on target object.")}function Ie(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Ie).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function he(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=oe({__forward_ref__:oe});function z(s){return s.__forward_ref__=z,s.toString=function(){return Ie(this())},s}function Z(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===z}function Te(s){return s&&!!s.\u0275providers}const vt="https://g.co/ng/security#xss";class ce extends Error{constructor(o,u){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function Oe(s){return"string"==typeof s?s:null==s?"":String(s)}function Ne(s,o){throw new ce(-201,!1)}function Le(s,o){null==s&&function qe(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Nt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Gt(s){return{providers:s.providers||[],imports:s.imports||[]}}function gn(s){return Zr(s,Sn)||Zr(s,so)}function Sr(s){return null!==gn(s)}function Zr(s,o){return s.hasOwnProperty(o)?s[o]:null}function yi(s){return s&&(s.hasOwnProperty(Fs)||s.hasOwnProperty(au))?s[Fs]:null}const Sn=oe({\u0275prov:oe}),Fs=oe({\u0275inj:oe}),so=oe({ngInjectableDef:oe}),au=oe({ngInjectorDef:oe});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let _i;function yr(s){const o=_i;return _i=s,o}function en(s,o,u){const l=gn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&gt.Optional?null:void 0!==o?o:void Ne(Ie(s))}const Xe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kr={},jn="__NG_DI_FLAG__",vs="ngTempTokenPath",Fi=/\n/gm,Us="__source";let wi;function $n(s){const o=wi;return wi=s,o}function Vs(s,o=gt.Default){if(void 0===wi)throw new ce(-203,!1);return null===wi?en(s,void 0,o):wi.get(s,o&gt.Optional?null:void 0,o)}function ln(s,o=gt.Default){return(function oo(){return _i}()||Vs)(Z(s),o)}function Ot(s,o=gt.Default){return ln(s,Ei(o))}function Ei(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function zn(s){const o=[];for(let u=0;u<s.length;u++){const l=Z(s[u]);if(Array.isArray(l)){if(0===l.length)throw new ce(900,!1);let d,p=gt.Default;for(let _=0;_<l.length;_++){const I=l[_],D=Ui(I);"number"==typeof D?-1===D?d=I.token:p|=D:d=I}o.push(ln(d,p))}else o.push(ln(l))}return o}function Ii(s,o){return s[jn]=o,s.prototype[jn]=o,s}function Ui(s){return s[jn]}function q(s){return{toString:s}.toString()}var ge=(()=>((ge=ge||{})[ge.OnPush=0]="OnPush",ge[ge.Default=1]="Default",ge))(),ee=(()=>{return(s=ee||(ee={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ee;var s})();const Je={},Ye=[],Ht=oe({\u0275cmp:oe}),tr=oe({\u0275dir:oe}),On=oe({\u0275pipe:oe}),Gn=oe({\u0275mod:oe}),Lt=oe({\u0275fac:oe}),nr=oe({__NG_ELEMENT_ID__:oe}),ts=oe({__NG_ENV_ID__:oe});function ws(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||s.charCodeAt(d+p)<=32)return d}u=d+1}}function Po(s,o,u){let l=0;for(;l<u.length;){const d=u[l];if("number"==typeof d){if(0!==d)break;l++;const p=u[l++],_=u[l++],I=u[l++];s.setAttribute(o,_,I,p)}else{const p=d,_=u[++l];te(p)?s.setProperty(o,p,_):s.setAttribute(o,p,_),l++}}return l}function de(s){return 3===s||4===s||6===s}function te(s){return 64===s.charCodeAt(0)}function Pe(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||ht(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function ht(s,o,u,l,d){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){_=-1;break}if(I>o){_=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===u){if(null===l)return void(null!==d&&(s[p+1]=d));if(l===s[p+1])return void(s[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,u),null!==l&&s.splice(p++,0,l),null!==d&&s.splice(p++,0,d)}const Tt="ng-template";function Ut(s,o,u){let l=0,d=!0;for(;l<s.length;){let p=s[l++];if("string"==typeof p&&d){const _=s[l++];if(u&&"class"===p&&-1!==ws(_.toLowerCase(),o,0))return!0}else{if(1===p){for(;l<s.length&&"string"==typeof(p=s[l++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function tn(s){return 4===s.type&&s.value!==Tt}function _r(s,o,u){return o===(4!==s.type||u?s.value:Tt)}function rr(s,o,u){let l=4;const d=s.attrs||[],p=function Vl(s){for(let o=0;o<s.length;o++)if(de(s[o]))return o;return s.length}(d);let _=!1;for(let I=0;I<o.length;I++){const D=o[I];if("number"!=typeof D){if(!_)if(4&l){if(l=2|1&l,""!==D&&!_r(s,D,u)||""===D&&1===o.length){if(ir(l))return!1;_=!0}}else{const A=8&l?D:o[++I];if(8&l&&null!==s.attrs){if(!Ut(s.attrs,A,u)){if(ir(l))return!1;_=!0}continue}const U=ua(8&l?"class":D,d,tn(s),u);if(-1===U){if(ir(l))return!1;_=!0;continue}if(""!==A){let W;W=U>p?"":d[U+1].toLowerCase();const J=8&l?W:null;if(J&&-1!==ws(J,A,0)||2&l&&A!==W){if(ir(l))return!1;_=!0}}}}else{if(!_&&!ir(l)&&!ir(D))return!1;if(_&&ir(D))continue;_=!1,l=D|1&l}}return ir(l)||_}function ir(s){return 0==(1&s)}function ua(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let p=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function Eh(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function ca(s,o,u=!1){for(let l=0;l<o.length;l++)if(rr(s,o[l],u))return!0;return!1}function fc(s,o){return s?":not("+o.trim()+")":o}function Oo(s){let o=s[0],u=1,l=2,d="",p=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&l){const I=s[++u];d+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!ir(_)&&(o+=fc(p,d),d=""),l=_,p=p||!ir(l);u++}return""!==d&&(o+=fc(p,d)),o}function Bs(s){return q(()=>{const o=gc(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===ge.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||ee.Emulated,styles:s.styles||Ye,_:null,schemas:s.schemas||null,tView:null,id:""};Ar(u);const l=s.dependencies;return u.directiveDefs=la(l,!1),u.pipeDefs=la(l,!0),u.id=function jl(s){let o=0;const u=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const d of u)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(u),u})}function bp(s){return on(s)||sr(s)}function pc(s){return null!==s}function ao(s){return q(()=>({type:s.type,bootstrap:s.bootstrap||Ye,declarations:s.declarations||Ye,imports:s.imports||Ye,exports:s.exports||Ye,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Bl(s,o){if(null==s)return Je;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=l,o&&(o[d]=p)}return u}function Sp(s){return q(()=>{const o=gc(s);return Ar(o),o})}function uo(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function on(s){return s[Ht]||null}function sr(s){return s[tr]||null}function Yr(s){return s[On]||null}function ko(s){const o=on(s)||sr(s)||Yr(s);return null!==o&&o.standalone}function wn(s,o){const u=s[Gn]||null;if(!u&&!0===o)throw new Error(`Type ${Ie(s)} does not have '\u0275mod' property.`);return u}function gc(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Ye,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Bl(s.inputs,o),outputs:Bl(s.outputs)}}function Ar(s){s.features?.forEach(o=>o(s))}function la(s,o){if(!s)return null;const u=o?Yr:bp;return()=>("function"==typeof s?s():s).map(l=>u(l)).filter(pc)}const qn=0,et=1,Rt=2,En=3,Ci=4,rs=5,Fr=6,co=7,In=8,Lo=9,da=10,Pt=11,lo=12,Di=13,ho=14,Zn=15,ii=16,ha=17,si=18,Fo=19,$l=20,Uo=21,is=22,uu=23,yc=24,Vt=25,Dh=1,cu=2,Ti=7,Th=8,Vo=9,kn=11;function oi(s){return Array.isArray(s)&&"object"==typeof s[Dh]}function Ur(s){return Array.isArray(s)&&!0===s[Dh]}function _c(s){return 0!=(4&s.flags)}function Bo(s){return s.componentOffset>-1}function Bi(s){return 1==(1&s.flags)}function Es(s){return!!s.template}function fa(s){return 0!=(512&s[Rt])}function Cs(s,o){return s.hasOwnProperty(Lt)?s[Lt]:null}let Rp=Xe.WeakRef??class ay{constructor(o){this.ref=o}deref(){return this.ref}},wc=0,ui=null,fu=!1;function An(s){const o=ui;return ui=s,o}class Np{constructor(){this.id=wc++,this.ref=function $o(s){return new Rp(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[o,u]of this.producers){const l=u.producerNode.deref();if(void 0!==l&&u.atTrackingVersion===this.trackingVersion){if(l.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(o),l?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const o=fu;fu=!0;try{for(const[u,l]of this.consumers){const d=l.consumerNode.deref();void 0!==d&&d.trackingVersion===l.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),d?.producers.delete(this.id))}}finally{fu=o}}producerAccessed(){if(fu)throw new Error("");if(null===ui)return;let o=ui.producers.get(this.id);void 0===o?(o={consumerNode:ui.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:ui.trackingVersion},ui.producers.set(this.id,o),this.consumers.set(ui.id,o)):(o.seenValueVersion=this.valueVersion,o.atTrackingVersion=ui.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==ui?.consumerAllowSignalWrites}producerPollStatus(o){return this.valueVersion!==o||(this.onProducerUpdateValueVersion(),this.valueVersion!==o)}}let mu=null;const Mp=()=>{};class Vr extends Np{constructor(o,u,l){super(),this.watch=o,this.schedule=u,this.dirty=!1,this.cleanupFn=Mp,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=l}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const o=An(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Mp,this.watch(this.registerOnCleanup)}finally{An(o)}}cleanup(){this.cleanupFn()}}class Mh{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ic(){return Xl}function Xl(s){return s.type.prototype.ngOnChanges&&(s.setInput=ed),Ph}function Ph(){const s=vu(this),o=s?.current;if(o){const u=s.previous;if(u===Je)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function ed(s,o,u,l){const d=this.declaredInputs[u],p=vu(s)||function nd(s,o){return s[td]=o}(s,{previous:Je,current:null}),_=p.current||(p.current={}),I=p.previous,D=I[d];_[d]=new Mh(D&&D.currentValue,o,I===Je),s[l]=o}Ic.ngInherit=!0;const td="__ngSimpleChanges__";function vu(s){return s[td]||null}const ji=function(s,o,u){};function yn(s){for(;Array.isArray(s);)s=s[qn];return s}function xr(s,o){return yn(o[s.index])}function po(s,o){return s.data[o]}function Qr(s,o){const u=o[s];return oi(u)?u:u[qn]}function Eu(s){return 128==(128&s[Rt])}function $i(s,o){return null==o?null:s[o]}function kp(s){s[ha]=0}function id(s){1024&s[Rt]||(s[Rt]|=1024,Lh(s,1))}function sd(s){1024&s[Rt]&&(s[Rt]&=-1025,Lh(s,-1))}function Lh(s,o){let u=s[En];if(null===u)return;u[rs]+=o;let l=u;for(u=u[En];null!==u&&(1===o&&1===l[rs]||-1===o&&0===l[rs]);)u[rs]+=o,l=u,u=u[En]}const bt={lFrame:Du(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function bc(){return bt.bindingsEnabled}function De(){return bt.lFrame.lView}function Zt(){return bt.lFrame.tView}function Br(){let s=Sc();for(;null!==s&&64===s.type;)s=s.parent;return s}function Sc(){return bt.lFrame.currentTNode}function ss(s,o){const u=bt.lFrame;u.currentTNode=s,u.isParent=o}function Hs(){return bt.lFrame.isParent}function Bh(){bt.lFrame.isParent=!1}function vr(){const s=bt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Wo(){return bt.lFrame.bindingIndex++}function ad(s,o){const u=bt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Rc(o)}function Rc(s){bt.lFrame.currentDirectiveIndex=s}function Ea(){return bt.lFrame.currentQueryIndex}function Ia(s){bt.lFrame.currentQueryIndex=s}function Cu(s){const o=s[et];return 2===o.type?o.declTNode:1===o.type?s[Fr]:null}function Nc(s,o,u){if(u&gt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&gt.Host||(d=Cu(p),null===d||(p=p[ho],10&d.type))););if(null===d)return!1;o=d,s=p}const l=bt.lFrame=cd();return l.currentTNode=o,l.lView=s,!0}function ud(s){const o=cd(),u=s[et];bt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function cd(){const s=bt.lFrame,o=null===s?null:s.child;return null===o?Du(s):o}function Du(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Tu(){const s=bt.lFrame;return bt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const bu=Tu;function Hi(){const s=Tu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Nr(){return bt.lFrame.selectedIndex}function qo(s){bt.lFrame.selectedIndex=s}function dn(){const s=bt.lFrame;return po(s.tView,s.selectedIndex)}let Ca=!0;function Mc(){return Ca}function zs(s){Ca=s}function Su(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:D,ngAfterViewChecked:A,ngOnDestroy:M}=p;_&&(s.contentHooks??=[]).push(-u,_),I&&((s.contentHooks??=[]).push(u,I),(s.contentCheckHooks??=[]).push(u,I)),D&&(s.viewHooks??=[]).push(-u,D),A&&((s.viewHooks??=[]).push(u,A),(s.viewCheckHooks??=[]).push(u,A)),null!=M&&(s.destroyHooks??=[]).push(u,M)}}function ld(s,o,u){dd(s,o,3,u)}function Da(s,o,u,l){(3&s[Rt])===u&&dd(s,o,u,l)}function Pc(s,o){let u=s[Rt];(3&u)===o&&(u&=4095,u+=1,s[Rt]=u)}function dd(s,o,u,l){const p=l??-1,_=o.length-1;let I=0;for(let D=void 0!==l?65535&s[ha]:0;D<_;D++)if("number"==typeof o[D+1]){if(I=o[D],null!=l&&I>=l)break}else o[D]<0&&(s[ha]+=65536),(I<p||-1==p)&&(hd(s,u,o,D),s[ha]=(4294901760&s[ha])+D+2),D++}function Gp(s,o){ji(4,s,o);const u=An(null);try{o.call(s)}finally{An(u),ji(5,s,o)}}function hd(s,o,u,l){const d=u[l]<0,p=u[l+1],I=s[d?-u[l]:u[l]];d?s[Rt]>>12<s[ha]>>16&&(3&s[Rt])===o&&(s[Rt]+=4096,Gp(I,p)):Gp(I,p)}const Au=-1;class Ta{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function mt(s){return s!==Au}function Ai(s){return 32767&s}function ba(s,o){let u=function xi(s){return s>>16}(s),l=o;for(;u>0;)l=l[ho],u--;return l}let Gs=!0;function Ts(s){const o=Gs;return Gs=s,o}const gd=255,md=5;let Ws=0;const lt={};function Ri(s,o){const u=_d(s,o);if(-1!==u)return u;const l=o[et];l.firstCreatePass&&(s.injectorIndex=o.length,Nu(l.data,s),Nu(o,null),Nu(l.blueprint,null));const d=ar(s,o),p=s.injectorIndex;if(mt(d)){const _=Ai(d),I=ba(d,o),D=I[et].data;for(let A=0;A<8;A++)o[p+A]=I[_+A]|D[_+A]}return o[p+8]=d,p}function Nu(s,o){s.push(0,0,0,0,0,0,0,0,o)}function _d(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ar(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){if(l=Lu(d),null===l)return Au;if(u++,d=d[ho],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return Au}function Mu(s,o,u){!function yd(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(nr)&&(l=u[nr]),null==l&&(l=u[nr]=Ws++);const d=l&gd;o.data[s+(d>>md)]|=1<<d}(s,o,u)}function Oc(s,o,u){if(u&gt.Optional||void 0!==s)return s;Ne()}function Pu(s,o,u,l){if(u&gt.Optional&&void 0===l&&(l=null),!(u&(gt.Self|gt.Host))){const d=s[Lo],p=yr(void 0);try{return d?d.get(o,l,u&gt.Optional):en(o,l,u&gt.Optional)}finally{yr(p)}}return Oc(l,0,u)}function kc(s,o,u,l=gt.Default,d){if(null!==s){if(2048&o[Rt]&&!(l&gt.Self)){const _=function vd(s,o,u,l,d){let p=s,_=o;for(;null!==p&&null!==_&&2048&_[Rt]&&!(512&_[Rt]);){const I=_o(p,_,u,l|gt.Self,lt);if(I!==lt)return I;let D=p.parent;if(!D){const A=_[$l];if(A){const M=A.get(u,lt,l);if(M!==lt)return M}D=Lu(_),_=_[ho]}p=D}return d}(s,o,u,l,lt);if(_!==lt)return _}const p=_o(s,o,u,l,lt);if(p!==lt)return p}return Pu(o,u,l,d)}function _o(s,o,u,l,d){const p=function Ou(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(nr)?s[nr]:void 0;return"number"==typeof o?o>=0?o&gd:vo:o}(u);if("function"==typeof p){if(!Nc(o,s,l))return l&gt.Host?Oc(d,0,l):Pu(o,u,l,d);try{const _=p(l);if(null!=_||l&gt.Optional)return _;Ne()}finally{bu()}}else if("number"==typeof p){let _=null,I=_d(s,o),D=Au,A=l&gt.Host?o[Zn][Fr]:null;for((-1===I||l&gt.SkipSelf)&&(D=-1===I?ar(s,o):o[I+8],D!==Au&&Wp(l,!1)?(_=o[et],I=Ai(D),o=ba(D,o)):I=-1);-1!==I;){const M=o[et];if(Fc(p,I,M.data)){const U=Lc(I,o,u,_,l,A);if(U!==lt)return U}D=o[I+8],D!==Au&&Wp(l,o[et].data[I+8]===A)&&Fc(p,I,o)?(_=M,I=Ai(D),o=ba(D,o)):I=-1}}return d}function Lc(s,o,u,l,d,p){const _=o[et],I=_.data[s+8],M=Sa(I,_,u,null==l?Bo(I)&&Gs:l!=_&&0!=(3&I.type),d&gt.Host&&p===I);return null!==M?bs(o,_,M,I):lt}function Sa(s,o,u,l,d){const p=s.providerIndexes,_=o.data,I=1048575&p,D=s.directiveStart,M=p>>20,W=d?I+M:s.directiveEnd;for(let J=l?I:I+M;J<W;J++){const ve=_[J];if(J<D&&u===ve||J>=D&&ve.type===u)return J}if(d){const J=_[D];if(J&&Es(J)&&J.type===u)return D}return null}function bs(s,o,u,l){let d=s[u];const p=o.data;if(function dy(s){return s instanceof Ta}(d)){const _=d;_.resolving&&function ke(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ce(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ze(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Oe(s)}(p[u]));const I=Ts(_.canSeeViewProviders);_.resolving=!0;const D=_.injectImpl?yr(_.injectImpl):null;Nc(s,l,gt.Default);try{d=s[u]=_.factory(void 0,p,s,l),o.firstCreatePass&&u>=l.directiveStart&&function ly(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const _=Xl(o);(u.preOrderHooks??=[]).push(s,_),(u.preOrderCheckHooks??=[]).push(s,_)}d&&(u.preOrderHooks??=[]).push(0-s,d),p&&((u.preOrderHooks??=[]).push(s,p),(u.preOrderCheckHooks??=[]).push(s,p))}(u,p[u],o)}finally{null!==D&&yr(D),Ts(I),_.resolving=!1,bu()}}return d}function Fc(s,o,u){return!!(u[o+(s>>md)]&1<<s)}function Wp(s,o){return!(s&gt.Self||s&gt.Host&&o)}class Gi{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return kc(this._tNode,this._lView,o,Ei(l),u)}}function vo(){return new Gi(Br(),De())}function ku(s){return q(()=>{const o=s.prototype.constructor,u=o[Lt]||ur(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const p=d[Lt]||ur(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function ur(s){return je(s)?()=>{const o=ur(Z(s));return o&&o()}:Cs(s)}function Lu(s){const o=s[et],u=o.type;return 2===u?o.declTNode:1===u?s[Fr]:null}function Kn(s){return function Hh(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const p=u[d];if(de(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(Br(),s)}const us="__parameters__";function Zo(s,o,u){return q(()=>{const l=function wo(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const _=new d(...p);return I.annotation=_,I;function I(D,A,M){const U=D.hasOwnProperty(us)?D[us]:Object.defineProperty(D,us,{value:[]})[us];for(;U.length<=M;)U.push(null);return(U[M]=U[M]||[]).push(_),D}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function Ra(s,o){s.forEach(u=>Array.isArray(u)?Ra(u,o):o(u))}function ls(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Na(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const St=Ii(Zo("Optional"),8),lr=Ii(Zo("SkipSelf"),4);function hs(s){return 128==(128&s.flags)}var $r=(()=>(($r=$r||{})[$r.Important=1]="Important",$r[$r.DashCase=2]="DashCase",$r))();const tf=/^>|^->|<!--|-->|--!>|<!-$/g,Cd=/(<|>)/,$c="\u200b$1\u200b";const Xp=new Map;let qv=0;const nf="__ngContext__";function Ni(s,o){oi(o)?(s[nf]=o[Fo],function Zv(s){Xp.set(s[Fo],s)}(o)):s[nf]=o}let bd;function rg(s,o){return bd(s,o)}function Fa(s){const o=s[En];return Ur(o)?o[En]:o}function Sd(s){return Ad(s[lo])}function Ns(s){return Ad(s[Ci])}function Ad(s){for(;null!==s&&!Ur(s);)s=s[Ci];return s}function Wc(s,o,u,l,d){if(null!=l){let p,_=!1;Ur(l)?p=l:oi(l)&&(_=!0,l=l[qn]);const I=yn(l);0===s&&null!==u?null==d?g(o,u,I):h(o,u,I,d||null,!0):1===s&&null!==u?h(o,u,I,d||null,!0):2===s?function xd(s,o,u){const l=$(s,o);l&&function S(s,o,u,l){s.removeChild(o,u,l)}(s,l,o,u)}(o,I,_):3===s&&o.destroyNode(I),null!=p&&function Sy(s,o,u,l,d){const p=u[Ti];p!==yn(u)&&Wc(o,s,l,p,d);for(let I=kn;I<u.length;I++){const D=u[I];To(D[et],D,s,o,l,p)}}(o,s,p,u,d)}}function af(s,o){return s.createComment(function Ey(s){return s.replace(tf,o=>o.replace(Cd,$c))}(o))}function dr(s,o,u){return s.createElement(o,u)}function uf(s,o){const u=s[Vo],l=u.indexOf(o);sd(o),u.splice(l,1)}function cf(s,o){if(s.length<=kn)return;const u=kn+o,l=s[u];if(l){const d=l[ii];null!==d&&d!==s&&uf(d,l),o>0&&(s[u-1][Ci]=l[Ci]);const p=Na(s,kn+o);!function ag(s,o){To(s,o,o[Pt],2,null,null),o[qn]=null,o[Fr]=null}(l[et],l);const _=p[si];null!==_&&_.detachView(p[et]),l[En]=null,l[Ci]=null,l[Rt]&=-129}return l}function lf(s,o){if(!(256&o[Rt])){const u=o[Pt];o[uu]?.destroy(),o[yc]?.destroy(),u.destroyNode&&To(s,o,u,3,null,null),function Do(s){let o=s[lo];if(!o)return Dy(s[et],s);for(;o;){let u=null;if(oi(o))u=o[lo];else{const l=o[kn];l&&(u=l)}if(!u){for(;o&&!o[Ci]&&o!==s;)oi(o)&&Dy(o[et],o),o=o[En];null===o&&(o=s),oi(o)&&Dy(o[et],o),u=o&&o[Ci]}o=u}}(o)}}function Dy(s,o){if(!(256&o[Rt])){o[Rt]&=-129,o[Rt]|=256,function sC(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof Ta)){const p=u[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const I=d[p[_]],D=p[_+1];ji(4,I,D);try{D.call(I)}finally{ji(5,I,D)}}else{ji(4,d,p);try{p.call(d)}finally{ji(5,d,p)}}}}}(s,o),function iC(s,o){const u=s.cleanup,l=o[co];if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const _=u[p+3];_>=0?l[_]():l[-_].unsubscribe(),p+=2}else u[p].call(l[u[p+1]]);null!==l&&(o[co]=null);const d=o[Uo];if(null!==d){o[Uo]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(s,o),1===o[et].type&&o[Pt].destroy();const u=o[ii];if(null!==u&&Ur(o[En])){u!==o[En]&&uf(u,o);const l=o[si];null!==l&&l.detachView(s)}!function Kv(s){Xp.delete(s[Fo])}(o)}}function Ty(s,o,u){return function v(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[qn];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:p}=s.data[l.directiveStart+d];if(p===ee.None||p===ee.Emulated)return null}return xr(l,u)}}(s,o.parent,u)}function h(s,o,u,l,d){s.insertBefore(o,u,l,d)}function g(s,o,u){s.appendChild(o,u)}function w(s,o,u,l,d){null!==l?h(s,o,u,l,d):g(s,o,u)}function $(s,o){return s.parentNode(o)}let ot,Jv,Ny,st=function He(s,o,u){return 40&s.type?xr(s,u):null};function Zi(s,o,u,l){const d=Ty(s,l,o),p=o[Pt],I=function Re(s,o,u){return st(s,o,u)}(l.parent||o[Fr],l,o);if(null!=d)if(Array.isArray(u))for(let D=0;D<u.length;D++)w(p,d,u[D],I,!1);else w(p,d,u,I,!1);void 0!==ot&&ot(p,l,o,u,d)}function Ua(s,o){if(null!==o){const u=o.type;if(3&u)return xr(o,s);if(4&u)return Qo(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return Ua(s,l);{const d=s[o.index];return Ur(d)?Qo(-1,d):yn(d)}}if(32&u)return rg(o,s)()||yn(s[o.index]);{const l=Va(s,o);return null!==l?Array.isArray(l)?l[0]:Ua(Fa(s[Zn]),l):Ua(s,o.next)}}return null}function Va(s,o){return null!==o?s[Zn][Fr].projection[o.projection]:null}function Qo(s,o){const u=kn+s+1;if(u<o.length){const l=o[u],d=l[et].firstChild;if(null!==d)return Ua(l,d)}return o[Ti]}function Jo(s,o,u,l,d,p,_){for(;null!=u;){const I=l[u.index],D=u.type;if(_&&0===o&&(I&&Ni(yn(I),l),u.flags|=2),32!=(32&u.flags))if(8&D)Jo(s,o,u.child,l,d,p,!1),Wc(o,s,d,I,p);else if(32&D){const A=rg(u,l);let M;for(;M=A();)Wc(o,s,d,M,p);Wc(o,s,d,I,p)}else 16&D?df(s,o,l,u,d,p):Wc(o,s,d,I,p);u=_?u.projectionNext:u.next}}function To(s,o,u,l,d,p){Jo(u,l,s.firstChild,o,d,p,!1)}function df(s,o,u,l,d,p){const _=u[Zn],D=_[Fr].projection[l.projection];if(Array.isArray(D))for(let A=0;A<D.length;A++)Wc(o,s,d,D[A],p);else{let A=D;const M=_[En];hs(l)&&(A.flags|=128),Jo(s,o,A,M,d,p,!0)}}function Ay(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function xS(s,o,u){const{mergedAttrs:l,classes:d,styles:p}=u;null!==l&&Po(s,o,l),null!==d&&Ay(s,o,d),null!==p&&function hg(s,o,u){s.setAttribute(o,"style",u)}(s,o,p)}function MS(s){Jv=s}function aC(s){return function Xv(){if(void 0===Ny&&(Ny=null,Xe.trustedTypes))try{Ny=Xe.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Ny}()?.createScriptURL(s)||s}class pg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vt})`}}function Zc(s){return s instanceof pg?s.changingThisBreaksApplicationSecurity:s}function Rd(s,o){const u=function kS(s){return s instanceof pg&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${vt})`)}return u===o}const VS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var zr=(()=>((zr=zr||{})[zr.NONE=0]="NONE",zr[zr.HTML=1]="HTML",zr[zr.STYLE=2]="STYLE",zr[zr.SCRIPT=3]="SCRIPT",zr[zr.URL=4]="URL",zr[zr.RESOURCE_URL=5]="RESOURCE_URL",zr))();function gf(s){const o=Ki();return o?o.sanitize(zr.URL,s)||"":Rd(s,"URL")?Zc(s):function tw(s){return(s=String(s)).match(VS)?s:"unsafe:"+s}(Oe(s))}function fC(s){const o=Ki();if(o)return aC(o.sanitize(zr.RESOURCE_URL,s)||"");if(Rd(s,"ResourceURL"))return aC(Zc(s));throw new ce(904,!1)}function gC(s,o,u){return function qS(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?fC:gf}(o,u)(s)}function Ki(){const s=De();return s&&s[da].sanitizer}class hn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Nt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Gu=new hn("ENVIRONMENT_INITIALIZER"),mC=new hn("INJECTOR",-1),yC=new hn("INJECTOR_DEF_TYPES");class lw{get(o,u=Kr){if(u===Kr){const l=new Error(`NullInjectorError: No provider for ${Ie(o)}!`);throw l.name="NullInjectorError",l}return u}}function _M(...s){return{\u0275providers:_C(0,s),\u0275fromNgModule:!0}}function _C(s,...o){const u=[],l=new Set;let d;return Ra(o,p=>{const _=p;ky(_,u,[],l)&&(d||=[],d.push(_))}),void 0!==d&&Oy(d,u),u}function Oy(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];Ly(d,p=>{o.push(p)})}}function ky(s,o,u,l){if(!(s=Z(s)))return!1;let d=null,p=yi(s);const _=!p&&on(s);if(p||_){if(_&&!_.standalone)return!1;d=s}else{const D=s.ngModule;if(p=yi(D),!p)return!1;d=D}const I=l.has(d);if(_){if(I)return!1;if(l.add(d),_.dependencies){const D="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const A of D)ky(A,o,u,l)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let A;l.add(d);try{Ra(p.imports,M=>{ky(M,o,u,l)&&(A||=[],A.push(M))})}finally{}void 0!==A&&Oy(A,o)}if(!I){const A=Cs(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:Ye},{provide:yC,useValue:d,multi:!0},{provide:Gu,useValue:()=>ln(d),multi:!0})}const D=p.providers;null==D||I||Ly(D,M=>{o.push(M)})}}return d!==s&&void 0!==s.providers}function Ly(s,o){for(let u of s)Te(u)&&(u=u.\u0275providers),Array.isArray(u)?Ly(u,o):o(u)}const Wu=oe({provide:String,useValue:oe});function dw(s){return null!==s&&"object"==typeof s&&Wu in s}function mf(s){return"function"==typeof s}const Fy=new hn("Set Injector scope."),yf={},QS={};let hw;function fw(){return void 0===hw&&(hw=new lw),hw}class Kc{}class pw extends Kc{get destroyed(){return this._destroyed}constructor(o,u,l,d){super(),this.parent=u,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uy(o,_=>this.processProvider(_)),this.records.set(mC,mg(void 0,this)),d.has("environment")&&this.records.set(Kc,mg(void 0,this));const p=this.records.get(Fy);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(yC.multi,Ye,gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const u=$n(this),l=yr(void 0);try{return o()}finally{$n(u),yr(l)}}get(o,u=Kr,l=gt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(ts))return o[ts](this);l=Ei(l);const d=$n(this),p=yr(void 0);try{if(!(l&gt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const D=function XS(s){return"function"==typeof s||"object"==typeof s&&s instanceof hn}(o)&&gn(o);I=D&&this.injectableDefInScope(D)?mg(wC(o),yf):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(l&gt.Self?fw():this.parent).get(o,u=l&gt.Optional&&u===Kr?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[vs]=_[vs]||[]).unshift(Ie(o)),d)throw _;return function j(s,o,u,l){const d=s[vs];throw o[Us]&&d.unshift(o[Us]),s.message=function V(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=Ie(o);if(Array.isArray(o))d=o.map(Ie).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let I=o[_];p.push(_+":"+("string"==typeof I?JSON.stringify(I):Ie(I)))}d=`{${p.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace(Fi,"\n  ")}`}("\n"+s.message,d,u,l),s.ngTokenPath=d,s[vs]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{yr(p),$n(d)}}resolveInjectorInitializers(){const o=$n(this),u=yr(void 0);try{const l=this.get(Gu.multi,Ye,gt.Self);for(const d of l)d()}finally{$n(o),yr(u)}}toString(){const o=[],u=this.records;for(const l of u.keys())o.push(Ie(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(o){let u=mf(o=Z(o))?o:Z(o&&o.provide);const l=function wM(s){return dw(s)?mg(void 0,s.useValue):mg(function EC(s,o,u){let l;if(mf(s)){const d=Z(s);return Cs(d)||wC(d)}if(dw(s))l=()=>Z(s.useValue);else if(function YS(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...zn(s.deps||[]));else if(function KS(s){return!(!s||!s.useExisting)}(s))l=()=>ln(Z(s.useExisting));else{const d=Z(s&&(s.useClass||s.provide));if(!function IC(s){return!!s.deps}(s))return Cs(d)||wC(d);l=()=>new d(...zn(s.deps))}return l}(s),yf)}(o);if(mf(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=mg(void 0,yf,!0),d.factory=()=>zn(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,l)}hydrate(o,u){return u.value===yf&&(u.value=QS,u.value=u.factory()),"object"==typeof u.value&&u.value&&function JS(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Z(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(o){const u=this._onDestroyHooks.indexOf(o);-1!==u&&this._onDestroyHooks.splice(u,1)}}function wC(s){const o=gn(s),u=null!==o?o.factory:Cs(s);if(null!==u)return u;if(s instanceof hn)throw new ce(204,!1);if(s instanceof Function)return function vM(s){const o=s.length;if(o>0)throw function Wi(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}(o,"?"),new ce(204,!1);const u=function mr(s){return s&&(s[Sn]||s[so])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ce(204,!1)}function mg(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Uy(s,o){for(const u of s)Array.isArray(u)?Uy(u,o):u&&Te(u)?Uy(u.\u0275providers,o):o(u)}const CC=new hn("AppId",{providedIn:"root",factory:()=>eA}),eA="ng",DC=new hn("Platform Initializer"),gw=new hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),nA=new hn("CSP nonce",{providedIn:"root",factory:()=>function fg(){if(void 0!==Jv)return Jv;if(typeof document<"u")return document;throw new ce(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Ba=(s,o)=>null;function SC(s,o){return Ba(s,o)}class Yi{}class vg{}class xC{resolveComponentFactory(o){throw function li(s){const o=Error(`No component factory found for ${Ie(s)}.`);return o.ngComponent=s,o}(o)}}let wf=(()=>{class s{}return s.NULL=new xC,s})();function RC(){return Pr(Br(),De())}function Pr(s,o){return new wg(xr(s,o))}let wg=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=RC,s})();function Eg(s){return s instanceof wg?s.nativeElement:s}class Ig{}let ja=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Cw(){const s=De(),u=Qr(Br().index,s);return(oi(u)?u:s)[Pt]}(),s})(),iA=(()=>{class s{}return s.\u0275prov=Nt({token:s,providedIn:"root",factory:()=>null}),s})();class NC{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Pd=new NC("16.0.3"),$y={};function Od(s){for(;s;){s[Rt]|=64;const o=Fa(s);if(fa(s)&&!o)return s;s=o}return null}function Hy(s){return s.ngOriginalError}class Yc{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Hy(o);for(;u&&Hy(u);)u=Hy(u);return u||null}}const Gy=new hn("",{providedIn:"root",factory:()=>!1});function So(s){return s instanceof Function?s():s}class Zy extends Np{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(o){this._lView=o}onConsumerDependencyMayHaveChanged(){Od(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(o,u,l){const d=An(this);this.trackingVersion++;try{o(u,l)}finally{An(d)}}destroy(){this.trackingVersion++}}let Cf=null;function bw(){return Cf??=new Zy,Cf}function Sw(s,o){return s[o]??bw()}function LC(s,o){const u=bw();u.hasReadASignal&&(s[o]=Cf,u.lView=s,Cf=new Zy)}const Bt={};function Aw(s){Ky(Zt(),De(),Nr()+s,!1)}function Ky(s,o,u,l){if(!l)if(3==(3&o[Rt])){const p=s.preOrderCheckHooks;null!==p&&ld(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Da(o,p,0,u)}qo(u)}function FC(s,o=null,u=null,l){const d=Mw(s,o,u,l);return d.resolveInjectorInitializers(),d}function Mw(s,o=null,u=null,l,d=new Set){const p=[u||Ye,_M(s)];return l=l||("object"==typeof s?void 0:Ie(s)),new pw(p,o||fw(),l||null,d)}let Qc=(()=>{class s{static create(u,l){if(Array.isArray(u))return FC({name:""},l,u,"");{const d=u.name??"";return FC({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=Kr,s.NULL=new lw,s.\u0275prov=Nt({token:s,providedIn:"any",factory:()=>ln(mC)}),s.__NG_ELEMENT_ID__=-1,s})();function Df(s,o=gt.Default){const u=De();return null===u?ln(s,o):kc(Br(),u,Z(s),o)}function UC(){throw new Error("invalid")}function Jc(s,o,u,l,d,p,_,I,D,A,M){const U=o.blueprint.slice();return U[qn]=d,U[Rt]=140|l,(null!==A||s&&2048&s[Rt])&&(U[Rt]|=2048),kp(U),U[En]=U[ho]=s,U[In]=u,U[da]=_||s&&s[da],U[Pt]=I||s&&s[Pt],U[Lo]=D||s&&s[Lo]||null,U[Fr]=p,U[Fo]=function Iy(){return qv++}(),U[is]=M,U[$l]=A,U[Zn]=2==o.type?s[Zn]:U,U}function Xc(s,o,u,l,d){let p=s.data[o];if(null===p)p=function Qy(s,o,u,l,d){const p=Sc(),_=Hs(),D=s.data[o]=function pA(s,o,u,l,d,p){let _=o?o.injectorIndex:-1,I=0;return function go(){return null!==bt.skipHydrationRootTNode}()&&(I|=128),{type:u,index:l,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=D),null!==p&&(_?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D,D.prev=p)),D}(s,o,u,l,d),function Bp(){return bt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=u,p.value=l,p.attrs=d;const _=function zo(){const s=bt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ss(p,!0),p}function Ag(s,o,u,l){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function xg(s,o,u,l,d){const p=Sw(o,uu),_=Nr(),I=2&l;try{if(qo(-1),I&&o.length>Vt&&Ky(s,o,Vt,!1),ji(I?2:0,d),I)p.runInContext(u,l,d);else{const A=An(null);try{u(l,d)}finally{An(A)}}}finally{I&&null===o[uu]&&LC(o,uu),qo(_),ji(I?3:1,d)}}function Rg(s,o,u){if(_c(o)){const l=An(null);try{const p=o.directiveEnd;for(let _=o.directiveStart;_<p;_++){const I=s.data[_];I.contentQueries&&I.contentQueries(1,u[_],_)}}finally{An(l)}}}function Ng(s,o,u){bc()&&(function Pw(s,o,u,l){const d=u.directiveStart,p=u.directiveEnd;Bo(u)&&function ZC(s,o,u){const l=xr(o,s),_=s_(s,Jc(s,VC(u),null,u.onPush?64:16,l,o,null,s[da].rendererFactory.createRenderer(l,u),null,null,null));s[o.index]=_}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||Ri(u,o),Ni(l,o);const _=u.initialInputs;for(let I=d;I<p;I++){const D=s.data[I],A=bs(o,s,I,u);Ni(A,o),null!==_&&r_(0,I-d,A,D,0,_),Es(D)&&(Qr(u.index,o)[In]=bs(o,s,I,u))}}(s,o,u,xr(u,o)),64==(64&u.flags)&&Ow(s,o,u))}function Jy(s,o,u=xr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],I=-1===_?u(o,s):s[_];s[d++]=I}}}function VC(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=kd(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function kd(s,o,u,l,d,p,_,I,D,A,M){const U=Vt+l,W=U+d,J=function BC(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:Bt);return u}(U,W),ve="function"==typeof A?A():A;return J[et]={type:s,blueprint:J,template:u,queries:null,viewQuery:I,declTNode:o,data:J.slice().fill(null,U),bindingStartIndex:U,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:D,consts:ve,incompleteFirstPass:!1,ssrId:M}}let Mg=s=>null;function HC(s,o,u,l){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const p=s[d];null===l?el(u,o,d,p):l.hasOwnProperty(d)&&el(u,o,l[d],p)}return u}function el(s,o,u,l){s.hasOwnProperty(u)?s[u].push(o,l):s[u]=[o,l]}function Ms(s,o,u,l,d,p,_,I){const D=xr(o,u);let M,A=o.inputs;!I&&null!=A&&(M=A[l])?(Vw(s,u,M,l,d),Bo(o)&&function Pg(s,o){const u=Qr(o,s);16&u[Rt]||(u[Rt]|=64)}(u,o.index)):3&o.type&&(l=function Xy(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=_?_(d,o.value||"",l):d,p.setProperty(D,l,d))}function e_(s,o,u,l){if(bc()){const d=null===l?null:{"":-1},p=function Og(s,o){const u=s.directiveRegistry;let l=null,d=null;if(u)for(let p=0;p<u.length;p++){const _=u[p];if(ca(o,_.selectors,!1))if(l||(l=[]),Es(_))if(null!==_.findHostDirectiveDefs){const I=[];d=d||new Map,_.findHostDirectiveDefs(_,I,d),l.unshift(...I,_),kg(s,o,I.length)}else l.unshift(_),kg(s,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,l,d),l.push(_)}return null===l?null:[l,d]}(s,u);let _,I;null===p?_=I=null:[_,I]=p,null!==_&&bf(s,o,u,_,d,I),d&&function kw(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new ce(-301,!1);l.push(o[d],p)}}}(u,l,d)}u.mergedAttrs=Pe(u.mergedAttrs,u.attrs)}function bf(s,o,u,l,d,p){for(let A=0;A<l.length;A++)Mu(Ri(u,o),s,l[A].type);!function n_(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,l.length);for(let A=0;A<l.length;A++){const M=l[A];M.providersResolver&&M.providersResolver(M)}let _=!1,I=!1,D=Ag(s,o,l.length,null);for(let A=0;A<l.length;A++){const M=l[A];u.mergedAttrs=Pe(u.mergedAttrs,M.hostAttrs),Lg(s,u,o,D,M),Lw(D,M,d),null!==M.contentQueries&&(u.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(u.flags|=64);const U=M.type.prototype;!_&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks??=[]).push(u.index),_=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(u.index),I=!0),D++}!function zC(s,o,u){const d=o.directiveEnd,p=s.data,_=o.attrs,I=[];let D=null,A=null;for(let M=o.directiveStart;M<d;M++){const U=p[M],W=u?u.get(U):null,ve=W?W.outputs:null;D=HC(U.inputs,M,D,W?W.inputs:null),A=HC(U.outputs,M,A,ve);const Fe=null===D||null===_||tn(o)?null:KC(D,M,_);I.push(Fe)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=8),D.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=D,o.outputs=A}(s,u,p)}function Ow(s,o,u){const l=u.directiveStart,d=u.directiveEnd,p=u.index,_=function or(){return bt.lFrame.currentDirectiveIndex}();try{qo(p);for(let I=l;I<d;I++){const D=s.data[I],A=o[I];Rc(I),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&qC(D,A)}}finally{qo(-1),Rc(_)}}function qC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function kg(s,o,u){o.componentOffset=u,(s.components??=[]).push(o.index)}function Lw(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;Es(o)&&(u[""]=s)}}function Lg(s,o,u,l,d){s.data[l]=d;const p=d.factory||(d.factory=Cs(d.type)),_=new Ta(p,Es(d),Df);s.blueprint[l]=_,u[l]=_,function t_(s,o,u,l,d){const p=d.hostBindings;if(p){let _=s.hostBindingOpCodes;null===_&&(_=s.hostBindingOpCodes=[]);const I=~o.index;(function WC(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(_)!=I&&_.push(I),_.push(u,l,p)}}(s,o,l,Ag(s,u,d.hostVars,Bt),d)}function $a(s,o,u,l,d,p){const _=xr(s,o);!function Fg(s,o,u,l,d,p,_){if(null==p)s.removeAttribute(o,d,u);else{const I=null==_?Oe(p):_(p,l||"",d);s.setAttribute(o,d,I,u)}}(o[Pt],_,p,s.value,u,l,d)}function r_(s,o,u,l,d,p){const _=p[o];if(null!==_)for(let I=0;I<_.length;)i_(l,u,_[I++],_[I++],_[I++])}function i_(s,o,u,l,d){const p=An(null);try{null!==s.setInput?s.setInput(o,d,u,l):o[l]=d}finally{An(p)}}function KC(s,o,u){let l=null,d=0;for(;d<u.length;){const p=u[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===l&&(l=[]);const _=s[p];for(let I=0;I<_.length;I+=2)if(_[I]===o){l.push(p,_[I+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function Fw(s,o,u,l){return[s,!0,!1,o,null,0,l,u,null,null,null]}function Uw(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const p=u[l+1];if(-1!==p){const _=s.data[p];Ia(u[l]),_.contentQueries(2,o[p],p)}}}function s_(s,o){return s[lo]?s[Di][Ci]=o:s[lo]=o,s[Di]=o,o}function Ld(s,o,u){Ia(0);const l=An(null);try{o(s,u)}finally{An(l)}}function Ug(s){return s[co]||(s[co]=[])}function Sf(s){return s.cleanup||(s.cleanup=[])}function o_(s,o){const u=s[Lo],l=u?u.get(Yc,null):null;l&&l.handleError(o)}function Vw(s,o,u,l,d){for(let p=0;p<u.length;){const _=u[p++],I=u[p++];i_(s.data[_],o[_],l,I,d)}}function Zu(s,o,u){const l=function Cc(s,o){return yn(o[s])}(o,s);!function og(s,o,u){s.setValue(o,u)}(s[Pt],l,u)}function YC(s,o){const u=Qr(o,s),l=u[et];!function QC(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])}(l,u);const d=u[qn];null!==d&&null===u[is]&&(u[is]=SC(d,u[Lo])),Bw(l,u,u[In])}function Bw(s,o,u){ud(o);try{const l=s.viewQuery;null!==l&&Ld(1,l,u);const d=s.template;null!==d&&xg(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Uw(s,o),s.staticViewQueries&&Ld(2,s.viewQuery,u);const p=s.components;null!==p&&function Fd(s,o){for(let u=0;u<o.length;u++)YC(s,o[u])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[Rt]&=-5,Hi()}}let $w=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(u,l,d){const p=typeof Zone>"u"?null:Zone.current,_=new Vr(u,A=>{this.all.has(A)&&this.queue.set(A,p)},d);let I;this.all.add(_),_.notify();const D=()=>{_.cleanup(),I?.(),this.all.delete(_),this.queue.delete(_)};return I=l?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[u,l]of this.queue)this.queue.delete(u),l?l.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=Nt({token:s,providedIn:"root",factory:()=>new s}),s})();function Ud(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const I=o[_];"number"==typeof I?p=I:1==p?d=he(d,I):2==p&&(l=he(l,I+": "+o[++_]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}function Yu(s,o,u,l,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&l.push(yn(p)),Ur(p)){for(let I=kn;I<p.length;I++){const D=p[I],A=D[et].firstChild;null!==A&&Yu(D[et],D,A,l)}p[Ti]!==p[qn]&&l.push(p[Ti])}const _=u.type;if(8&_)Yu(s,o,u.child,l);else if(32&_){const I=rg(u,o);let D;for(;D=I();)l.push(D)}else if(16&_){const I=Va(o,u);if(Array.isArray(I))l.push(...I);else{const D=Fa(o[Zn]);Yu(D[et],D,I,l,!0)}}u=d?u.projectionNext:u.next}return l}function nl(s,o,u,l=!0){const d=o[da].rendererFactory;d.begin&&d.begin();try{u_(s,o,s.template,u)}catch(_){throw l&&o_(o,_),_}finally{d.end&&d.end(),o[da].effectManager?.flush()}}function u_(s,o,u,l){const d=o[Rt];if(256!=(256&d)){o[da].effectManager?.flush(),ud(o);try{kp(o),function xn(s){return bt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&xg(s,o,u,2,l);const _=3==(3&d);if(_){const A=s.preOrderCheckHooks;null!==A&&ld(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Da(o,A,0,null),Pc(o,0)}if(function yA(s){for(let o=Sd(s);null!==o;o=Ns(o)){if(!o[cu])continue;const u=o[Vo];for(let l=0;l<u.length;l++){id(u[l])}}}(o),function mA(s){for(let o=Sd(s);null!==o;o=Ns(o))for(let u=kn;u<o.length;u++){const l=o[u],d=l[et];Eu(l)&&u_(d,l,d.template,l[In])}}(o),null!==s.contentQueries&&Uw(s,o),_){const A=s.contentCheckHooks;null!==A&&ld(o,A)}else{const A=s.contentHooks;null!==A&&Da(o,A,1),Pc(o,1)}!function Sg(s,o){const u=s.hostBindingOpCodes;if(null===u)return;const l=Sw(o,yc);try{for(let d=0;d<u.length;d++){const p=u[d];if(p<0)qo(~p);else{const _=p,I=u[++d],D=u[++d];ad(I,_),l.runInContext(D,2,o[_])}}}finally{null===o[yc]&&LC(o,yc),qo(-1)}}(s,o);const I=s.components;null!==I&&function rl(s,o){for(let u=0;u<o.length;u++)_A(s,o[u])}(o,I);const D=s.viewQuery;if(null!==D&&Ld(2,D,l),_){const A=s.viewCheckHooks;null!==A&&ld(o,A)}else{const A=s.viewHooks;null!==A&&Da(o,A,2),Pc(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Rt]&=-73,sd(o)}finally{Hi()}}}function _A(s,o){const u=Qr(o,s);if(Eu(u)){const l=u[et];80&u[Rt]?u_(l,u,l.template,u[In]):u[rs]>0&&Vd(u)}}function Vd(s){for(let l=Sd(s);null!==l;l=Ns(l))for(let d=kn;d<l.length;d++){const p=l[d];if(Eu(p))if(1024&p[Rt]){const _=p[et];u_(_,p,_.template,p[In])}else p[rs]>0&&Vd(p)}const u=s[et].components;if(null!==u)for(let l=0;l<u.length;l++){const d=Qr(u[l],s);Eu(d)&&d[rs]>0&&Vd(d)}}class Af{get rootNodes(){const o=this._lView,u=o[et];return Yu(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[In]}set context(o){this._lView[In]=o}get destroyed(){return 256==(256&this._lView[Rt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[En];if(Ur(o)){const u=o[Th],l=u?u.indexOf(this):-1;l>-1&&(cf(o,l),Na(u,l))}this._attachedToViewContainer=!1}lf(this._lView[et],this._lView)}onDestroy(o){!function od(s,o){if(256==(256&s[Rt]))throw new ce(911,!1);null===s[Uo]&&(s[Uo]=[]),s[Uo].push(o)}(this._lView,o)}markForCheck(){Od(this._cdRefInjectingView||this._lView)}detach(){this._lView[Rt]&=-129}reattach(){this._lView[Rt]|=128}detectChanges(){nl(this._lView[et],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cg(s,o){To(s,o,o[Pt],2,null,null)}(this._lView[et],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=o}}class XC extends Af{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;nl(o[et],o,o[In],!1)}checkNoChanges(){}get context(){return null}}class Hw extends wf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=on(o);return new xf(u,this.ngModule)}}function Bd(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class wA{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,l){l=Ei(l);const d=this.injector.get(o,$y,l);return d!==$y||u===$y?d:this.parentInjector.get(o,u,l)}}class xf extends vg{get inputs(){return Bd(this.componentDef.inputs)}get outputs(){return Bd(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Ih(s){return s.map(Oo).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,l,d){let p=(d=d||this.ngModule)instanceof Kc?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new wA(o,p):o,I=_.get(Ig,null);if(null===I)throw new ce(407,!1);const M={rendererFactory:I,sanitizer:_.get(iA,null),effectManager:_.get($w,null)},U=I.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",J=l?function jC(s,o,u,l){const p=l.get(Gy,!1)||u===ee.ShadowDom,_=s.selectRootElement(o,p);return function $C(s){Mg(s)}(_),_}(U,l,this.componentDef.encapsulation,_):dr(U,W,function vA(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(W)),ve=this.componentDef.onPush?576:528,Fe=kd(0,null,null,1,0,null,null,null,null,null,null),Ge=Jc(null,Fe,null,ve,null,null,M,U,_,null,null);let pt,be;ud(Ge);try{const xt=this.componentDef;let Kt,fn=null;xt.findHostDirectiveDefs?(Kt=[],fn=new Map,xt.findHostDirectiveDefs(xt,Kt,fn),Kt.push(xt)):Kt=[xt];const ia=function eD(s,o){const u=s[et],l=Vt;return s[l]=o,Xc(u,l,2,"#host",null)}(Ge,J),dI=function zw(s,o,u,l,d,p,_){const I=d[et];!function Gw(s,o,u,l){for(const d of s)o.mergedAttrs=Pe(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Ud(o,o.mergedAttrs,!0),null!==u&&xS(l,u,o))}(l,s,o,_);let D=null;null!==o&&(D=SC(o,d[Lo]));const A=p.rendererFactory.createRenderer(o,u),M=Jc(d,VC(u),null,u.onPush?64:16,d[s.index],s,p,A,null,null,D);return I.firstCreatePass&&kg(I,s,l.length-1),s_(d,M),d[s.index]=M}(ia,J,xt,Kt,Ge,M,U);be=po(Fe,Vt),J&&function nD(s,o,u,l){if(l)Po(s,u,["ng-version",Pd.full]);else{const{attrs:d,classes:p}=function Wn(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++l]):8===d&&u.push(p);else{if(!ir(d))break;d=p}l++}return{attrs:o,classes:u}}(o.selectors[0]);d&&Po(s,u,d),p&&p.length>0&&Ay(s,u,p.join(" "))}}(U,xt,J,l),void 0!==u&&function CA(s,o,u){const l=s.projection=[];for(let d=0;d<o.length;d++){const p=u[d];l.push(null!=p?Array.from(p):null)}}(be,this.ngContentSelectors,u),pt=function tD(s,o,u,l,d,p){const _=Br(),I=d[et],D=xr(_,d);bf(I,d,_,u,null,l);for(let M=0;M<u.length;M++)Ni(bs(d,I,_.directiveStart+M,_),d);Ow(I,d,_),D&&Ni(D,d);const A=bs(d,I,_.directiveStart+_.componentOffset,_);if(s[In]=d[In]=A,null!==p)for(const M of p)M(A,o);return Rg(I,_,s),A}(dI,xt,Kt,fn,Ge,[DA]),Bw(Fe,Ge,null)}finally{Hi()}return new EA(this.componentType,pt,Pr(be,Ge),Ge,be)}}class EA extends Yi{constructor(o,u,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new XC(d),this.componentType=o}setInput(o,u){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),u))return;const p=this._rootLView;Vw(p[et],p,d,o,u),this.previousInputValues.set(o,u),Od(Qr(this._tNode.index,p))}}get injector(){return new Gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function DA(){const s=Br();Su(De()[et],s)}function jg(s){return!!Ao(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Ao(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ha(s,o,u){return s[o]=u}function di(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Nf(s,o,u,l){const d=De();return di(d,Wo(),o)&&(Zt(),$a(dn(),d,s,o,u,l)),Nf}function Qu(s,o,u,l){return di(s,Wo(),u)?o+Oe(u)+l:Bt}function qd(s,o,u,l,d,p,_,I){const D=De(),A=Zt(),M=s+Vt,U=A.firstCreatePass?function LA(s,o,u,l,d,p,_,I,D){const A=o.consts,M=Xc(o,s,4,_||null,$i(A,I));e_(o,u,M,$i(A,D)),Su(o,M);const U=M.tView=kd(2,M,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A,null);return null!==o.queries&&(o.queries.template(o,M),U.queries=o.queries.embeddedTView(M)),M}(M,A,D,o,u,l,d,p,_):A.data[M];ss(U,!1);const W=o0(A,D,U,s);Mc()&&Zi(A,D,W,U),Ni(W,D),s_(D,D[M]=Fw(W,D,W,U)),Bi(U)&&Ng(A,D,U),null!=_&&Jy(D,U,I)}let o0=function ti(s,o,u,l){return zs(!0),o[Pt].createComment("")};function Ve(s,o,u){const l=De();return di(l,Wo(),o)&&Ms(Zt(),dn(),l,s,o,l[Pt],u,!1),Ve}function hr(s,o,u,l,d){const _=d?"class":"style";Vw(s,u,o.inputs[_],_,l)}function Ff(s,o,u,l){const d=De(),p=Zt(),_=Vt+s,I=d[Pt],D=p.firstCreatePass?function xo(s,o,u,l,d,p){const _=o.consts,D=Xc(o,s,2,l,$i(_,d));return e_(o,u,D,$i(_,p)),null!==D.attrs&&Ud(D,D.attrs,!1),null!==D.mergedAttrs&&Ud(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(_,p,d,o,u,l):p.data[_],A=dD(p,d,D,I,o,s);d[_]=A;const M=Bi(D);return ss(D,!0),xS(I,A,D),32!=(32&D.flags)&&Mc()&&Zi(p,d,A,D),0===function va(){return bt.lFrame.elementDepthCount}()&&Ni(A,d),function $s(){bt.lFrame.elementDepthCount++}(),M&&(Ng(p,d,D),Rg(p,D,d)),null!==l&&Jy(d,D),Ff}function at(){let s=Br();Hs()?Bh():(s=s.parent,ss(s,!1));const o=s;(function Fp(s){return bt.skipHydrationRootTNode===s})(o)&&function Iu(){bt.skipHydrationRootTNode=null}(),function Ho(){bt.lFrame.elementDepthCount--}();const u=Zt();return u.firstCreatePass&&(Su(u,s),_c(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function xu(s){return 0!=(8&s.flags)}(o)&&hr(u,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ru(s){return 0!=(16&s.flags)}(o)&&hr(u,o,De(),o.stylesWithoutHost,!1),at}function ft(s,o,u,l){return Ff(s,o,u,l),at(),ft}let dD=(s,o,u,l,d,p)=>(zs(!0),dr(l,d,function zp(){return bt.lFrame.currentNamespace}()));function Er(s,o,u){const l=De(),d=Zt(),p=s+Vt,_=d.firstCreatePass?function Se(s,o,u,l,d){const p=o.consts,_=$i(p,l),I=Xc(o,s,8,"ng-container",_);return null!==_&&Ud(I,_,!0),e_(o,u,I,$i(p,d)),null!==o.queries&&o.queries.elementStart(o,I),I}(p,d,l,o,u):d.data[p];ss(_,!0);const I=fD(d,l,_,s);return l[p]=I,Mc()&&Zi(d,l,I,_),Ni(I,l),Bi(_)&&(Ng(d,l,_),Rg(d,_,l)),null!=u&&Jy(l,_),Er}function Wg(){let s=Br();const o=Zt();return Hs()?Bh():(s=s.parent,ss(s,!1)),o.firstCreatePass&&(Su(o,s),_c(s)&&o.queries.elementEnd(s)),Wg}let fD=(s,o,u,l)=>(zs(!0),af(o[Pt],""));function __(s){return!!s&&"function"==typeof s.then}function pD(s){return!!s&&"function"==typeof s.subscribe}function gD(s,o,u,l){const d=De(),p=Zt(),_=Br();return function kt(s,o,u,l,d,p,_){const I=Bi(l),A=s.firstCreatePass&&Sf(s),M=o[In],U=Ug(o);let W=!0;if(3&l.type||_){const Fe=xr(l,o),Ge=_?_(Fe):Fe,pt=U.length,be=_?Kt=>_(yn(Kt[l.index])):l.index;let xt=null;if(!_&&I&&(xt=function yD(s,o,u,l){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===u&&d[p+1]===l){const I=o[co],D=d[p+2];return I.length>D?I[D]:null}"string"==typeof _&&(p+=2)}return null}(s,o,d,l.index)),null!==xt)(xt.__ngLastListenerFn__||xt).__ngNextListenerFn__=p,xt.__ngLastListenerFn__=p,W=!1;else{p=u0(l,o,M,p,!1);const Kt=u.listen(Ge,d,p);U.push(p,Kt),A&&A.push(d,be,pt,pt+1)}}else p=u0(l,o,M,p,!1);const J=l.outputs;let ve;if(W&&null!==J&&(ve=J[d])){const Fe=ve.length;if(Fe)for(let Ge=0;Ge<Fe;Ge+=2){const fn=o[ve[Ge]][ve[Ge+1]].subscribe(p),ia=U.length;U.push(p,fn),A&&A.push(d,l.index,ia,-(ia+1))}}}(p,d,d[Pt],_,s,o,l),gD}function Zd(s,o,u,l){try{return ji(6,o,u),!1!==u(l)}catch(d){return o_(s,d),!1}finally{ji(7,o,u)}}function u0(s,o,u,l,d){return function p(_){if(_===Function)return l;Od(s.componentOffset>-1?Qr(s.index,o):o);let D=Zd(o,u,l,_),A=p.__ngNextListenerFn__;for(;A;)D=Zd(o,u,A,_)&&D,A=A.__ngNextListenerFn__;return d&&!1===D&&_.preventDefault(),D}}function Fn(s=1){return function jh(s){return(bt.lFrame.contextLView=function jp(s,o){for(;s>0;)o=o[ho],s--;return o}(s,bt.lFrame.contextLView))[In]}(s)}function c0(s,o,u){return Qn(s,"",o,"",u),c0}function Qn(s,o,u,l,d){const p=De(),_=Qu(p,o,u,l);return _!==Bt&&Ms(Zt(),dn(),p,s,_,p[Pt],d,!1),Qn}function w0(s,o=""){const u=De(),l=Zt(),d=s+Vt,p=l.firstCreatePass?Xc(l,d,1,o,null):l.data[d],_=Nn(l,u,p,o,s);u[d]=_,Mc()&&Zi(l,u,_,p),ss(p,!1)}let Nn=(s,o,u,l,d)=>(zs(!0),function $u(s,o){return s.createText(o)}(o[Pt],l));function Mn(s){return Xg("",s,""),Mn}function Xg(s,o,u){const l=De(),d=Qu(l,s,o,u);return d!==Bt&&Zu(l,Nr(),d),Xg}const yl=void 0;var _l=["en",[["a","p"],["AM","PM"],yl],[["AM","PM"],yl,yl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yl,"{1} 'at' {0}",yl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Vn(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let Jd={};function vl(s){const o=function R0(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Qt(o);if(u)return u;const l=o.split("-")[0];if(u=Qt(l),u)return u;if("en"===l)return _l;throw new ce(701,!1)}function x0(s){return vl(s)[Dt.PluralCase]}function Qt(s){return s in Jd||(Jd[s]=Xe.ng&&Xe.ng.common&&Xe.ng.common.locales&&Xe.ng.common.locales[s]),Jd[s]}var Dt=(()=>((Dt=Dt||{})[Dt.LocaleId=0]="LocaleId",Dt[Dt.DayPeriodsFormat=1]="DayPeriodsFormat",Dt[Dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Dt[Dt.DaysFormat=3]="DaysFormat",Dt[Dt.DaysStandalone=4]="DaysStandalone",Dt[Dt.MonthsFormat=5]="MonthsFormat",Dt[Dt.MonthsStandalone=6]="MonthsStandalone",Dt[Dt.Eras=7]="Eras",Dt[Dt.FirstDayOfWeek=8]="FirstDayOfWeek",Dt[Dt.WeekendRange=9]="WeekendRange",Dt[Dt.DateFormat=10]="DateFormat",Dt[Dt.TimeFormat=11]="TimeFormat",Dt[Dt.DateTimeFormat=12]="DateTimeFormat",Dt[Dt.NumberSymbols=13]="NumberSymbols",Dt[Dt.NumberFormats=14]="NumberFormats",Dt[Dt.CurrencyCode=15]="CurrencyCode",Dt[Dt.CurrencySymbol=16]="CurrencySymbol",Dt[Dt.CurrencyName=17]="CurrencyName",Dt[Dt.Currencies=18]="Currencies",Dt[Dt.Directionality=19]="Directionality",Dt[Dt.PluralCase=20]="PluralCase",Dt[Dt.ExtraData=21]="ExtraData",Dt))();const wl="en-US";let FD=wl;class ih{}class O_{}function cm(s,o){return new sh(s,o??null,[])}class sh extends ih{constructor(o,u,l){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hw(this);const d=wn(o);this._bootstrapComponents=So(d.bootstrap),this._r3Injector=Mw(o,u,[{provide:ih,useValue:this},{provide:wf,useValue:this.componentFactoryResolver},...l],Ie(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Yf extends O_{constructor(o){super(),this.moduleType=o}create(o){return new sh(this.moduleType,o,[])}}class X0 extends ih{constructor(o){super(),this.componentFactoryResolver=new Hw(this),this.instance=null;const u=new pw([...o.providers,{provide:ih,useValue:this},{provide:wf,useValue:this.componentFactoryResolver}],o.parent||fw(),o.debugName,new Set(["environment"]));this.injector=u,o.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function eE(s,o,u=null){return new X0({providers:s,parent:o,debugName:u,runEnvironmentInitializers:!0}).injector}let dx=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const l=_C(0,u.type),d=l.length>0?eE([l],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Nt({token:s,providedIn:"environment",factory:()=>new s(ln(Kc))}),s})();function tE(s){s.getStandaloneInjector=o=>o.get(dx).getOrCreateStandaloneInjector(s)}function iE(s,o,u,l){return function fT(s,o,u,l,d,p){const _=o+u;return di(s,_,d)?Ha(s,_+1,p?l.call(p,d):l(d)):Jf(s,_+1)}(De(),vr(),s,o,u,l)}function sE(s,o,u,l,d){return function uE(s,o,u,l,d,p,_){const I=o+u;return function ea(s,o,u,l){const d=di(s,o,u);return di(s,o+1,l)||d}(s,I,d,p)?Ha(s,I+2,_?l.call(_,d,p):l(d,p)):Jf(s,I+2)}(De(),vr(),s,o,u,l,d)}function Jf(s,o){const u=s[o];return u===Bt?void 0:u}function oc(s){return o=>{setTimeout(s,void 0,o)}}const Ji=class F_ extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){let d=o,p=u||(()=>null),_=l;if(o&&"object"==typeof o){const D=o;d=D.next?.bind(D),p=D.error?.bind(D),_=D.complete?.bind(D)}this.__isAsync&&(p=oc(p),d&&(d=oc(d)),_&&(_=oc(_)));const I=super.subscribe({next:d,error:p,complete:_});return o instanceof Q.w0&&o.add(I),I}};function oh(){return this._results[Symbol.iterator]()}class ah{get changes(){return this._changes||(this._changes=new Ji)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=ah.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=oh)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=function cr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function xa(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],p=o[l];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let tp=(()=>{class s{}return s.__NG_ELEMENT_ID__=vT,s})();const cE=tp,lE=class extends cE{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,u){return this.createEmbeddedViewImpl(o,u,null)}createEmbeddedViewImpl(o,u,l){const d=this._declarationTContainer.tView,p=Jc(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,u||null,l||null);p[ii]=this._declarationLView[this._declarationTContainer.index];const I=this._declarationLView[si];return null!==I&&(p[si]=I.createEmbeddedView(d)),Bw(d,p,o),new Af(p)}};function vT(){return fm(Br(),De())}function fm(s,o){return 4&s.type?new lE(o,s,Pr(s,o)):null}let U_=(()=>{class s{}return s.__NG_ELEMENT_ID__=gm,s})();function gm(){return fE(Br(),De())}const ch=U_,ac=class extends ch{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return Pr(this._hostTNode,this._hostLView)}get injector(){return new Gi(this._hostTNode,this._hostLView)}get parentInjector(){const o=ar(this._hostTNode,this._hostLView);if(mt(o)){const u=ba(o,this._hostLView),l=Ai(o);return new Gi(u[et].data[l+8],u)}return new Gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=dE(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-kn}createEmbeddedView(o,u,l){let d,p;"number"==typeof l?d=l:null!=l&&(d=l.index,p=l.injector);const I=o.createEmbeddedViewImpl(u||{},p,null);return this.insertImpl(I,d,false),I}createComponent(o,u,l,d,p){const _=o&&!function Uu(s){return"function"==typeof s}(o);let I;if(_)I=u;else{const Fe=u||{};I=Fe.index,l=Fe.injector,d=Fe.projectableNodes,p=Fe.environmentInjector||Fe.ngModuleRef}const D=_?o:new xf(on(o)),A=l||this.parentInjector;if(!p&&null==D.ngModule){const Ge=(_?A:this.parentInjector).get(Kc,null);Ge&&(p=Ge)}on(D.componentType??{});const J=D.create(A,d,null,p);return this.insertImpl(J.hostView,I,false),J}insert(o,u){return this.insertImpl(o,u,!1)}insertImpl(o,u,l){const d=o._lView,p=d[et];if(function rd(s){return Ur(s[En])}(d)){const D=this.indexOf(o);if(-1!==D)this.detach(D);else{const A=d[En],M=new ac(A,A[Fr],A[En]);M.detach(M.indexOf(o))}}const _=this._adjustIndex(u),I=this._lContainer;if(function qc(s,o,u,l){const d=kn+l,p=u.length;l>0&&(u[d-1][Ci]=o),l<p-kn?(o[Ci]=u[d],ls(u,kn+l,o)):(u.push(o),o[Ci]=null),o[En]=u;const _=o[ii];null!==_&&u!==_&&function lg(s,o){const u=s[Vo];o[Zn]!==o[En][En][Zn]&&(s[cu]=!0),null===u?s[Vo]=[o]:u.push(o)}(_,o);const I=o[si];null!==I&&I.insertView(s),o[Rt]|=128}(p,d,I,_),!l){const D=Qo(_,I),A=d[Pt],M=$(A,I[Ti]);null!==M&&function ug(s,o,u,l,d,p){l[qn]=d,l[Fr]=o,To(s,l,u,1,d,p)}(p,I[Fr],A,d,M,D)}return o.attachToViewContainerRef(),ls(hE(I),_,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=dE(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=cf(this._lContainer,u);l&&(Na(hE(this._lContainer),u),lf(l[et],l))}detach(o){const u=this._adjustIndex(o,-1),l=cf(this._lContainer,u);return l&&null!=Na(hE(this._lContainer),u)?new Af(l):null}_adjustIndex(o,u=0){return o??this.length+u}};function dE(s){return s[Th]}function hE(s){return s[Th]||(s[Th]=[])}function fE(s,o){let u;const l=o[s.index];return Ur(l)?u=l:(u=Fw(l,o,null,s),o[s.index]=u,s_(o,u)),V_(u,o,s,l),new ac(u,s,o)}let V_=function B_(s,o,u,l){if(s[Ti])return;let d;d=8&u.type?yn(l):function wx(s,o){const u=s[Pt],l=u.createComment(""),d=xr(o,s);return h(u,$(u,d),l,function X(s,o){return s.nextSibling(o)}(u,d),!1),l}(o,u),s[Ti]=d};class mm{constructor(o){this.queryList=o,this.matches=null}clone(){return new mm(this.queryList)}setDirty(){this.queryList.setDirty()}}class j_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<l;p++){const _=u.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new j_(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==dh(o,u).matches&&this.queries[u].setDirty()}}class ym{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class gE{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==u?u.push(p):u=[p])}return null!==u?new gE(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class _m{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new _m(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,u,$_(u,p)),this.matchTNodeWithReadOption(o,u,Sa(u,o,p,!1,!1))}else l===tp?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Sa(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===wg||d===U_||d===tp&&4&u.type)this.addMatch(u.index,-2);else{const p=Sa(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function $_(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function ST(s,o,u,l){return-1===u?function Ex(s,o){return 11&s.type?Pr(s,o):4&s.type?fm(s,o):null}(o,s):-2===u?function vm(s,o,u){return u===wg?Pr(o,s):u===tp?fm(o,s):u===U_?fE(o,s):void 0}(s,o,l):bs(s,s[et],u,o)}function wm(s,o,u,l){const d=o[si].queries[l];if(null===d.matches){const p=s.data,_=u.matches,I=[];for(let D=0;D<_.length;D+=2){const A=_[D];I.push(A<0?null:ST(o,p[A],_[D+1],u.metadata.read))}d.matches=I}return d.matches}function lh(s,o,u,l){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const _=wm(s,o,d,u);for(let I=0;I<p.length;I+=2){const D=p[I];if(D>0)l.push(_[I/2]);else{const A=p[I+1],M=o[-D];for(let U=kn;U<M.length;U++){const W=M[U];W[ii]===W[En]&&lh(W[et],W,A,l)}if(null!==M[Vo]){const U=M[Vo];for(let W=0;W<U.length;W++){const J=U[W];lh(J[et],J,A,l)}}}}}return l}function mE(s){const o=De(),u=Zt(),l=Ea();Ia(l+1);const d=dh(u,l);if(s.dirty&&function Dc(s){return 4==(4&s[Rt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?lh(u,o,l,[]):wm(u,o,d,l);s.reset(p,Eg),s.notifyOnChanges()}return!0}return!1}function Li(s,o,u,l){const d=Zt();if(d.firstCreatePass){const p=Br();(function _E(s,o,u){null===s.queries&&(s.queries=new gE),s.queries.track(new _m(o,u))})(d,new ym(o,u,l),p.index),function xl(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Em(s,o,u){const l=new ah(4==(4&u));(function Tf(s,o,u,l){const d=Ug(o);d.push(u),s.firstCreatePass&&Sf(s).push(l,d.length-1)})(s,o,l,l.destroy),null===o[si]&&(o[si]=new j_),o[si].queries.push(new mm(l))}(d,De(),u)}function yE(){return function H_(s,o){return s[si].queries[o].queryList}(De(),Ea())}function dh(s,o){return s.queries.getByIndex(o)}function z_(s){return!!wn(s)}const ev=new hn("Application Initializer");let RE=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l}),this.appInits=Ot(ev,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const d of this.appInits){const p=d();if(__(p))u.push(p);else if(pD(p)){const _=new Promise((I,D)=>{p.subscribe({complete:I,error:D})});u.push(_)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),tv=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Sm=new hn("LocaleId",{providedIn:"root",factory:()=>Ot(Sm,gt.Optional|gt.SkipSelf)||function $T(){return typeof $localize<"u"&&$localize.locale||wl}()}),NE=new hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class OE{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let kE=(()=>{class s{compileModuleSync(u){return new Yf(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),p=So(wn(u).declarations).reduce((_,I)=>{const D=on(I);return D&&_.push(new xf(D)),_},[]);return new OE(l,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Ox=(()=>Promise.resolve(0))();function pi(s){typeof Zone>"u"?Ox.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}function zT(...s){}class Wr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ji(!1),this.onMicrotaskEmpty=new Ji(!1),this.onStable=new Ji(!1),this.onError=new Ji(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function GT(){let s=Xe.requestAnimationFrame,o=Xe.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Lx(s){const o=()=>{!function kx(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Xe,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,BE(s),s.isCheckStableRunning=!0,rv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),BE(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,p,_,I)=>{try{return WT(s),u.invokeTask(d,p,_,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),iv(s)}},onInvoke:(u,l,d,p,_,I,D)=>{try{return WT(s),u.invoke(d,p,_,I,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),iv(s)}},onHasTask:(u,l,d,p)=>{u.hasTask(d,p),l===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,BE(s),rv(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,l,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wr.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(Wr.isInAngularZone())throw new ce(909,!1)}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,VE,zT,zT);try{return p.runTask(_,u,l)}finally{p.cancelTask(_)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const VE={};function rv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function BE(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function WT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function iv(s){s._nesting--,rv(s)}class Fx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ji,this.onMicrotaskEmpty=new Ji,this.onStable=new Ji,this.onError=new Ji}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}const qT=new hn("",{providedIn:"root",factory:op});function op(){const s=Ot(Wr);let o=!0;const u=new L.y(d=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{d.next(o),d.complete()})}),l=new L.y(d=>{let p;s.runOutsideAngular(()=>{p=s.onStable.subscribe(()=>{Wr.assertNotInAngularZone(),pi(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const _=s.onUnstable.subscribe(()=>{Wr.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{d.next(!1)}))});return()=>{p.unsubscribe(),_.unsubscribe()}});return(0,se.T)(u,l.pipe((0,ie.B)()))}const sv=new hn(""),fh=new hn("");let Nm,jE=(()=>{class s{constructor(u,l,d){this._ngZone=u,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Nm||(function Rm(s){Nm=s}(d),d.addToWindow(l)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wr.assertNotInAngularZone(),pi(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())pi(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,l,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(ln(Wr),ln(xm),ln(fh))},s.\u0275prov=Nt({token:s,factory:s.\u0275fac}),s})(),xm=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return Nm?.findTestabilityInTree(this,u,l)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),uc=null;const ov=new hn("AllowMultipleToken"),Mm=new hn("PlatformDestroyListeners"),tu=new hn("appBootstrapListener");class $E{constructor(o,u){this.name=o,this.token=u}}function zE(s,o,u=[]){const l=`Platform: ${o}`,d=new hn(l);return(p=[])=>{let _=GE();if(!_||_.injector.get(ov,!1)){const I=[...u,...p,{provide:d,useValue:!0}];s?s(I):function Vx(s){if(uc&&!uc.get(ov,!1))throw new ce(400,!1);(function av(){!function ma(s){mu=s}(()=>{throw new ce(600,!1)})})(),uc=s;const o=s.get(WE);(function Pm(s){s.get(DC,null)?.forEach(u=>u())})(s)}(function uv(s=[],o){return Qc.create({name:o,providers:[{provide:Fy,useValue:"platform"},{provide:Mm,useValue:new Set([()=>uc=null])},...s]})}(I,l))}return function ap(s){const o=GE();if(!o)throw new ce(401,!1);return o}()}}function GE(){return uc?.get(WE)??null}let WE=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const d=function Bx(s="zone.js",o){return"noop"===s?new Fx:"zone.js"===s?new Wr(o):s}(l?.ngZone,function qE(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const p=function nT(s,o,u){return new sh(s,o,u)}(u.moduleType,this.injector,function hv(s){return[{provide:Wr,useFactory:s},{provide:Gu,multi:!0,useFactory:()=>{const o=Ot(JT,{optional:!0});return()=>o.initialize()}},{provide:QT,useFactory:ZE},{provide:qT,useFactory:op}]}(()=>d)),_=p.injector.get(Yc,null);return d.runOutsideAngular(()=>{const I=d.onError.subscribe({next:D=>{_.handleError(D)}});p.onDestroy(()=>{lv(this._modules,p),I.unsubscribe()})}),function cv(s,o,u){try{const l=u();return __(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(_,d,()=>{const I=p.injector.get(RE);return I.runInitializers(),I.donePromise.then(()=>(function M0(s){Le(s,"Expected localeId to be defined"),"string"==typeof s&&(FD=s.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Sm,wl)||wl),this._moduleDoBootstrap(p),p))})})}bootstrapModule(u,l=[]){const d=YT({},l);return function ZT(s,o,u){const l=new Yf(u);return Promise.resolve(l)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const l=u.injector.get(Ml);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new ce(-403,!1);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const u=this._injector.get(Mm,null);u&&(u.forEach(l=>l()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(ln(Qc))},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function YT(s,o){return Array.isArray(o)?o.reduce(YT,s):{...s,...o}}let Ml=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ot(QT),this.componentTypes=[],this.components=[],this.isStable=Ot(qT),this._injector=Ot(Kc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,l){const d=u instanceof vg;if(!this._injector.get(RE).done)throw!d&&ko(u),new ce(405,!1);let _;_=d?u:this._injector.get(wf).resolveComponentFactory(u),this.componentTypes.push(_.componentType);const I=function Ux(s){return s.isBoundToModule}(_)?void 0:this._injector.get(ih),A=_.create(Qc.NULL,[],l||_.selector,I),M=A.location.nativeElement,U=A.injector.get(sv,null);return U?.registerApplication(M),A.onDestroy(()=>{this.detachView(A.hostView),lv(this.components,A),U?.unregisterApplication(M)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new ce(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;lv(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const l=this._injector.get(tu,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>lv(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ce(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function lv(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}const QT=new hn("",{providedIn:"root",factory:()=>Ot(Yc).handleError.bind(void 0)});function ZE(){const s=Ot(Wr),o=Ot(Yc);return u=>s.runOutsideAngular(()=>o.handleError(u))}let JT=(()=>{class s{constructor(){this.zone=Ot(Wr),this.applicationRef=Ot(Ml)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function up(){return!1}let tb=(()=>{class s{}return s.__NG_ELEMENT_ID__=cp,s})();function cp(s){return function jx(s,o,u){if(Bo(s)&&!u){const l=Qr(s.index,o);return new Af(l,l)}return 47&s.type?new Af(o[Zn],o):null}(Br(),De(),16==(16&s))}class _v{constructor(){}supports(o){return jg(o)}create(o){return new Hx(o)}}const XE=(s,o)=>o;class Hx{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||XE}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,p=null;for(;u||l;){const _=!l||u&&u.currentIndex<tI(l,d,p)?u:l,I=tI(_,d,p),D=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(u=u._next,null==_.previousIndex)d++;else{p||(p=[]);const A=I-d,M=D-d;if(A!=M){for(let W=0;W<A;W++){const J=W<p.length?p[W]:p[W]=0,ve=J+W;M<=ve&&ve<A&&(p[W]=J+1)}p[_.previousIndex]=M-A}}I!==D&&o(_,I,D)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!jg(o))throw new ce(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],_=this._trackByFn(I,p),null!==u&&Object.is(u.trackById,_)?(l&&(u=this._verifyReinsertion(u,p,_,I)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,_,I),l=!0),u=u._next}else d=0,function aD(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,I=>{_=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,_)?(l&&(u=this._verifyReinsertion(u,I,_,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,_,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new eI(u,l),p,d),o}_verifyReinsertion(o,u,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new vv),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vv),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class eI{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zx{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class vv{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new zx,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tI(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class wv{constructor(){}supports(o){return o instanceof Map||Ao(o)}create(){return new lb}}class lb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Ao(o)))throw new ce(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const l=new Gx(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class Gx{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ev(){return new nI([new _v])}let nI=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||Ev()),deps:[[s,new lr,new St]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new ce(901,!1)}}return s.\u0275prov=Nt({token:s,providedIn:"root",factory:Ev}),s})();function hb(){return new km([new wv])}let km=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||hb()),deps:[[s,new lr,new St]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(l)return l;throw new ce(901,!1)}}return s.\u0275prov=Nt({token:s,providedIn:"root",factory:hb}),s})();const lp=zE(null,"core",[]);let gb=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(ln(Ml))},s.\u0275mod=ao({type:s}),s.\u0275inj=Gt({}),s})(),vb=(()=>{class s{get whenAllTasksComplete(){return 0===this.collection.size&&this.complete(),this.promise}constructor(){this.taskId=0,this.collection=new Set,this.ngZone=Ot(Wr),this.completed=!1,this.ngZone.runOutsideAngular(()=>{this.promise=new Promise(u=>{this.resolve=u})})}add(){if(this.completed)return-1;const u=this.taskId++;return this.collection.add(u),u}remove(u){this.completed||(this.collection.delete(u),0===this.collection.size&&this.complete())}ngOnDestroy(){this.complete(),this.collection.clear()}complete(){this.completed=!0,this.resolve()}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Nt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function cI(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function tR(s){const o=on(s);if(!o)return null;const u=new xf(o);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return o.standalone}}}},3942:(_t,Ae,F)=>{F.d(Ae,{Z:()=>nt});var m=F(2090),Q=F(4859),L=F(6881),se=F(1877);class ie{constructor(ce,Ue){this._delegate=ce,this.firebase=Ue,(0,L._addComponent)(ce,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ce){this._delegate.automaticDataCollectionEnabled=ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ce=>{this._delegate.checkDestroyed(),ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(ce,Ue=L._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const ze=this._delegate.container.getProvider(ce);return!ze.isInitialized()&&"EXPLICIT"===(null===(Oe=ze.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&ze.initialize(),ze.getImmediate({identifier:Ue})}_removeServiceInstance(ce,Ue=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ce).clearInstance(Ue)}_addComponent(ce){(0,L._addComponent)(this._delegate,ce)}_addOrOverwriteComponent(ce){(0,L._addOrOverwriteComponent)(this._delegate,ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function he(){const vt=function Ie(vt){const ce={},Ue={__esModule:!0,initializeApp:function ke(Ee,$e={}){const re=L.initializeApp(Ee,$e);if((0,m.r3)(ce,re.name))return ce[re.name];const Ke=new vt(re,Ue);return ce[re.name]=Ke,Ke},app:ze,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function fe(Ee){const $e=Ee.name,re=$e.replace("-compat","");if(L._registerComponent(Ee)&&"PUBLIC"===Ee.type){const Ke=(Yt=ze())=>{if("function"!=typeof Yt[re])throw me.create("invalid-app-argument",{appName:$e});return Yt[re]()};void 0!==Ee.serviceProps&&(0,m.ZB)(Ke,Ee.serviceProps),Ue[re]=Ke,vt.prototype[re]=function(...Yt){return this._getService.bind(this,$e).apply(this,Ee.multipleInstances?Yt:[])}}return"PUBLIC"===Ee.type?Ue[re]:null},removeApp:function Oe(Ee){delete ce[Ee]},useAsService:function Ne(Ee,$e){return"serverAuth"===$e?null:$e},modularAPIs:L}};function ze(Ee){if(!(0,m.r3)(ce,Ee=Ee||L._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Ee});return ce[Ee]}return Ue.default=Ue,Object.defineProperty(Ue,"apps",{get:function we(){return Object.keys(ce).map(Ee=>ce[Ee])}}),ze.App=vt,Ue}(ie);return vt.INTERNAL=Object.assign(Object.assign({},vt.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ce(Ue){(0,m.ZB)(vt,Ue)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),vt}(),z=new se.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const vt=self.firebase.SDK_VERSION;vt&&vt.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const nt=G;!function Te(vt){(0,L.registerVersion)("@firebase/app-compat","0.2.11",vt)}()},6881:(_t,Ae,F)=>{F.r(Ae),F.d(Ae,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>wi,_DEFAULT_ENTRY_NAME:()=>en,_addComponent:()=>Pn,_addOrOverwriteComponent:()=>ri,_apps:()=>Xe,_clearComponents:()=>sn,_components:()=>vi,_getProvider:()=>jn,_registerComponent:()=>Kr,_removeServiceInstance:()=>vs,deleteApp:()=>ln,getApp:()=>$n,getApps:()=>Vs,initializeApp:()=>aa,onLog:()=>Ei,registerVersion:()=>Ot,setLogLevel:()=>zn});var m=F(5861),Q=F(4859),L=F(1877),se=F(2090);const ie=(de,te)=>te.some(Pe=>de instanceof Pe);let oe,me;const G=new WeakMap,z=new WeakMap,Z=new WeakMap,je=new WeakMap,Te=new WeakMap;let ce={get(de,te,Pe){if(de instanceof IDBTransaction){if("done"===te)return z.get(de);if("objectStoreNames"===te)return de.objectStoreNames||Z.get(de);if("store"===te)return Pe.objectStoreNames[1]?void 0:Pe.objectStore(Pe.objectStoreNames[0])}return ke(de[te])},set:(de,te,Pe)=>(de[te]=Pe,!0),has:(de,te)=>de instanceof IDBTransaction&&("done"===te||"store"===te)||te in de};function ze(de){return"function"==typeof de?function Oe(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...te){return de.apply(we(this),te),ke(G.get(this))}:function(...te){return ke(de.apply(we(this),te))}:function(te,...Pe){const ht=de.call(we(this),te,...Pe);return Z.set(ht,te.sort?te.sort():[te]),ke(ht)}}(de):(de instanceof IDBTransaction&&function vt(de){if(z.has(de))return;const te=new Promise((Pe,ht)=>{const Tt=()=>{de.removeEventListener("complete",Ut),de.removeEventListener("error",tn),de.removeEventListener("abort",tn)},Ut=()=>{Pe(),Tt()},tn=()=>{ht(de.error||new DOMException("AbortError","AbortError")),Tt()};de.addEventListener("complete",Ut),de.addEventListener("error",tn),de.addEventListener("abort",tn)});z.set(de,te)}(de),ie(de,function Ie(){return oe||(oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,ce):de)}function ke(de){if(de instanceof IDBRequest)return function nt(de){const te=new Promise((Pe,ht)=>{const Tt=()=>{de.removeEventListener("success",Ut),de.removeEventListener("error",tn)},Ut=()=>{Pe(ke(de.result)),Tt()},tn=()=>{ht(de.error),Tt()};de.addEventListener("success",Ut),de.addEventListener("error",tn)});return te.then(Pe=>{Pe instanceof IDBCursor&&G.set(Pe,de)}).catch(()=>{}),Te.set(te,de),te}(de);if(je.has(de))return je.get(de);const te=ze(de);return te!==de&&(je.set(de,te),Te.set(te,de)),te}const we=de=>Te.get(de),Ee=["get","getKey","getAll","getAllKeys","count"],$e=["put","add","delete","clear"],re=new Map;function Ke(de,te){if(!(de instanceof IDBDatabase)||te in de||"string"!=typeof te)return;if(re.get(te))return re.get(te);const Pe=te.replace(/FromIndex$/,""),ht=te!==Pe,Tt=$e.includes(Pe);if(!(Pe in(ht?IDBIndex:IDBObjectStore).prototype)||!Tt&&!Ee.includes(Pe))return;const Ut=function(){var tn=(0,m.Z)(function*(_r,...rr){const ir=this.transaction(_r,Tt?"readwrite":"readonly");let ua=ir.store;return ht&&(ua=ua.index(rr.shift())),(yield Promise.all([ua[Pe](...rr),Tt&&ir.done]))[0]});return function(rr){return tn.apply(this,arguments)}}();return re.set(te,Ut),Ut}!function Ue(de){ce=de(ce)}(de=>({...de,get:(te,Pe,ht)=>Ke(te,Pe)||de.get(te,Pe,ht),has:(te,Pe)=>!!Ke(te,Pe)||de.has(te,Pe)}));class Yt{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function br(de){const te=de.getComponent();return"VERSION"===te?.type}(Pe)){const ht=Pe.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(Pe=>Pe).join(" ")}}const mi="@firebase/app",le=new L.Yd("@firebase/app"),en="[DEFAULT]",Ct={[mi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xe=new Map,vi=new Map;function Pn(de,te){try{de.container.addComponent(te)}catch(Pe){le.debug(`Component ${te.name} failed to register with FirebaseApp ${de.name}`,Pe)}}function ri(de,te){de.container.addOrOverwriteComponent(te)}function Kr(de){const te=de.name;if(vi.has(te))return le.debug(`There were multiple attempts to register component ${te}.`),!1;vi.set(te,de);for(const Pe of Xe.values())Pn(Pe,de);return!0}function jn(de,te){const Pe=de.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),de.container.getProvider(te)}function vs(de,te,Pe=en){jn(de,te).clearInstance(Pe)}function sn(){vi.clear()}const $t=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Us{constructor(te,Pe,ht){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw $t.create("app-deleted",{appName:this._name})}}const wi="9.22.1";function aa(de,te={}){let Pe=de;"object"!=typeof te&&(te={name:te});const ht=Object.assign({name:en,automaticDataCollectionEnabled:!1},te),Tt=ht.name;if("string"!=typeof Tt||!Tt)throw $t.create("bad-app-name",{appName:String(Tt)});if(Pe||(Pe=(0,se.aH)()),!Pe)throw $t.create("no-options");const Ut=Xe.get(Tt);if(Ut){if((0,se.vZ)(Pe,Ut.options)&&(0,se.vZ)(ht,Ut.config))return Ut;throw $t.create("duplicate-app",{appName:Tt})}const tn=new Q.H0(Tt);for(const rr of vi.values())tn.addComponent(rr);const _r=new Us(Pe,ht,tn);return Xe.set(Tt,_r),_r}function $n(de=en){const te=Xe.get(de);if(!te&&de===en&&(0,se.aH)())return aa();if(!te)throw $t.create("no-app",{appName:de});return te}function Vs(){return Array.from(Xe.values())}function ln(de){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,m.Z)(function*(de){const te=de.name;Xe.has(te)&&(Xe.delete(te),yield Promise.all(de.container.getProviders().map(Pe=>Pe.delete())),de.isDeleted=!0)})).apply(this,arguments)}function Ot(de,te,Pe){var ht;let Tt=null!==(ht=Ct[de])&&void 0!==ht?ht:de;Pe&&(Tt+=`-${Pe}`);const Ut=Tt.match(/\s|\//),tn=te.match(/\s|\//);if(Ut||tn){const _r=[`Unable to register library "${Tt}" with version "${te}":`];return Ut&&_r.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),Ut&&tn&&_r.push("and"),tn&&_r.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void le.warn(_r.join(" "))}Kr(new Q.wA(`${Tt}-version`,()=>({library:Tt,version:te}),"VERSION"))}function Ei(de,te){if(null!==de&&"function"!=typeof de)throw $t.create("invalid-log-argument");(0,L.Am)(de,te)}function zn(de){(0,L.Ub)(de)}const Ii="firebase-heartbeat-database",Ui=1,j="firebase-heartbeat-store";let V=null;function q(){return V||(V=function fe(de,te,{blocked:Pe,upgrade:ht,blocking:Tt,terminated:Ut}={}){const tn=indexedDB.open(de,te),_r=ke(tn);return ht&&tn.addEventListener("upgradeneeded",rr=>{ht(ke(tn.result),rr.oldVersion,rr.newVersion,ke(tn.transaction),rr)}),Pe&&tn.addEventListener("blocked",rr=>Pe(rr.oldVersion,rr.newVersion,rr)),_r.then(rr=>{Ut&&rr.addEventListener("close",()=>Ut()),Tt&&rr.addEventListener("versionchange",ir=>Tt(ir.oldVersion,ir.newVersion,ir))}).catch(()=>{}),_r}(Ii,Ui,{upgrade:(de,te)=>{0===te&&de.createObjectStore(j)}}).catch(de=>{throw $t.create("idb-open",{originalErrorMessage:de.message})})),V}function ee(){return(ee=(0,m.Z)(function*(de){try{return yield(yield q()).transaction(j).objectStore(j).get(Ht(de))}catch(te){if(te instanceof se.ZR)le.warn(te.message);else{const Pe=$t.create("idb-get",{originalErrorMessage:te?.message});le.warn(Pe.message)}}})).apply(this,arguments)}function Je(de,te){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,m.Z)(function*(de,te){try{const ht=(yield q()).transaction(j,"readwrite");yield ht.objectStore(j).put(te,Ht(de)),yield ht.done}catch(Pe){if(Pe instanceof se.ZR)le.warn(Pe.message);else{const ht=$t.create("idb-set",{originalErrorMessage:Pe?.message});le.warn(ht.message)}}})).apply(this,arguments)}function Ht(de){return`${de.name}!${de.options.appId}`}class Gn{constructor(te){this.container=te,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new ts(Pe),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var te=this;return(0,m.Z)(function*(){const ht=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=Lt();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!te._heartbeatsCache.heartbeats.some(Ut=>Ut.date===Tt))return te._heartbeatsCache.heartbeats.push({date:Tt,agent:ht}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(Ut=>{const tn=new Date(Ut.date).valueOf();return Date.now()-tn<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,m.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const Pe=Lt(),{heartbeatsToSend:ht,unsentEntries:Tt}=function nr(de,te=1024){const Pe=[];let ht=de.slice();for(const Tt of de){const Ut=Pe.find(tn=>tn.agent===Tt.agent);if(Ut){if(Ut.dates.push(Tt.date),ws(Pe)>te){Ut.dates.pop();break}}else if(Pe.push({agent:Tt.agent,dates:[Tt.date]}),ws(Pe)>te){Pe.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:ht}}(te._heartbeatsCache.heartbeats),Ut=(0,se.L)(JSON.stringify({version:2,heartbeats:ht}));return te._heartbeatsCache.lastSentHeartbeatDate=Pe,Tt.length>0?(te._heartbeatsCache.heartbeats=Tt,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),Ut})()}}function Lt(){return(new Date).toISOString().substring(0,10)}class ts{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,m.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function ge(de){return ee.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var Pe=this;return(0,m.Z)(function*(){var ht;if(yield Pe._canUseIndexedDBPromise){const Ut=yield Pe.read();return Je(Pe.app,{lastSentHeartbeatDate:null!==(ht=te.lastSentHeartbeatDate)&&void 0!==ht?ht:Ut.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var Pe=this;return(0,m.Z)(function*(){var ht;if(yield Pe._canUseIndexedDBPromise){const Ut=yield Pe.read();return Je(Pe.app,{lastSentHeartbeatDate:null!==(ht=te.lastSentHeartbeatDate)&&void 0!==ht?ht:Ut.lastSentHeartbeatDate,heartbeats:[...Ut.heartbeats,...te.heartbeats]})}})()}}function ws(de){return(0,se.L)(JSON.stringify({version:2,heartbeats:de})).length}!function Po(de){Kr(new Q.wA("platform-logger",te=>new Yt(te),"PRIVATE")),Kr(new Q.wA("heartbeat",te=>new Gn(te),"PRIVATE")),Ot(mi,"0.9.11",de),Ot(mi,"0.9.11","esm2017"),Ot("fire-js","")}("")},4859:(_t,Ae,F)=>{F.d(Ae,{H0:()=>Ie,wA:()=>L,zt:()=>ie});var m=F(5861),Q=F(2090);class L{constructor(G,z,Z){this.name=G,this.instanceFactory=z,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const se="[DEFAULT]";class ie{constructor(G,z){this.name=G,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const z=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(z)){const Z=new Q.BH;if(this.instancesDeferred.set(z,Z),this.isInitialized(z)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:z});je&&Z.resolve(je)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(G){var z;const Z=this.normalizeInstanceIdentifier(G?.identifier),je=null!==(z=G?.optional)&&void 0!==z&&z;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Te){if(je)return null;throw Te}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function me(he){return"EAGER"===he.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[z,Z]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(z);try{const Te=this.getOrInitializeService({instanceIdentifier:je});Z.resolve(Te)}catch{}}}}clearInstance(G=se){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,m.Z)(function*(){const z=Array.from(G.instances.values());yield Promise.all([...z.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...z.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=se){return this.instances.has(G)}getOptions(G=se){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:z={}}=G,Z=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Z,options:z});for(const[Te,nt]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Te)&&nt.resolve(je);return je}onInit(G,z){var Z;const je=this.normalizeInstanceIdentifier(z),Te=null!==(Z=this.onInitCallbacks.get(je))&&void 0!==Z?Z:new Set;Te.add(G),this.onInitCallbacks.set(je,Te);const nt=this.instances.get(je);return nt&&G(nt,je),()=>{Te.delete(G)}}invokeOnInitCallbacks(G,z){const Z=this.onInitCallbacks.get(z);if(Z)for(const je of Z)try{je(G,z)}catch{}}getOrInitializeService({instanceIdentifier:G,options:z={}}){let Z=this.instances.get(G);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(he=G,he===se?void 0:he),options:z}),this.instances.set(G,Z),this.instancesOptions.set(G,z),this.invokeOnInitCallbacks(Z,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,Z)}catch{}var he;return Z||null}normalizeInstanceIdentifier(G=se){return this.component?this.component.multipleInstances?G:se:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ie{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const z=this.getProvider(G.name);if(z.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);z.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const z=new ie(G,this);return this.providers.set(G,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(_t,Ae,F)=>{F.d(Ae,{Am:()=>he,Ub:()=>Ie,Yd:()=>me,in:()=>Q});const m=[];var Q=(()=>((Q=Q||{})[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",Q))();const L={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},se=Q.INFO,ie={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},oe=(G,z,...Z)=>{if(z<G.logLevel)return;const je=(new Date).toISOString(),Te=ie[z];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Te](`[${je}]  ${G.name}:`,...Z)};class me{constructor(z){this.name=z,this._logLevel=se,this._logHandler=oe,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in Q))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?L[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...z),this._logHandler(this,Q.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...z),this._logHandler(this,Q.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...z),this._logHandler(this,Q.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...z),this._logHandler(this,Q.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...z),this._logHandler(this,Q.ERROR,...z)}}function Ie(G){m.forEach(z=>{z.setLogLevel(G)})}function he(G,z){for(const Z of m){let je=null;z&&z.level&&(je=L[z.level]),Z.userLogHandler=null===G?null:(Te,nt,...vt)=>{const ce=vt.map(Ue=>{if(null==Ue)return null;if("string"==typeof Ue)return Ue;if("number"==typeof Ue||"boolean"==typeof Ue)return Ue.toString();if(Ue instanceof Error)return Ue.message;try{return JSON.stringify(Ue)}catch{return null}}).filter(Ue=>Ue).join(" ");nt>=(je??Te.logLevel)&&G({level:Q[nt].toLowerCase(),message:ce,args:vt,type:Te.name})}}}},259:(_t,Ae,F)=>{F.d(Ae,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=F(6881);(0,m.registerVersion)("firebase","9.22.1","app")},9260:(_t,Ae,F)=>{F.d(Ae,{Z:()=>m.Z});var m=F(3942);m.Z.registerVersion("firebase","9.22.1","app-compat")},2644:(_t,Ae,F)=>{F.r(Ae);var m=F(5861),Q=F(3942),L=F(2090),se=F(6881),ie=F(655),oe=F(1877),me=F(4859);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const nt=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},vt=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ce=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new oe.Yd("@firebase/auth");function ke(v,...h){Oe.logLevel<=oe.in.ERROR&&Oe.error(`Auth (${se.SDK_VERSION}): ${v}`,...h)}function we(v,...h){throw $e(v,...h)}function fe(v,...h){return $e(v,...h)}function Ne(v,h,g){const w=Object.assign(Object.assign({},vt()),{[h]:g});return new L.LL("auth","Firebase",w).create(h,{appName:v.name})}function Ee(v,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&we(v,"argument-error"),Ne(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(v,...h){if("string"!=typeof v){const g=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(g,...w)}return ce.create(v,...h)}function re(v,h,...g){if(!v)throw $e(h,...g)}function Ke(v){const h="INTERNAL ASSERTION FAILED: "+v;throw ke(h),new Error(h)}function Yt(v,h){v||Ke(h)}function br(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function mi(){return"http:"===io()||"https:"===io()}function io(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ce{constructor(h,g){this.shortDelay=h,this.longDelay=g,Yt(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function le(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(mi()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Me(v,h){Yt(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class We{static initialize(h,g,w){this.fetchImpl=h,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Le={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},qe=new Ce(3e4,6e4);function it(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function Ft(v,h,g,w){return wt.apply(this,arguments)}function wt(){return(wt=(0,m.Z)(function*(v,h,g,w,S={}){return Nt(v,S,(0,m.Z)(function*(){let N={},$={};w&&("GET"===h?$=w:N={body:JSON.stringify(w)});const X=(0,L.xO)(Object.assign({key:v.config.apiKey},$)).slice(1),Re=yield v._getAdditionalHeaders();return Re["Content-Type"]="application/json",v.languageCode&&(Re["X-Firebase-Locale"]=v.languageCode),We.fetch()(Sr(v,v.config.apiHost,g,X),Object.assign({method:h,headers:Re,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Nt(v,h,g){return pn.apply(this,arguments)}function pn(){return(pn=(0,m.Z)(function*(v,h,g){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Le),h);try{const S=new Zr(v),N=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const $=yield N.json();if("needConfirmation"in $)throw mr(v,"account-exists-with-different-credential",$);if(N.ok&&!("errorMessage"in $))return $;{const X=N.ok?$.errorMessage:$.error.message,[Re,He]=X.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Re)throw mr(v,"credential-already-in-use",$);if("EMAIL_EXISTS"===Re)throw mr(v,"email-already-in-use",$);if("USER_DISABLED"===Re)throw mr(v,"user-disabled",$);const st=w[Re]||Re.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw Ne(v,st,He);we(v,st)}}catch(S){if(S instanceof L.ZR)throw S;we(v,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function Gt(v,h,g,w){return gn.apply(this,arguments)}function gn(){return(gn=(0,m.Z)(function*(v,h,g,w,S={}){const N=yield Ft(v,h,g,w,S);return"mfaPendingCredential"in N&&we(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Sr(v,h,g,w){const S=`${h}${g}?${w}`;return v.config.emulator?Me(v.config,S):`${v.config.apiScheme}://${S}`}class Zr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(fe(this.auth,"network-request-failed")),qe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mr(v,h,g){const w={appName:v.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const S=fe(v,h,w);return S.customData._tokenResponse=g,S}function Sn(){return(Sn=(0,m.Z)(function*(v,h){return Ft(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function so(){return(so=(0,m.Z)(function*(v,h){return Ft(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function gt(){return(gt=(0,m.Z)(function*(v,h){return Ft(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function _i(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function en(){return(en=(0,m.Z)(function*(v,h=!1){const g=(0,L.m9)(v),w=yield g.getIdToken(h),S=Xe(w);re(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,$=N?.sign_in_provider;return{claims:S,token:w,authTime:_i(Ct(S.auth_time)),issuedAtTime:_i(Ct(S.iat)),expirationTime:_i(Ct(S.exp)),signInProvider:$||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function Ct(v){return 1e3*Number(v)}function Xe(v){const[h,g,w]=v.split(".");if(void 0===h||void 0===g||void 0===w)return ke("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,L.tV)(g);return S?JSON.parse(S):(ke("Failed to decode base64 JWT payload"),null)}catch(S){return ke("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Pn(v,h){return ri.apply(this,arguments)}function ri(){return(ri=(0,m.Z)(function*(v,h,g=!1){if(g)return h;try{return yield h}catch(w){throw w instanceof L.ZR&&function Kr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}class jn{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),w)}iteration(){var h=this;return(0,m.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class vs{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=_i(this.lastLoginAt),this.creationTime=_i(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sn(v){return Fi.apply(this,arguments)}function Fi(){return Fi=(0,m.Z)(function*(v){var h;const g=v.auth,w=yield v.getIdToken(),S=yield Pn(v,function au(v,h){return gt.apply(this,arguments)}(g,{idToken:w}));re(S?.users.length,g,"internal-error");const N=S.users[0];v._notifyReloadListener(N);const $=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?function aa(v){return v.map(h=>{var{providerId:g}=h,w=(0,ie._T)(h,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(N.providerUserInfo):[],X=function wi(v,h){return[...v.filter(w=>!h.some(S=>S.providerId===w.providerId)),...h]}(v.providerData,$),st=!!v.isAnonymous&&!(v.email&&N.passwordHash||X?.length),ot={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:X,metadata:new vs(N.createdAt,N.lastLoginAt),isAnonymous:st};Object.assign(v,ot)}),Fi.apply(this,arguments)}function Us(){return(Us=(0,m.Z)(function*(v){const h=(0,L.m9)(v);yield sn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Vs(){return(Vs=(0,m.Z)(function*(v,h){const g=yield Nt(v,{},(0,m.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=v.config,$=Sr(v,S,"/v1/token",`key=${N}`),X=yield v._getAdditionalHeaders();return X["Content-Type"]="application/x-www-form-urlencoded",We.fetch()($,{method:"POST",headers:X,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class ln{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){re(h.idToken,"internal-error"),re(typeof h.idToken<"u","internal-error"),re(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function vi(v){const h=Xe(v);return re(h,"internal-error"),re(typeof h.exp<"u","internal-error"),re(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var w=this;return(0,m.Z)(function*(){return re(!w.accessToken||w.refreshToken,h,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var w=this;return(0,m.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:$}=yield function $n(v,h){return Vs.apply(this,arguments)}(h,g);w.updateTokensAndExpiration(S,N,Number($))})()}updateTokensAndExpiration(h,g,w){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,g){const{refreshToken:w,accessToken:S,expirationTime:N}=g,$=new ln;return w&&(re("string"==typeof w,"internal-error",{appName:h}),$.refreshToken=w),S&&(re("string"==typeof S,"internal-error",{appName:h}),$.accessToken=S),N&&(re("number"==typeof N,"internal-error",{appName:h}),$.expirationTime=N),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new ln,this.toJSON())}_performRefresh(){return Ke("not implemented")}}function Hn(v,h){re("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class Ot{constructor(h){var{uid:g,auth:w,stsTokenManager:S}=h,N=(0,ie._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new vs(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,m.Z)(function*(){const w=yield Pn(g,g.stsTokenManager.getToken(g.auth,h));return re(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(h){return function yr(v){return en.apply(this,arguments)}(this,h)}reload(){return function $t(v){return Us.apply(this,arguments)}(this)}_assign(h){this!==h&&(re(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new Ot(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var w=this;return(0,m.Z)(function*(){let S=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),S=!0),g&&(yield sn(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,m.Z)(function*(){const g=yield h.getIdToken();return yield Pn(h,function yi(v,h){return Sn.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var w,S,N,$,X,Re,He,st;const ot=null!==(w=g.displayName)&&void 0!==w?w:void 0,_n=null!==(S=g.email)&&void 0!==S?S:void 0,Zi=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,Ua=null!==($=g.photoURL)&&void 0!==$?$:void 0,Va=null!==(X=g.tenantId)&&void 0!==X?X:void 0,Qo=null!==(Re=g._redirectEventId)&&void 0!==Re?Re:void 0,xd=null!==(He=g.createdAt)&&void 0!==He?He:void 0,dg=null!==(st=g.lastLoginAt)&&void 0!==st?st:void 0,{uid:Jo,emailVerified:To,isAnonymous:by,providerData:df,stsTokenManager:Sy}=g;re(Jo&&Sy,h,"internal-error");const Qv=ln.fromJSON(this.name,Sy);re("string"==typeof Jo,h,"internal-error"),Hn(ot,h.name),Hn(_n,h.name),re("boolean"==typeof To,h,"internal-error"),re("boolean"==typeof by,h,"internal-error"),Hn(Zi,h.name),Hn(Ua,h.name),Hn(Va,h.name),Hn(Qo,h.name),Hn(xd,h.name),Hn(dg,h.name);const hg=new Ot({uid:Jo,auth:h,email:_n,emailVerified:To,displayName:ot,isAnonymous:by,photoURL:Ua,phoneNumber:Zi,tenantId:Va,stsTokenManager:Qv,createdAt:xd,lastLoginAt:dg});return df&&Array.isArray(df)&&(hg.providerData=df.map(Ay=>Object.assign({},Ay))),Qo&&(hg._redirectEventId=Qo),hg}static _fromIdTokenResponse(h,g,w=!1){return(0,m.Z)(function*(){const S=new ln;S.updateFromServerResponse(g);const N=new Ot({uid:g.localId,auth:h,stsTokenManager:S,isAnonymous:w});return yield sn(N),N})()}}const Ei=new Map;function zn(v){Yt(v instanceof Function,"Expected a class definition");let h=Ei.get(v);return h?(Yt(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,Ei.set(v,h),h)}const Ui=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,w){var S=this;return(0,m.Z)(function*(){S.storage[g]=w})()}_get(g){var w=this;return(0,m.Z)(function*(){const S=w.storage[g];return void 0===S?null:S})()}_remove(g){var w=this;return(0,m.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return v.type="NONE",v})();function j(v,h,g){return`firebase:${v}:${h}:${g}`}class V{constructor(h,g,w){this.persistence=h,this.auth=g,this.userKey=w;const{config:S,name:N}=this.auth;this.fullUserKey=j(this.userKey,S.apiKey,N),this.fullPersistenceKey=j("persistence",S.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?Ot._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,m.Z)(function*(){if(g.persistence===h)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,w="authUser"){return(0,m.Z)(function*(){if(!g.length)return new V(zn(Ui),h,w);const S=(yield Promise.all(g.map(function(){var He=(0,m.Z)(function*(st){if(yield st._isAvailable())return st});return function(st){return He.apply(this,arguments)}}()))).filter(He=>He);let N=S[0]||zn(Ui);const $=j(w,h.config.apiKey,h.name);let X=null;for(const He of g)try{const st=yield He._get($);if(st){const ot=Ot._fromJSON(h,st);He!==N&&(X=ot),N=He;break}}catch{}const Re=S.filter(He=>He._shouldAllowMigration);return N._shouldAllowMigration&&Re.length?(N=Re[0],X&&(yield N._set($,X.toJSON())),yield Promise.all(g.map(function(){var He=(0,m.Z)(function*(st){if(st!==N)try{yield st._remove($)}catch{}});return function(st){return He.apply(this,arguments)}}())),new V(N,h,w)):new V(N,h,w)})()}}function q(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ye(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ge(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(tr(h))return"Blackberry";if(On(h))return"Webos";if(ee(h))return"Safari";if((h.includes("chrome/")||Je(h))&&!h.includes("edge/"))return"Chrome";if(Ht(h))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function ge(v=(0,L.z$)()){return/firefox\//i.test(v)}function ee(v=(0,L.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Je(v=(0,L.z$)()){return/crios\//i.test(v)}function Ye(v=(0,L.z$)()){return/iemobile/i.test(v)}function Ht(v=(0,L.z$)()){return/android/i.test(v)}function tr(v=(0,L.z$)()){return/blackberry/i.test(v)}function On(v=(0,L.z$)()){return/webos/i.test(v)}function Gn(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function ws(v=(0,L.z$)()){return Gn(v)||Ht(v)||On(v)||tr(v)||/windows phone/i.test(v)||Ye(v)}function de(v,h=[]){let g;switch(v){case"Browser":g=q((0,L.z$)());break;case"Worker":g=`${q((0,L.z$)())}-${v}`;break;default:g=v}const w=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${w}`}function Pe(){return(Pe=(0,m.Z)(function*(v){return(yield Ft(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ht(v,h){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,m.Z)(function*(v,h){return Ft(v,"GET","/v2/recaptchaConfig",it(v,h))})).apply(this,arguments)}function Ut(v){return void 0!==v&&void 0!==v.getResponse}function tn(v){return void 0!==v&&void 0!==v.enterprise}class _r{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function ir(v){return new Promise((h,g)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=h,w.onerror=S=>{const N=fe("internal-error");N.customData=S,g(N)},w.type="text/javascript",w.charset="UTF-8",function rr(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(w)})}function ua(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Eh{constructor(h){this.type="recaptcha-enterprise",this.auth=Wn(h)}verify(h="verify",g=!1){var w=this;return(0,m.Z)(function*(){function N(){return N=(0,m.Z)(function*(X){if(!g){if(null==X.tenantId&&null!=X._agentRecaptchaConfig)return X._agentRecaptchaConfig.siteKey;if(null!=X.tenantId&&void 0!==X._tenantRecaptchaConfigs[X.tenantId])return X._tenantRecaptchaConfigs[X.tenantId].siteKey}return new Promise(function(){var Re=(0,m.Z)(function*(He,st){ht(X,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ot=>{if(void 0!==ot.recaptchaKey){const _n=new _r(ot);return null==X.tenantId?X._agentRecaptchaConfig=_n:X._tenantRecaptchaConfigs[X.tenantId]=_n,He(_n.siteKey)}st(new Error("recaptcha Enterprise site key undefined"))}).catch(ot=>{st(ot)})});return function(He,st){return Re.apply(this,arguments)}}())}),N.apply(this,arguments)}function $(X,Re,He){const st=window.grecaptcha;tn(st)?st.enterprise.ready(()=>{st.enterprise.execute(X,{action:h}).then(ot=>{Re(ot)}).catch(()=>{Re("NO_RECAPTCHA")})}):He(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((X,Re)=>{(function S(X){return N.apply(this,arguments)})(w.auth).then(He=>{if(!g&&tn(window.grecaptcha))$(He,X,Re);else{if(typeof window>"u")return void Re(new Error("RecaptchaVerifier is only supported in browser"));ir("https://www.google.com/recaptcha/enterprise.js?render="+He).then(()=>{$(He,X,Re)}).catch(st=>{Re(st)})}}).catch(He=>{Re(He)})})})()}}function ns(v,h,g){return fc.apply(this,arguments)}function fc(){return(fc=(0,m.Z)(function*(v,h,g,w=!1){const S=new Eh(v);let N;try{N=yield S.verify(g)}catch{N=yield S.verify(g,!0)}const $=Object.assign({},h);return Object.assign($,w?{captchaResp:N}:{captchaResponse:N}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}class Oo{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const w=N=>new Promise(($,X)=>{try{$(h(N))}catch(Re){X(Re)}});w.onAbort=g,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,m.Z)(function*(){if(g.auth.currentUser===h)return;const w=[];try{for(const S of g.queue)yield S(h),S.onAbort&&w.push(S.onAbort)}catch(S){w.reverse();for(const N of w)try{N()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Ih{constructor(h,g,w,S){this.app=h,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=w,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bs(this),this.idTokenSubscription=new Bs(this),this.beforeStateQueue=new Oo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ce,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(h,g){var w=this;return g&&(this._popupRedirectResolver=zn(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var S,N;if(!w._deleted&&(w.persistenceManager=yield V.create(w,h),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,m.Z)(function*(){var w;const S=yield g.assertedPersistence.getCurrentUser();let N=S,$=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const X=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Re=N?._redirectEventId,He=yield g.tryRedirectSignIn(h);(!X||X===Re)&&He?.user&&(N=He.user,$=!0)}if(!N)return g.directlySetCurrentUser(null);if(!N._redirectEventId){if($)try{yield g.beforeStateQueue.runMiddleware(N)}catch(X){N=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(X))}return N?g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)}return re(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var g=this;return(0,m.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,m.Z)(function*(){try{yield sn(h)}catch(w){if("auth/network-request-failed"!==w?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function _e(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,m.Z)(function*(){const w=h?(0,L.m9)(h):null;return w&&re(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(h,g=!1){var w=this;return(0,m.Z)(function*(){if(!w._deleted)return h&&re(w.tenantId===h.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(h)),w.queue((0,m.Z)(function*(){yield w.directlySetCurrentUser(h),w.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(zn(h))}))}initializeRecaptchaConfig(){var h=this;return(0,m.Z)(function*(){const g=yield ht(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new _r(g);null==h.tenantId?h._agentRecaptchaConfig=w:h._tenantRecaptchaConfigs[h.tenantId]=w,w.emailPasswordEnabled&&new Eh(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new L.LL("auth","Firebase",h())}onAuthStateChanged(h,g,w){return this.registerStateListener(this.authStateSubscription,h,g,w)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,w){return this.registerStateListener(this.idTokenSubscription,h,g,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var w=this;return(0,m.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(g);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const w=h&&zn(h)||g._popupRedirectResolver;re(w,g,"argument-error"),g.redirectPersistenceManager=yield V.create(g,[zn(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,m.Z)(function*(){var w,S;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===h?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,m.Z)(function*(){if(h===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,w,S){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),$=this._isInitialized?Promise.resolve():this._initializationPromise;return re($,this,"internal-error"),$.then(()=>N(this.currentUser)),"function"==typeof g?h.addObserver(g,w,S):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=de(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var g;const w={"X-Client-Version":h.clientVersion};h.app.options.appId&&(w["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();S&&(w["X-Firebase-Client"]=S);const N=yield h._getAppCheckToken();return N&&(w["X-Firebase-AppCheck"]=N),w})()}_getAppCheckToken(){var h=this;return(0,m.Z)(function*(){var g;const w=yield null===(g=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return w?.error&&function ze(v,...h){Oe.logLevel<=oe.in.WARN&&Oe.warn(`Auth (${se.SDK_VERSION}): ${v}`,...h)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function Wn(v){return(0,L.m9)(v)}class Bs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ao(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function Bl(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class uo{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return Ke("not implemented")}_getIdTokenResponse(h){return Ke("not implemented")}_linkToIdToken(h,g){return Ke("not implemented")}_getReauthenticationResolver(h){return Ke("not implemented")}}function on(v,h){return sr.apply(this,arguments)}function sr(){return(sr=(0,m.Z)(function*(v,h){return Ft(v,"POST","/v1/accounts:resetPassword",it(v,h))})).apply(this,arguments)}function Yr(v,h){return ko.apply(this,arguments)}function ko(){return(ko=(0,m.Z)(function*(v,h){return Ft(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function gc(){return(gc=(0,m.Z)(function*(v,h){return Ft(v,"POST","/v1/accounts:update",it(v,h))})).apply(this,arguments)}function Ar(v,h){return la.apply(this,arguments)}function la(){return(la=(0,m.Z)(function*(v,h){return Gt(v,"POST","/v1/accounts:signInWithPassword",it(v,h))})).apply(this,arguments)}function mc(v,h){return jl.apply(this,arguments)}function jl(){return(jl=(0,m.Z)(function*(v,h){return Ft(v,"POST","/v1/accounts:sendOobCode",it(v,h))})).apply(this,arguments)}function et(){return(et=(0,m.Z)(function*(v,h){return mc(v,h)})).apply(this,arguments)}function Rt(v,h){return En.apply(this,arguments)}function En(){return(En=(0,m.Z)(function*(v,h){return mc(v,h)})).apply(this,arguments)}function Ci(v,h){return rs.apply(this,arguments)}function rs(){return(rs=(0,m.Z)(function*(v,h){return mc(v,h)})).apply(this,arguments)}function co(){return(co=(0,m.Z)(function*(v,h){return mc(v,h)})).apply(this,arguments)}function Lo(){return(Lo=(0,m.Z)(function*(v,h){return Gt(v,"POST","/v1/accounts:signInWithEmailLink",it(v,h))})).apply(this,arguments)}function Pt(){return(Pt=(0,m.Z)(function*(v,h){return Gt(v,"POST","/v1/accounts:signInWithEmailLink",it(v,h))})).apply(this,arguments)}class lo extends uo{constructor(h,g,w,S=null){super("password",w),this._email=h,this._password=g,this._tenantId=S}static _fromEmailAndPassword(h,g){return new lo(h,g,"password")}static _fromEmailAndCode(h,g,w=null){return new lo(h,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,m.Z)(function*(){var w;switch(g.signInMethod){case"password":const S={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=h._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const N=yield ns(h,S,"signInWithPassword");return Ar(h,N)}return Ar(h,S).catch(function(){var N=(0,m.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const X=yield ns(h,S,"signInWithPassword");return Ar(h,X)}return Promise.reject($)});return function($){return N.apply(this,arguments)}}());case"emailLink":return function In(v,h){return Lo.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:we(h,"internal-error")}})()}_linkToIdToken(h,g){var w=this;return(0,m.Z)(function*(){switch(w.signInMethod){case"password":return Yr(h,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function da(v,h){return Pt.apply(this,arguments)}(h,{idToken:g,email:w._email,oobCode:w._password});default:we(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Di(v,h){return ho.apply(this,arguments)}function ho(){return(ho=(0,m.Z)(function*(v,h){return Gt(v,"POST","/v1/accounts:signInWithIdp",it(v,h))})).apply(this,arguments)}class ii extends uo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new ii(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):we("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S}=g,N=(0,ie._T)(g,["providerId","signInMethod"]);if(!w||!S)return null;const $=new ii(w,S);return $.idToken=N.idToken||void 0,$.accessToken=N.accessToken||void 0,$.secret=N.secret,$.nonce=N.nonce,$.pendingToken=N.pendingToken||null,$}_getIdTokenResponse(h){return Di(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Di(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Di(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,L.xO)(g)}return h}}function si(){return(si=(0,m.Z)(function*(v,h){return Ft(v,"POST","/v1/accounts:sendVerificationCode",it(v,h))})).apply(this,arguments)}function $l(){return($l=(0,m.Z)(function*(v,h){return Gt(v,"POST","/v1/accounts:signInWithPhoneNumber",it(v,h))})).apply(this,arguments)}function is(){return(is=(0,m.Z)(function*(v,h){const g=yield Gt(v,"POST","/v1/accounts:signInWithPhoneNumber",it(v,h));if(g.temporaryProof)throw mr(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const uu={USER_NOT_FOUND:"user-not-found"};function Vt(){return(Vt=(0,m.Z)(function*(v,h){return Gt(v,"POST","/v1/accounts:signInWithPhoneNumber",it(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),uu)})).apply(this,arguments)}class Vi extends uo{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Vi({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Vi({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function Fo(v,h){return $l.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Uo(v,h){return is.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function yc(v,h){return Vt.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:w,verificationCode:S}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:w,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:N}=h;return w||g||S||N?new Vi({verificationId:g,verificationCode:w,phoneNumber:S,temporaryProof:N}):null}}class Ti{constructor(h){var g,w,S,N,$,X;const Re=(0,L.zd)((0,L.pd)(h)),He=null!==(g=Re.apiKey)&&void 0!==g?g:null,st=null!==(w=Re.oobCode)&&void 0!==w?w:null,ot=function Dh(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Re.mode)&&void 0!==S?S:null);re(He&&st&&ot,"argument-error"),this.apiKey=He,this.operation=ot,this.code=st,this.continueUrl=null!==(N=Re.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==($=Re.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(X=Re.tenantId)&&void 0!==X?X:null}static parseLink(h){const g=function cu(v){const h=(0,L.zd)((0,L.pd)(v)).link,g=h?(0,L.zd)((0,L.pd)(h)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||g||h||v}(h);try{return new Ti(g)}catch{return null}}}let Vo=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,w){return lo._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const S=Ti.parseLink(w);return re(S,"argument-error"),lo._fromEmailAndCode(g,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class bi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class kn extends bi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class fo extends kn{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return re("providerId"in g&&"signInMethod"in g,"argument-error"),ii._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return re(h.idToken||h.accessToken,"argument-error"),ii._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return fo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return fo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:N,nonce:$,providerId:X}=h;if(!w&&!S&&!g&&!N||!X)return null;try{return new fo(X)._credential({idToken:g,accessToken:w,nonce:$,pendingToken:N})}catch{return null}}}let oi=(()=>{class v extends kn{constructor(){super("facebook.com")}static credential(g){return ii._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ur=(()=>{class v extends kn{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return ii._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:S}=g;if(!w&&!S)return null;try{return v.credential(w,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),_c=(()=>{class v extends kn{constructor(){super("github.com")}static credential(g){return ii._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Bi extends uo{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Di(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Di(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Di(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:S,pendingToken:N}=g;return w&&S&&N&&w===S?new Bi(w,N):null}static _create(h,g){return new Bi(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fa extends bi{constructor(h){re(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return fa.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return fa.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Bi.fromJSON(h);return re(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:w}=h;if(!g||!w)return null;try{return Bi._create(w,g)}catch{return null}}}let Hl=(()=>{class v extends kn{constructor(){super("twitter.com")}static credential(g,w){return ii._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=g;if(!w||!S)return null;try{return v.credential(w,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function lu(v,h){return jo.apply(this,arguments)}function jo(){return(jo=(0,m.Z)(function*(v,h){return Gt(v,"POST","/v1/accounts:signUp",it(v,h))})).apply(this,arguments)}class ai{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,w,S=!1){return(0,m.Z)(function*(){const N=yield Ot._fromIdTokenResponse(h,w,S),$=pa(w);return new ai({user:N,providerId:$,_tokenResponse:w,operationType:g})})()}static _forOperation(h,g,w){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const S=pa(w);return new ai({user:h,providerId:S,_tokenResponse:w,operationType:g})})()}}function pa(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function bh(){return(bh=(0,m.Z)(function*(v){var h;const g=Wn(v);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new ai({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield lu(g,{returnSecureToken:!0}),S=yield ai._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class vc extends L.ZR{constructor(h,g,w,S){var N;super(g.code,g.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,vc.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,g,w,S){return new vc(h,g,w,S)}}function Ap(v,h,g,w){return("reauthenticate"===h?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?vc._fromErrorAndOperation(v,N,h,w):N})}function xp(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function Is(){return Is=(0,m.Z)(function*(v,h){const g=(0,L.m9)(v);yield du(!0,g,h);const{providerUserInfo:w}=yield function Fs(v,h){return so.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),S=xp(w||[]);return g.providerData=g.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),Is.apply(this,arguments)}function zl(v,h){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,m.Z)(function*(v,h,g=!1){const w=yield Pn(v,h._linkToIdToken(v.auth,yield v.getIdToken()),g);return ai._forOperation(v,"link",w)})).apply(this,arguments)}function du(v,h,g){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,m.Z)(function*(v,h,g){yield sn(h);const S=!1===v?"provider-already-linked":"no-such-provider";re(xp(h.providerData).has(g)===v,h.auth,S)})).apply(this,arguments)}function Wl(v,h){return hu.apply(this,arguments)}function hu(){return(hu=(0,m.Z)(function*(v,h,g=!1){const{auth:w}=v,S="reauthenticate";try{const N=yield Pn(v,Ap(w,S,h,v),g);re(N.idToken,w,"internal-error");const $=Xe(N.idToken);re($,w,"internal-error");const{sub:X}=$;return re(v.uid===X,w,"user-mismatch"),ai._forOperation(v,S,N)}catch(N){throw"auth/user-not-found"===N?.code&&we(w,"user-mismatch"),N}})).apply(this,arguments)}function Ah(v,h){return xh.apply(this,arguments)}function xh(){return(xh=(0,m.Z)(function*(v,h,g=!1){const w="signIn",S=yield Ap(v,w,h),N=yield ai._fromIdTokenResponse(v,w,S);return g||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function ql(v,h){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,m.Z)(function*(v,h){return Ah(Wn(v),h)})).apply(this,arguments)}function Rh(v,h){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,m.Z)(function*(v,h){const g=(0,L.m9)(v);return yield du(!1,g,h.providerId),zl(g,h)})).apply(this,arguments)}function Cn(v,h){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,m.Z)(function*(v,h){return Wl((0,L.m9)(v),h)})).apply(this,arguments)}function Rp(){return(Rp=(0,m.Z)(function*(v,h){return Gt(v,"POST","/v1/accounts:signInWithCustomToken",it(v,h))})).apply(this,arguments)}function js(){return js=(0,m.Z)(function*(v,h){const g=Wn(v),w=yield function ay(v,h){return Rp.apply(this,arguments)}(g,{token:h,returnSecureToken:!0}),S=yield ai._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(S.user),S}),js.apply(this,arguments)}class wc{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?ui._fromServerResponse(h,g):"totpInfo"in g?fu._fromServerResponse(h,g):we(h,"internal-error")}}class ui extends wc{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new ui(g)}}class fu extends wc{constructor(h){super("totp",h)}static _fromServerResponse(h,g){return new fu(g)}}function An(v,h,g){var w;re((null===(w=g.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),re(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(re(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(re(g.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function pu(){return pu=(0,m.Z)(function*(v,h,g){var w;const S=Wn(v),N={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const $=yield ns(S,N,"getOobCode",!0);g&&An(S,$,g),yield Rt(S,$)}else g&&An(S,N,g),yield Rt(S,N).catch(function(){var $=(0,m.Z)(function*(X){if("auth/missing-recaptcha-token"!==X.code)return Promise.reject(X);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Re=yield ns(S,N,"getOobCode",!0);g&&An(S,Re,g),yield Rt(S,Re)}});return function(X){return $.apply(this,arguments)}}())}),pu.apply(this,arguments)}function gu(){return(gu=(0,m.Z)(function*(v,h,g){yield on((0,L.m9)(v),{oobCode:h,newPassword:g})})).apply(this,arguments)}function Si(){return Si=(0,m.Z)(function*(v,h){yield function wn(v,h){return gc.apply(this,arguments)}((0,L.m9)(v),{oobCode:h})}),Si.apply(this,arguments)}function Nh(v,h){return mu.apply(this,arguments)}function mu(){return(mu=(0,m.Z)(function*(v,h){const g=(0,L.m9)(v),w=yield on(g,{oobCode:h}),S=w.requestType;switch(re(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(w.mfaInfo,g,"internal-error");default:re(w.email,g,"internal-error")}let N=null;return w.mfaInfo&&(N=wc._fromServerResponse(Wn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function ma(){return(ma=(0,m.Z)(function*(v,h){const{data:g}=yield Nh((0,L.m9)(v),h);return g.email})).apply(this,arguments)}function Ec(){return Ec=(0,m.Z)(function*(v,h,g){var w;const S=Wn(v),N={returnSecureToken:!0,email:h,password:g,clientType:"CLIENT_TYPE_WEB"};let $;if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const He=yield ns(S,N,"signUpPassword");$=lu(S,He)}else $=lu(S,N).catch(function(){var He=(0,m.Z)(function*(st){if("auth/missing-recaptcha-token"===st.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ot=yield ns(S,N,"signUpPassword");return lu(S,ot)}return Promise.reject(st)});return function(st){return He.apply(this,arguments)}}());const X=yield $.catch(He=>Promise.reject(He)),Re=yield ai._fromIdTokenResponse(S,"signIn",X);return yield S._updateCurrentUser(Re.user),Re}),Ec.apply(this,arguments)}function Jl(){return Jl=(0,m.Z)(function*(v,h,g){var w;const S=Wn(v),N={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function $(X,Re){re(Re.handleCodeInApp,S,"argument-error"),Re&&An(S,X,Re)}if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const X=yield ns(S,N,"getOobCode",!0);$(X,g),yield Ci(S,X)}else $(N,g),yield Ci(S,N).catch(function(){var X=(0,m.Z)(function*(Re){if("auth/missing-recaptcha-token"!==Re.code)return Promise.reject(Re);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const He=yield ns(S,N,"getOobCode",!0);$(He,g),yield Ci(S,He)}});return function(Re){return X.apply(this,arguments)}}())}),Jl.apply(this,arguments)}function Mh(){return(Mh=(0,m.Z)(function*(v,h,g){const w=(0,L.m9)(v),S=Vo.credentialWithLink(h,g||br());return re(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),ql(w,S)})).apply(this,arguments)}function Xl(){return(Xl=(0,m.Z)(function*(v,h){return Ft(v,"POST","/v1/accounts:createAuthUri",it(v,h))})).apply(this,arguments)}function ed(){return ed=(0,m.Z)(function*(v,h){const w={identifier:h,continueUri:mi()?br():"http://localhost"},{signinMethods:S}=yield function Ic(v,h){return Xl.apply(this,arguments)}((0,L.m9)(v),w);return S||[]}),ed.apply(this,arguments)}function vu(){return vu=(0,m.Z)(function*(v,h){const g=(0,L.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&An(g.auth,S,h);const{email:N}=yield function qn(v,h){return et.apply(this,arguments)}(g.auth,S);N!==v.email&&(yield v.reload())}),vu.apply(this,arguments)}function ya(){return ya=(0,m.Z)(function*(v,h,g){const w=(0,L.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};g&&An(w.auth,N,g);const{email:$}=yield function Fr(v,h){return co.apply(this,arguments)}(w.auth,N);$!==v.email&&(yield v.reload())}),ya.apply(this,arguments)}function ji(){return(ji=(0,m.Z)(function*(v,h){return Ft(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function wu(){return wu=(0,m.Z)(function*(v,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const w=(0,L.m9)(v),N={idToken:yield w.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},$=yield Pn(w,function Oh(v,h){return ji.apply(this,arguments)}(w.auth,N));w.displayName=$.displayName||null,w.photoURL=$.photoUrl||null;const X=w.providerData.find(({providerId:Re})=>"password"===Re);X&&(X.displayName=w.displayName,X.photoURL=w.photoURL),yield w._updateTokensIfNecessary($)}),wu.apply(this,arguments)}function Cc(v,h,g){return xr.apply(this,arguments)}function xr(){return(xr=(0,m.Z)(function*(v,h,g){const{auth:w}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(N.email=h),g&&(N.password=g);const $=yield Pn(v,Yr(w,N));yield v._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class po{constructor(h,g,w={}){this.isNewUser=h,this.providerId=g,this.profile=w}}class _a extends po{constructor(h,g,w,S){super(h,g,w),this.username=S}}class Qr extends po{constructor(h,g){super(h,"facebook.com",g)}}class Dc extends _a{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Eu extends po{constructor(h,g){super(h,"google.com",g)}}class rd extends _a{constructor(h,g,w){super(h,"twitter.com",g,w)}}function $i(v){const{user:h,_tokenResponse:g}=v;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Op(v){var h,g;if(!v)return null;const{providerId:w}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const $=null===(g=null===(h=Xe(v.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if($)return new po(N,"anonymous"!==$&&"custom"!==$?$:null)}if(!w)return null;switch(w){case"facebook.com":return new Qr(N,S);case"github.com":return new Dc(N,S);case"google.com":return new Eu(N,S);case"twitter.com":return new rd(N,S,v.screenName||null);case"custom":case"anonymous":return new po(N,null);default:return new po(N,w,S)}}(g)}class $s{constructor(h,g,w){this.type=h,this.credential=g,this.auth=w}static _fromIdtoken(h,g){return new $s("enroll",h,g)}static _fromMfaPendingCredential(h){return new $s("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,w;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return $s._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(w=h.multiFactorSession)&&void 0!==w&&w.idToken)return $s._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Ho{constructor(h,g,w){this.session=h,this.hints=g,this.signInResolver=w}static _fromError(h,g){const w=Wn(h),S=g.customData._serverResponse,N=(S.mfaInfo||[]).map(X=>wc._fromServerResponse(w,X));re(S.mfaPendingCredential,w,"internal-error");const $=$s._fromMfaPendingCredential(S.mfaPendingCredential);return new Ho($,N,function(){var X=(0,m.Z)(function*(Re){const He=yield Re._process(w,$);delete S.mfaInfo,delete S.mfaPendingCredential;const st=Object.assign(Object.assign({},S),{idToken:He.idToken,refreshToken:He.refreshToken});switch(g.operationType){case"signIn":const ot=yield ai._fromIdTokenResponse(w,g.operationType,st);return yield w._updateCurrentUser(ot.user),ot;case"reauthenticate":return re(g.user,w,"internal-error"),ai._forOperation(g.user,g.operationType,st);default:we(w,"internal-error")}});return function(Re){return X.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,m.Z)(function*(){return g.signInResolver(h)})()}}class Iu{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>wc._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new Iu(h)}getSession(){var h=this;return(0,m.Z)(function*(){return $s._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var w=this;return(0,m.Z)(function*(){const S=h,N=yield w.getSession(),$=yield Pn(w.user,S._process(w.user.auth,N,g));return yield w.user._updateTokensIfNecessary($),w.user.reload()})()}unenroll(h){var g=this;return(0,m.Z)(function*(){const w="string"==typeof h?h:h.uid,S=yield g.user.getIdToken();try{const N=yield Pn(g.user,function Vp(v,h){return Ft(v,"POST","/v2/accounts/mfaEnrollment:withdraw",it(v,h))}(g.user.auth,{idToken:S,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:$})=>$!==w),yield g.user._updateTokensIfNecessary(N),yield g.user.reload()}catch(N){throw N}})()}}const De=new WeakMap,wa="__sak";class Vh{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(wa,"1"),this.storage.removeItem(wa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Hs=(()=>{class v extends Vh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Br(){const v=(0,L.z$)();return ee(v)||Gn(v)}()&&function Po(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ws(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),N=this.localCache[w];S!==N&&g(w,N,S)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((X,Re,He)=>{this.notifyListeners(X,He)});const S=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const X=this.storage.getItem(S);if(g.newValue!==X)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!w)return}const N=()=>{const X=this.storage.getItem(S);!w&&this.localCache[S]===X||this.notifyListeners(S,X)},$=this.storage.getItem(S);!function ts(){return(0,L.w1)()&&10===document.documentMode}()||$===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var S=()=>super._set,N=this;return(0,m.Z)(function*(){yield S().call(N,g,w),N.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,S=this;return(0,m.Z)(function*(){const N=yield w().call(S,g);return S.localCache[g]=JSON.stringify(N),N})()}_remove(g){var w=()=>super._remove,S=this;return(0,m.Z)(function*(){yield w().call(S,g),delete S.localCache[g]})()}}return v.type="LOCAL",v})(),mo=(()=>{class v extends Vh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return v.type="SESSION",v})();let Ac=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(N=>N.isListeningto(g));if(w)return w;const S=new v(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,m.Z)(function*(){const S=g,{eventId:N,eventType:$,data:X}=S.data,Re=w.handlersMap[$];if(!Re?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:$});const He=Array.from(Re).map(function(){var ot=(0,m.Z)(function*(_n){return _n(S.origin,X)});return function(_n){return ot.apply(this,arguments)}}()),st=yield function $v(v){return Promise.all(v.map(function(){var h=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return h.apply(this,arguments)}}()))}(He);S.ports[0].postMessage({status:"done",eventId:N,eventType:$,response:st})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function vr(v="",h=10){let g="";for(let w=0;w<h;w++)g+=Math.floor(10*Math.random());return v+g}class Go{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,w=50){var S=this;return(0,m.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let $,X;return new Promise((Re,He)=>{const st=vr("",20);N.port1.start();const ot=setTimeout(()=>{He(new Error("unsupported_event"))},w);X={messageChannel:N,onMessage(_n){const Zi=_n;if(Zi.data.eventId===st)switch(Zi.data.status){case"ack":clearTimeout(ot),$=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout($),Re(Zi.data.response);break;default:clearTimeout(ot),clearTimeout($),He(new Error("invalid_response"))}}},S.handlers.add(X),N.port1.addEventListener("message",X.onMessage),S.target.postMessage({eventType:h,eventId:st,data:g},[N.port2])}).finally(()=>{X&&S.removeMessageHandler(X)})})()}}function xn(){return window}function Ds(){return typeof xn().WorkerGlobalScope<"u"&&"function"==typeof xn().importScripts}function xc(){return(xc=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Rc="firebaseLocalStorageDb",Ea="firebaseLocalStorage",Ia="fbase_key";class Cu{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Nc(v,h){return v.transaction([Ea],h?"readwrite":"readonly").objectStore(Ea)}function cd(){const v=indexedDB.open(Rc,1);return new Promise((h,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Ea,{keyPath:Ia})}catch(S){g(S)}}),v.addEventListener("success",(0,m.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Ea)?h(w):(w.close(),yield function ud(){const v=indexedDB.deleteDatabase(Rc);return new Cu(v).toPromise()}(),h(yield cd()))}))})}function Du(v,h,g){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,m.Z)(function*(v,h,g){const w=Nc(v,!0).put({[Ia]:h,value:g});return new Cu(w).toPromise()})).apply(this,arguments)}function Hi(){return(Hi=(0,m.Z)(function*(v,h){const g=Nc(v,!1).get(h),w=yield new Cu(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function jh(v,h){const g=Nc(v,!0).delete(h);return new Cu(g).toPromise()}const dn=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield cd()),g.db})()}_withRetries(g){var w=this;return(0,m.Z)(function*(){let S=0;for(;;)try{const N=yield w._openDb();return yield g(N)}catch(N){if(S++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return Ds()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=Ac._getInstance(function or(){return Ds()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,m.Z)(function*(S,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(S,N){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,m.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var w,S;if(g.activeServiceWorker=yield function Bp(){return xc.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Go(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);N&&null!==(w=N[0])&&void 0!==w&&w.fulfilled&&null!==(S=N[0])&&void 0!==S&&S.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,m.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function ad(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield cd();return yield Du(g,wa,"1"),yield jh(g,wa),!0}catch{}return!1})()}_withPendingWrite(g){var w=this;return(0,m.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var S=this;return(0,m.Z)(function*(){return S._withPendingWrite((0,m.Z)(function*(){return yield S._withRetries(N=>Du(N,g,w)),S.localCache[g]=w,S.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,m.Z)(function*(){const S=yield w._withRetries(N=>function bu(v,h){return Hi.apply(this,arguments)}(N,g));return w.localCache[g]=S,S})()}_remove(g){var w=this;return(0,m.Z)(function*(){return w._withPendingWrite((0,m.Z)(function*(){return yield w._withRetries(S=>jh(S,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const w=yield g._withRetries($=>{const X=Nc($,!1).getAll();return new Cu(X).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:$,value:X}of w)N.add($),JSON.stringify(g.localCache[$])!==JSON.stringify(X)&&(g.notifyListeners($,X),S.push($));for(const $ of Object.keys(g.localCache))g.localCache[$]&&!N.has($)&&(g.notifyListeners($,null),S.push($));return S})()}notifyListeners(g,w){this.localCache[g]=w;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Ca=1e12;class Mc{constructor(h){this.auth=h,this.counter=Ca,this._widgets=new Map}render(h,g){const w=this.counter;return this._widgets.set(w,new zs(h,this.auth.name,g||{})),this.counter++,w}reset(h){var g;const w=h||Ca;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Ca))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,m.Z)(function*(){var w;return null===(w=g._widgets.get(h||Ca))||void 0===w||w.execute(),""})()}}class zs{constructor(h,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;re(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ly(v){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)h.push(g.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Su=ua("rcb"),ld=new Ce(3e4,6e4);class Pc{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=xn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return re(function dd(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),h,"argument-error"),this.shouldResolveImmediately(g)&&Ut(xn().grecaptcha)?Promise.resolve(xn().grecaptcha):new Promise((w,S)=>{const N=xn().setTimeout(()=>{S(fe(h,"network-request-failed"))},ld.get());xn()[Su]=()=>{xn().clearTimeout(N),delete xn()[Su];const X=xn().grecaptcha;if(!X||!Ut(X))return void S(fe(h,"internal-error"));const Re=X.render;X.render=(He,st)=>{const ot=Re(He,st);return this.counter++,ot},this.hostLanguage=g,w(X)},ir(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Su,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),S(fe(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=xn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gp{load(h){return(0,m.Z)(function*(){return new Mc(h)})()}clearedOneInstance(){}}const hd="recaptcha",Au={theme:"light",type:"image"};class Ta{constructor(h,g=Object.assign({},Au),w){this.parameters=g,this.type=hd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Wn(w),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;re(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gp:new Pc,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(g)||new Promise(N=>{const $=X=>{X&&(h.tokenChangeListeners.delete($),N(X))};h.tokenChangeListeners.add($),h.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof h)h(g);else if("string"==typeof h){const w=xn()[h];"function"==typeof w&&w(g)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){re(mi()&&!Ds(),h.auth,"internal-error"),yield function dy(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function te(v){return Pe.apply(this,arguments)}(h.auth);re(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class fd{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Vi._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function zi(){return(zi=(0,m.Z)(function*(v,h,g){const w=Wn(v),S=yield mt(w,h,(0,L.m9)(g));return new fd(S,N=>ql(w,N))})).apply(this,arguments)}function Ru(){return(Ru=(0,m.Z)(function*(v,h,g){const w=(0,L.m9)(v);yield du(!1,w,"phone");const S=yield mt(w.auth,h,(0,L.m9)(g));return new fd(S,N=>Rh(w,N))})).apply(this,arguments)}function yo(){return(yo=(0,m.Z)(function*(v,h,g){const w=(0,L.m9)(v),S=yield mt(w.auth,h,(0,L.m9)(g));return new fd(S,N=>Cn(w,N))})).apply(this,arguments)}function mt(v,h,g){return Ai.apply(this,arguments)}function Ai(){return Ai=(0,m.Z)(function*(v,h,g){var w;const S=yield g.verify();try{let N;if(re("string"==typeof S,v,"argument-error"),re(g.type===hd,v,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const $=N.session;if("phoneNumber"in N)return re("enroll"===$.type,v,"internal-error"),(yield function go(v,h){return Ft(v,"POST","/v2/accounts/mfaEnrollment:start",it(v,h))}(v,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{re("signin"===$.type,v,"internal-error");const X=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return re(X,v,"missing-multi-factor-info"),(yield function $p(v,h){return Ft(v,"POST","/v2/accounts/mfaSignIn:start",it(v,h))}(v,{mfaPendingCredential:$.credential,mfaEnrollmentId:X,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function ha(v,h){return si.apply(this,arguments)}(v,{phoneNumber:N.phoneNumber,recaptchaToken:S});return $}}finally{g._reset()}}),Ai.apply(this,arguments)}function ba(){return(ba=(0,m.Z)(function*(v,h){yield zl((0,L.m9)(v),h)})).apply(this,arguments)}let Gs=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=Wn(g)}verifyPhoneNumber(g,w){return mt(this.auth,g,(0,L.m9)(w))}static credential(g,w){return Vi._fromVerification(g,w)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:S}=g;return w&&S?Vi._fromTokenResponse(w,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ts(v,h){return h?zn(h):(re(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class os extends uo{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Di(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Di(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Di(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function gd(v){return Ah(v.auth,new os(v),v.bypassAuthState)}function md(v){const{auth:h,user:g}=v;return re(g,h,"internal-error"),Wl(g,new os(v),v.bypassAuthState)}function Ws(v){return lt.apply(this,arguments)}function lt(){return(lt=(0,m.Z)(function*(v){const{auth:h,user:g}=v;return re(g,h,"internal-error"),zl(g,new os(v),v.bypassAuthState)})).apply(this,arguments)}class yd{constructor(h,g,w,S,N=!1){this.auth=h,this.resolver=w,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,m.Z)(function*(w,S){h.pendingPromise={resolve:w,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(w,S){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,m.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:N,tenantId:$,error:X,type:Re}=h;if(X)return void g.reject(X);const He={auth:g.auth,requestUri:w,sessionId:S,tenantId:$||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Re)(He))}catch(st){g.reject(st)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return gd;case"linkViaPopup":case"linkViaRedirect":return Ws;case"reauthViaPopup":case"reauthViaRedirect":return md;default:we(this.auth,"internal-error")}}resolve(h){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ri=new Ce(2e3,1e4);function _d(){return(_d=(0,m.Z)(function*(v,h,g){const w=Wn(v);Ee(v,h,bi);const S=Ts(w,g);return new Pu(w,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function Mu(){return(Mu=(0,m.Z)(function*(v,h,g){const w=(0,L.m9)(v);Ee(w.auth,h,bi);const S=Ts(w.auth,g);return new Pu(w.auth,"reauthViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}function Oc(){return(Oc=(0,m.Z)(function*(v,h,g){const w=(0,L.m9)(v);Ee(w.auth,h,bi);const S=Ts(w.auth,g);return new Pu(w.auth,"linkViaPopup",h,S,w).executeNotNull()})).apply(this,arguments)}let Pu=(()=>{class v extends yd{constructor(g,w,S,N,$){super(g,w,N,$),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const w=yield g.execute();return re(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,m.Z)(function*(){Yt(1===g.filter.length,"Popup operations only handle one event");const w=vr();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(fe(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(fe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,Ri.get())};g()}}return v.currentPopupAction=null,v})();const kc="pendingRedirect",_o=new Map;class Lc extends yd{constructor(h,g,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,m.Z)(function*(){let w=_o.get(g.auth._key());if(!w){try{const N=(yield function Sa(v,h){return bs.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;w=()=>Promise.resolve(N)}catch(S){w=()=>Promise.reject(S)}_o.set(g.auth._key(),w)}return g.bypassAuthState||_o.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,w=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(w,h);if("unknown"!==h.type){if(h.eventId){const S=yield w.auth._redirectUserForId(h.eventId);if(S)return w.user=S,g().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function bs(){return(bs=(0,m.Z)(function*(v,h){const g=ku(h),w=vo(v);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(g));return yield w._remove(g),S})).apply(this,arguments)}function Ou(v,h){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,m.Z)(function*(v,h){return vo(v)._set(ku(h),"true")})).apply(this,arguments)}function Gi(v,h){_o.set(v._key(),h)}function vo(v){return zn(v._redirectPersistence)}function ku(v){return j(kc,v.config.apiKey,v.name)}function ur(v,h,g){return function vd(v,h,g){return Lu.apply(this,arguments)}(v,h,g)}function Lu(){return(Lu=(0,m.Z)(function*(v,h,g){const w=Wn(v);Ee(v,h,bi),yield w._initializationPromise;const S=Ts(w,g);return yield Ou(S,w),S._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function Kn(v,h,g){return function as(v,h,g){return us.apply(this,arguments)}(v,h,g)}function us(){return(us=(0,m.Z)(function*(v,h,g){const w=(0,L.m9)(v);Ee(w.auth,h,bi),yield w.auth._initializationPromise;const S=Ts(w.auth,g);yield Ou(S,w.auth);const N=yield Mr(w);return S._openRedirect(w.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function jr(v,h,g){return function Jr(v,h,g){return wo.apply(this,arguments)}(v,h,g)}function wo(){return(wo=(0,m.Z)(function*(v,h,g){const w=(0,L.m9)(v);Ee(w.auth,h,bi),yield w.auth._initializationPromise;const S=Ts(w.auth,g);yield du(!1,w,h.providerId),yield Ou(S,w.auth);const N=yield Mr(w);return S._openRedirect(w.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function zh(){return(zh=(0,m.Z)(function*(v,h){return yield Wn(v)._initializationPromise,cs(v,h,!1)})).apply(this,arguments)}function cs(v,h){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,m.Z)(function*(v,h,g=!1){const w=Wn(v),S=Ts(w,h),$=yield new Lc(w,S,g).execute();return $&&!g&&(delete $.user._redirectEventId,yield w._persistUserIfCurrent($.user),yield w._setRedirectUser(null,h)),$})).apply(this,arguments)}function Mr(v){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,m.Z)(function*(v){const h=vr(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class Eo{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(g=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Wh(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Io(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var w;if(h.error&&!Io(h)){const S=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(fe(this.auth,S))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const w=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fu(h))}saveEventToCache(h){this.cachedEventUids.add(Fu(h)),this.lastProcessedEventTime=Date.now()}}function Fu(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function Io({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===h?.code}function qh(v){return dt.apply(this,arguments)}function dt(){return(dt=(0,m.Z)(function*(v,h={}){return Ft(v,"GET","/v1/projects",h)})).apply(this,arguments)}const Uc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uu=/^https?/;function cr(){return(cr=(0,m.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield qh(v);for(const g of h)try{if(Ra(g))return}catch{}we(v,"unauthorized-domain")})).apply(this,arguments)}function Ra(v){const h=br(),{protocol:g,hostname:w}=new URL(h);if(v.startsWith("chrome-extension://")){const $=new URL(v);return""===$.hostname&&""===w?"chrome-extension:"===g&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&$.hostname===w}if(!Uu.test(g))return!1;if(Uc.test(v))return w===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const ls=new Ce(3e4,6e4);function Na(){const v=xn().___jsl;if(v?.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let ds=null;const qp=new Ce(5e3,15e3),hy="__/auth/iframe",ci="emulator/auth/iframe",Vc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fy(v){const h=v.config;re(h.authDomain,v,"auth-domain-config-required");const g=h.emulator?Me(h,ci):`https://${v.config.authDomain}/${hy}`,w={apiKey:h.apiKey,appName:v.name,v:se.SDK_VERSION},S=Pa.get(v.config.apiHost);S&&(w.eid=S);const N=v._getFrameworks();return N.length&&(w.fw=N.join(",")),`${g}?${(0,L.xO)(w).slice(1)}`}function T(){return T=(0,m.Z)(function*(v){const h=yield function Ma(v){return ds=ds||function Wi(v){return new Promise((h,g)=>{var w,S,N;function $(){Na(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Na(),g(fe(v,"network-request-failed"))},timeout:ls.get()})}if(null!==(S=null===(w=xn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(N=xn().gapi)||void 0===N||!N.load){const X=ua("iframefcb");return xn()[X]=()=>{gapi.load?$():g(fe(v,"network-request-failed"))},ir(`https://apis.google.com/js/api.js?onload=${X}`).catch(Re=>g(Re))}$()}}).catch(h=>{throw ds=null,h})}(v),ds}(v),g=xn().gapi;return re(g,v,"internal-error"),h.open({where:document.body,url:fy(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vc,dontclear:!0},w=>new Promise(function(){var S=(0,m.Z)(function*(N,$){yield w.restyle({setHideOnLeave:!1});const X=fe(v,"network-request-failed"),Re=xn().setTimeout(()=>{$(X)},qp.get());function He(){xn().clearTimeout(Re),N(w)}w.ping(He).then(He,()=>{$(X)})});return function(N,$){return S.apply(this,arguments)}}()))}),T.apply(this,arguments)}const R={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ze{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const St="__/auth/handler",At="emulator/auth/handler",lr=encodeURIComponent("fac");function Yn(v,h,g,w,S,N){return As.apply(this,arguments)}function As(){return(As=(0,m.Z)(function*(v,h,g,w,S,N){re(v.config.authDomain,v,"auth-domain-config-required"),re(v.config.apiKey,v,"invalid-api-key");const $={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:w,v:se.SDK_VERSION,eventId:S};if(h instanceof bi){h.setDefaultLanguage(v.languageCode),$.providerId=h.providerId||"",(0,L.xb)(h.getCustomParameters())||($.customParameters=JSON.stringify(h.getCustomParameters()));for(const[st,ot]of Object.entries(N||{}))$[st]=ot}if(h instanceof kn){const st=h.getScopes().filter(ot=>""!==ot);st.length>0&&($.scopes=st.join(","))}v.tenantId&&($.tid=v.tenantId);const X=$;for(const st of Object.keys(X))void 0===X[st]&&delete X[st];const Re=yield v._getAppCheckToken(),He=Re?`#${lr}=${encodeURIComponent(Re)}`:"";return`${function Vu({config:v}){return v.emulator?Me(v,At):`https://${v.authDomain}/${St}`}(v)}?${(0,L.xO)(X).slice(1)}${He}`})).apply(this,arguments)}const qi="webStorageSupport",xs=class Xr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mo,this._completeRedirectFn=cs,this._overrideRedirectResult=Gi}_openPopup(h,g,w,S){var N=this;return(0,m.Z)(function*(){var $;Yt(null===($=N.eventManagers[h._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const X=yield Yn(h,g,w,br(),S);return function Be(v,h,g,w=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),$=Math.max((window.screen.availWidth-w)/2,0).toString();let X="";const Re=Object.assign(Object.assign({},R),{width:w.toString(),height:S.toString(),top:N,left:$}),He=(0,L.z$)().toLowerCase();g&&(X=Je(He)?"_blank":g),ge(He)&&(h=h||"http://localhost",Re.scrollbars="yes");const st=Object.entries(Re).reduce((_n,[Zi,Ua])=>`${_n}${Zi}=${Ua},`,"");if(function nr(v=(0,L.z$)()){var h;return Gn(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(He)&&"_self"!==X)return function ct(v,h){const g=document.createElement("a");g.href=v,g.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(h||"",X),new Ze(null);const ot=window.open(h||"",X,st);re(ot,v,"popup-blocked");try{ot.focus()}catch{}return new Ze(ot)}(h,X,vr())})()}_openRedirect(h,g,w,S){var N=this;return(0,m.Z)(function*(){return yield N._originValidation(h),function Wo(v){xn().location.href=v}(yield Yn(h,g,w,br(),S)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:S,promise:N}=this.eventManagers[g];return S?Promise.resolve(S):(Yt(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(h);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(h){var g=this;return(0,m.Z)(function*(){const w=yield function C(v){return T.apply(this,arguments)}(h),S=new Eo(h);return w.register("authEvent",N=>(re(N?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:S},g.iframes[h._key()]=w,S})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(qi,{type:qi},S=>{var N;const $=null===(N=S?.[0])||void 0===N?void 0:N[qi];void 0!==$&&g(!!$),we(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function xa(v){return cr.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return ws()||ee()||Gn()}};class wd{constructor(h){this.factorId=h}_process(h,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,w);case"signin":return this._finalizeSignIn(h,g.credential);default:return Ke("unexpected MultiFactorSessionType")}}}class Oa extends wd{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Oa(h)}_finalizeEnroll(h,g,w){return function Fp(v,h){return Ft(v,"POST","/v2/accounts/mfaEnrollment:finalize",it(v,h))}(h,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function cy(v,h){return Ft(v,"POST","/v2/accounts/mfaSignIn:finalize",it(v,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ed=(()=>{class v{constructor(){}static assertion(g){return Oa._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var Hv="@firebase/auth";class zv{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(w=>{h(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);g&&(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Bu(){return window}(0,L.Pz)("authIdTokenMaxAge"),function Yh(v){(0,se._registerComponent)(new me.wA("auth",(h,{options:g})=>{const w=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),N=h.getProvider("app-check-internal"),{apiKey:$,authDomain:X}=w.options;re($&&!$.includes(":"),"invalid-api-key",{appName:w.name});const Re={apiKey:$,authDomain:X,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:de(v)},He=new Ih(w,S,N,Re);return function bp(v,h){const g=h?.persistence||[],w=(Array.isArray(g)?g:[g]).map(zn);h?.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(w,h?.popupRedirectResolver)}(He,g),He},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,w)=>{h.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new me.wA("auth-internal",h=>{const g=Wn(h.getProvider("auth").getImmediate());return new zv(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(Hv,"0.23.2",function Gv(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,se.registerVersion)(Hv,"0.23.2","esm2017")}("Browser");function Ko(){return Ko=(0,m.Z)(function*(v,h,g){var w;const{BuildInfo:S}=Bu();Yt(h.sessionId,"AuthEvent did not contain a session ID");const N=yield function rC(v){return _y.apply(this,arguments)}(h.sessionId),$={};return Gn()?$.ibi=S.packageName:Ht()?$.apn=S.packageName:we(v,"operation-not-supported-in-this-environment"),S.displayName&&($.appDisplayName=S.displayName),$.sessionId=N,Yn(v,g,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,$)}),Ko.apply(this,arguments)}function Qp(){return(Qp=(0,m.Z)(function*(v){const{BuildInfo:h}=Bu(),g={};Gn()?g.iosBundleId=h.packageName:Ht()?g.androidPackageName=h.packageName:we(v,"operation-not-supported-in-this-environment"),yield qh(v,g)})).apply(this,arguments)}function Id(){return(Id=(0,m.Z)(function*(v,h,g){const{cordova:w}=Bu();let S=()=>{};try{yield new Promise((N,$)=>{let X=null;function Re(){var ot;N();const _n=null===(ot=w.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof _n&&_n(),"function"==typeof g?.close&&g.close()}function He(){X||(X=window.setTimeout(()=>{$(fe(v,"redirect-cancelled-by-user"))},2e3))}function st(){"visible"===document?.visibilityState&&He()}h.addPassiveListener(Re),document.addEventListener("resume",He,!1),Ht()&&document.addEventListener("visibilitychange",st,!1),S=()=>{h.removePassiveListener(Re),document.removeEventListener("resume",He,!1),document.removeEventListener("visibilitychange",st,!1),X&&window.clearTimeout(X)}})}finally{S()}})).apply(this,arguments)}function _y(){return(_y=(0,m.Z)(function*(v){const h=function vy(v){if(Yt(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const h=new ArrayBuffer(v.length),g=new Uint8Array(h);for(let w=0;w<v.length;w++)g[w]=v.charCodeAt(w);return g}(v),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Jp extends Eo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function ef(v){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,m.Z)(function*(v){const h=yield La()._get($r(v));return h&&(yield La()._remove($r(v))),h})).apply(this,arguments)}function hs(){const v=[];for(let g=0;g<20;g++){const w=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(w))}return v.join("")}function La(){return zn(Hs)}function $r(v){return j("authEvent",v.config.apiKey,v.name)}function $c(v){if(!v?.includes("?"))return{};const[h,...g]=v.split("?");return(0,L.zd)(g.join("?"))}const qv=class Xp{constructor(){this._redirectPersistence=mo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=cs,this._overrideRedirectResult=Gi}_initialize(h){var g=this;return(0,m.Z)(function*(){const w=h._key();let S=g.eventManagers.get(w);return S||(S=new Jp(h),g.eventManagers.set(w,S),g.attachCallbackListeners(h,S)),S})()}_openPopup(h){we(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,w,S){var N=this;return(0,m.Z)(function*(){!function nC(v){var h,g,w,S,N,$,X,Re,He,st;const ot=Bu();re("function"==typeof(null===(h=ot?.universalLinks)||void 0===h?void 0:h.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof(null===(g=ot?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(N=null===(S=null===(w=ot?.cordova)||void 0===w?void 0:w.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Re=null===(X=null===($=ot?.cordova)||void 0===$?void 0:$.plugins)||void 0===X?void 0:X.browsertab)||void 0===Re?void 0:Re.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(st=null===(He=ot?.cordova)||void 0===He?void 0:He.InAppBrowser)||void 0===st?void 0:st.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const $=yield N._initialize(h);yield $.initialized(),$.resetRedirect(),function Wp(){_o.clear()}(),yield N._originValidation(h);const X=function Xh(v,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:hs(),postBody:null,tenantId:v.tenantId,error:fe(v,"no-auth-event")}}(h,w,S);yield function wy(v,h){return La()._set($r(v),h)}(h,X);const Re=yield function Qh(v,h,g){return Ko.apply(this,arguments)}(h,X,g),He=yield function Jh(v){const{cordova:h}=Bu();return new Promise(g=>{h.plugins.browsertab.isAvailable(w=>{let S=null;w?h.plugins.browsertab.openUrl(v):S=h.InAppBrowser.open(v,function Lt(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(S)})})}(Re);return function tC(v,h,g){return Id.apply(this,arguments)}(h,$,He)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function yy(v){return Qp.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:w,handleOpenURL:S,BuildInfo:N}=Bu(),$=setTimeout((0,m.Z)(function*(){yield ef(h),g.onEvent(Iy())}),500),X=function(){var st=(0,m.Z)(function*(ot){clearTimeout($);const _n=yield ef(h);let Zi=null;_n&&ot?.url&&(Zi=function jc(v,h){var g,w;const S=function Cd(v){const h=$c(v),g=h.link?decodeURIComponent(h.link):void 0,w=$c(g).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return $c(S).link||S||w||g||v}(h);if(S.includes("/__/auth/callback")){const N=$c(S),$=N.firebaseError?function tf(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,X=null===(w=null===(g=$?.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Re=X?fe(X):null;return Re?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Re,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:S,postBody:null}}return null}(_n,ot.url)),g.onEvent(Zi||Iy())});return function(_n){return st.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,X);const Re=S,He=`${N.packageName.toLowerCase()}://`;Bu().handleOpenURL=function(){var st=(0,m.Z)(function*(ot){if(ot.toLowerCase().startsWith(He)&&X({url:ot}),"function"==typeof Re)try{Re(ot)}catch(_n){console.error(_n)}});return function(ot){return st.apply(this,arguments)}}()}};function Iy(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fe("no-auth-event")}}function Hr(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function tg(v=(0,L.z$)()){return!("file:"!==Hr()&&"ionic:"!==Hr()&&"capacitor:"!==Hr()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function rf(){try{const v=self.localStorage,h=vr();if(v)return v.setItem(h,"1"),v.removeItem(h),!function Hc(v=(0,L.z$)()){return function Ni(){return(0,L.w1)()&&11===document?.documentMode}()||function Dd(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch{return Td()&&(0,L.hl)()}return!1}function Td(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zc(){return(function eg(){return"http:"===Hr()||"https:"===Hr()}()||(0,L.ru)()||tg())&&!function nf(){return(0,L.b$)()||(0,L.UG)()}()&&rf()&&!Td()}function Co(){return tg()&&typeof document<"u"}function sf(){return(sf=(0,m.Z)(function*(){return!!Co()&&new Promise(v=>{const h=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),v(!0)})})})).apply(this,arguments)}const fs={LOCAL:"local",NONE:"none",SESSION:"session"},Rs=re,bd="persistence";function Gc(v){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,m.Z)(function*(v){yield v._initializationPromise;const h=sg(),g=j(bd,v.config.apiKey,v.name);h&&h.setItem(g,v._getPersistence())})).apply(this,arguments)}function sg(){var v;try{return(null===(v=function ng(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Sd=re;class Ns{constructor(){this.browserResolver=zn(xs),this.cordovaResolver=zn(qv),this.underlyingResolver=null,this._redirectPersistence=mo,this._completeRedirectFn=cs,this._overrideRedirectResult=Gi}_initialize(h){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,w,S){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,g,w,S)})()}_openRedirect(h,g,w,S){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,g,w,S)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Co()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const g=yield function ju(){return sf.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function Ad(v){return v.unwrap()}function $u(v){return af(v)}function af(v){const{_tokenResponse:h}=v instanceof L.ZR?v.customData:v;if(!h)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Gs.credentialFromResult(v);const g=h.providerId;if(!g||g===he.PASSWORD)return null;let w;switch(g){case he.GOOGLE:w=Ur;break;case he.FACEBOOK:w=oi;break;case he.GITHUB:w=_c;break;case he.TWITTER:w=Hl;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:$,pendingToken:X,nonce:Re}=h;return N||$||S||X?X?g.startsWith("saml.")?Bi._create(g,X):ii._fromParams({providerId:g,signInMethod:g,pendingToken:X,idToken:S,accessToken:N}):new fo(g).credential({idToken:S,accessToken:N,rawNonce:Re}):null}return v instanceof L.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function dr(v,h){return h.catch(g=>{throw g instanceof L.ZR&&function og(v,h){var g;const w=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new cg(v,function bc(v,h){var g;const w=(0,L.m9)(v),S=h;return re(h.customData.operationType,w,"argument-error"),re(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),Ho._fromError(w,S)}(v,h));else if(w){const S=af(h),N=h;S&&(N.credential=S,N.tenantId=w.tenantId||void 0,N.email=w.email||void 0,N.phoneNumber=w.phoneNumber||void 0)}}(v,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:$u(g),additionalUserInfo:$i(g),user:Do.getOrCreate(S)}})}function ag(v,h){return ug.apply(this,arguments)}function ug(){return(ug=(0,m.Z)(function*(v,h){const g=yield h;return{verificationId:g.verificationId,confirm:w=>dr(v,g.confirm(w))}})).apply(this,arguments)}class cg{constructor(h,g){this.resolver=g,this.auth=function Wc(v){return v.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return dr(Ad(this.auth),this.resolver.resolveSignIn(h))}}class Do{constructor(h){this._delegate=h,this.multiFactor=function Zt(v){const h=(0,L.m9)(v);return De.has(h)||De.set(h,Iu._fromUser(h)),De.get(h)}(h)}static getOrCreate(h){return Do.USER_MAP.has(h)||Do.USER_MAP.set(h,new Do(h)),Do.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,m.Z)(function*(){return dr(g.auth,Rh(g._delegate,h))})()}linkWithPhoneNumber(h,g){var w=this;return(0,m.Z)(function*(){return ag(w.auth,function xu(v,h,g){return Ru.apply(this,arguments)}(w._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,m.Z)(function*(){return dr(g.auth,function Hh(v,h,g){return Oc.apply(this,arguments)}(g._delegate,h,Ns))})()}linkWithRedirect(h){var g=this;return(0,m.Z)(function*(){return yield Gc(Wn(g.auth)),jr(g._delegate,h,Ns)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,m.Z)(function*(){return dr(g.auth,Cn(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return ag(this.auth,function Rn(v,h,g){return yo.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return dr(this.auth,function ar(v,h,g){return Mu.apply(this,arguments)}(this._delegate,h,Ns))}reauthenticateWithRedirect(h){var g=this;return(0,m.Z)(function*(){return yield Gc(Wn(g.auth)),Kn(g._delegate,h,Ns)})()}sendEmailVerification(h){return function td(v,h){return vu.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,m.Z)(function*(){return yield function oy(v,h){return Is.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function yn(v,h){return Cc((0,L.m9)(v),h,null)}(this._delegate,h)}updatePassword(h){return function kh(v,h){return Cc((0,L.m9)(v),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function xi(v,h){return ba.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Pp(v,h){return wu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function nd(v,h,g){return ya.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Do.USER_MAP=new WeakMap;const qc=re;let lg=(()=>{class v{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;qc(S,"invalid-api-key",{appName:g.name}),qc(S,"invalid-api-key",{appName:g.name});const N=typeof window<"u"?Ns:void 0;this._delegate=w.initialize({options:{persistence:cf(S,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(nt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Do.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function pc(v,h,g){const w=Wn(v);re(w._canInitEmulator,w,"emulator-config-failed"),re(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const S=!!g?.disableWarnings,N=ao(h),{host:$,port:X}=function Ch(v){const h=ao(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const N=S[1];return{host:N,port:Bl(w.substr(N.length+1))}}{const[N,$]=w.split(":");return{host:N,port:Bl($)}}}(h);w.config.emulator={url:`${N}//${$}${null===X?"":`:${X}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:$,port:X,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Sp(){function v(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,w)}applyActionCode(g){return function ga(v,h){return Si.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Nh(this._delegate,g)}confirmPasswordReset(g,w){return function Yl(v,h,g){return gu.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var S=this;return(0,m.Z)(function*(){return dr(S._delegate,function _u(v,h,g){return Ec.apply(this,arguments)}(S._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Ph(v,h){return ed.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Mp(v,h){const g=Ti.parseLink(h);return"EMAIL_SIGNIN"===g?.operation}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){qc(zc(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function Zo(v,h){return zh.apply(this,arguments)}(g._delegate,Ns);return w?dr(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Zv(v,h){Wn(v)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,w,S){const{next:N,error:$,complete:X}=uf(g,w,S);return this._delegate.onAuthStateChanged(N,$,X)}onIdTokenChanged(g,w,S){const{next:N,error:$,complete:X}=uf(g,w,S);return this._delegate.onIdTokenChanged(N,$,X)}sendSignInLinkToEmail(g,w){return function Ql(v,h,g){return Jl.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Np(v,h,g){return pu.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,m.Z)(function*(){let S;switch(function rg(v,h){Rs(Object.values(fs).includes(h),v,"invalid-persistence-type"),(0,L.b$)()?Rs(h!==fs.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?Rs(h===fs.NONE,v,"unsupported-persistence-type"):Td()?Rs(h===fs.NONE||h===fs.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):Rs(h===fs.NONE||rf(),v,"unsupported-persistence-type")}(w._delegate,g),g){case fs.SESSION:S=mo;break;case fs.LOCAL:S=(yield zn(dn)._isAvailable())?dn:Hs;break;case fs.NONE:S=Ui;break;default:return we("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return dr(this._delegate,function sy(v){return bh.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return dr(this._delegate,ql(this._delegate,g))}signInWithCustomToken(g){return dr(this._delegate,function $o(v,h){return js.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return dr(this._delegate,function uy(v,h,g){return ql((0,L.m9)(v),Vo.credential(h,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return dr(this._delegate,function Vr(v,h,g){return Mh.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return ag(this._delegate,function pd(v,h,g){return zi.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,m.Z)(function*(){return qc(zc(),w._delegate,"operation-not-supported-in-this-environment"),dr(w._delegate,function Nu(v,h,g){return _d.apply(this,arguments)}(w._delegate,g,Ns))})()}signInWithRedirect(g){var w=this;return(0,m.Z)(function*(){return qc(zc(),w._delegate,"operation-not-supported-in-this-environment"),yield Gc(w._delegate),ur(w._delegate,g,Ns)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function yu(v,h){return ma.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=fs,v})();function uf(v,h,g){let w=v;"function"!=typeof v&&({next:w,error:h,complete:g}=v);const S=w;return{next:$=>S($&&Do.getOrCreate($)),error:h,complete:g}}function cf(v,h){const g=function ig(v,h){const g=sg();if(!g)return[];const w=j(bd,v,h);switch(g.getItem(w)){case fs.NONE:return[Ui];case fs.LOCAL:return[dn,mo];case fs.SESSION:return[mo];default:return[]}}(v,h);if(typeof self<"u"&&!g.includes(dn)&&g.push(dn),typeof window<"u")for(const w of[Hs,mo])g.includes(w)||g.push(w);return g.includes(Ui)||g.push(Ui),g}class lf{constructor(){this.providerId="phone",this._delegate=new Gs(Ad(Q.Z.auth()))}static credential(h,g){return Gs.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}lf.PHONE_SIGN_IN_METHOD=Gs.PHONE_SIGN_IN_METHOD,lf.PROVIDER_ID=Gs.PROVIDER_ID;const Dy=re;class iC{constructor(h,g,w=Q.Z.app()){var S;Dy(null===(S=w.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Ta(h,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ty(v){v.INTERNAL.registerComponent(new me.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new lg(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Vo,FacebookAuthProvider:oi,GithubAuthProvider:_c,GoogleAuthProvider:Ur,OAuthProvider:fo,SAMLAuthProvider:fa,PhoneAuthProvider:lf,PhoneMultiFactorGenerator:Ed,RecaptchaVerifier:iC,TwitterAuthProvider:Hl,Auth:lg,AuthCredential:uo,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(Q.Z)},5861:(_t,Ae,F)=>{function m(L,se,ie,oe,me,Ie,he){try{var G=L[Ie](he),z=G.value}catch(Z){return void ie(Z)}G.done?se(z):Promise.resolve(z).then(oe,me)}function Q(L){return function(){var se=this,ie=arguments;return new Promise(function(oe,me){var Ie=L.apply(se,ie);function he(z){m(Ie,oe,me,he,G,"next",z)}function G(z){m(Ie,oe,me,he,G,"throw",z)}he(void 0)})}}F.d(Ae,{Z:()=>Q})}},_t=>{_t(_t.s=2843)}]);